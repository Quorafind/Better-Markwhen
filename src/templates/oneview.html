<html>
  <head>
    <meta charset="utf-8" />
    <title>Calendar</title>
    <style></style>
    <script type="module" crossorigin>
var ns=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var Ml=ns((bl,st)=>{(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))h(u);new MutationObserver(u=>{for(const v of u)if(v.type==="childList")for(const T of v.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&h(T)}).observe(document,{childList:!0,subtree:!0});function n(u){const v={};return u.integrity&&(v.integrity=u.integrity),u.referrerPolicy&&(v.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?v.credentials="include":u.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function h(u){if(u.ep)return;u.ep=!0;const v=n(u);fetch(u.href,v)}})();//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var za;function D(){return za.apply(null,arguments)}function ls(e){za=e}function ne(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function He(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function L(e,i){return Object.prototype.hasOwnProperty.call(e,i)}function jt(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var i;for(i in e)if(L(e,i))return!1;return!0}function ee(e){return e===void 0}function De(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function qe(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Ia(e,i){var n=[],h,u=e.length;for(h=0;h<u;++h)n.push(i(e[h],h));return n}function Se(e,i){for(var n in i)L(i,n)&&(e[n]=i[n]);return L(i,"toString")&&(e.toString=i.toString),L(i,"valueOf")&&(e.valueOf=i.valueOf),e}function ue(e,i,n,h){return sr(e,i,n,h,!0).utc()}function ds(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function H(e){return e._pf==null&&(e._pf=ds()),e._pf}var kt;Array.prototype.some?kt=Array.prototype.some:kt=function(e){var i=Object(this),n=i.length>>>0,h;for(h=0;h<n;h++)if(h in i&&e.call(this,i[h],h,i))return!0;return!1};function Nt(e){if(e._isValid==null){var i=H(e),n=kt.call(i.parsedDateParts,function(u){return u!=null}),h=!isNaN(e._d.getTime())&&i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&n);if(e._strict&&(h=h&&i.charsLeftOver===0&&i.unusedTokens.length===0&&i.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=h;else return h}return e._isValid}function ct(e){var i=ue(NaN);return e!=null?Se(H(i),e):H(i).userInvalidated=!0,i}var Sa=D.momentProperties=[],xt=!1;function Yt(e,i){var n,h,u,v=Sa.length;if(ee(i._isAMomentObject)||(e._isAMomentObject=i._isAMomentObject),ee(i._i)||(e._i=i._i),ee(i._f)||(e._f=i._f),ee(i._l)||(e._l=i._l),ee(i._strict)||(e._strict=i._strict),ee(i._tzm)||(e._tzm=i._tzm),ee(i._isUTC)||(e._isUTC=i._isUTC),ee(i._offset)||(e._offset=i._offset),ee(i._pf)||(e._pf=H(i)),ee(i._locale)||(e._locale=i._locale),v>0)for(n=0;n<v;n++)h=Sa[n],u=i[h],ee(u)||(e[h]=u);return e}function $e(e){Yt(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),xt===!1&&(xt=!0,D.updateOffset(this),xt=!1)}function le(e){return e instanceof $e||e!=null&&e._isAMomentObject!=null}function Wa(e){D.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function se(e,i){var n=!0;return Se(function(){if(D.deprecationHandler!=null&&D.deprecationHandler(null,e),n){var h=[],u,v,T,C=arguments.length;for(v=0;v<C;v++){if(u="",typeof arguments[v]=="object"){u+=`
[`+v+"] ";for(T in arguments[0])L(arguments[0],T)&&(u+=T+": "+arguments[0][T]+", ");u=u.slice(0,-2)}else u=arguments[v];h.push(u)}Wa(e+`
Arguments: `+Array.prototype.slice.call(h).join("")+`
`+new Error().stack),n=!1}return i.apply(this,arguments)},i)}var Fa={};function _a(e,i){D.deprecationHandler!=null&&D.deprecationHandler(e,i),Fa[e]||(Wa(i),Fa[e]=!0)}D.suppressDeprecationWarnings=!1;D.deprecationHandler=null;function ge(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function hs(e){var i,n;for(n in e)L(e,n)&&(i=e[n],ge(i)?this[n]=i:this["_"+n]=i);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function At(e,i){var n=Se({},e),h;for(h in i)L(i,h)&&(He(e[h])&&He(i[h])?(n[h]={},Se(n[h],e[h]),Se(n[h],i[h])):i[h]!=null?n[h]=i[h]:delete n[h]);for(h in e)L(e,h)&&!L(i,h)&&He(e[h])&&(n[h]=Se({},n[h]));return n}function wt(e){e!=null&&this.set(e)}var Bt;Object.keys?Bt=Object.keys:Bt=function(e){var i,n=[];for(i in e)L(e,i)&&n.push(i);return n};var cs={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function us(e,i,n){var h=this._calendar[e]||this._calendar.sameElse;return ge(h)?h.call(i,n):h}function ce(e,i,n){var h=""+Math.abs(e),u=i-h.length,v=e>=0;return(v?n?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+h}var Ut=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Mt={},Ie={};function F(e,i,n,h){var u=h;typeof h=="string"&&(u=function(){return this[h]()}),e&&(Ie[e]=u),i&&(Ie[i[0]]=function(){return ce(u.apply(this,arguments),i[1],i[2])}),n&&(Ie[n]=function(){return this.localeData().ordinal(u.apply(this,arguments),e)})}function gs(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function ms(e){var i=e.match(Ut),n,h;for(n=0,h=i.length;n<h;n++)Ie[i[n]]?i[n]=Ie[i[n]]:i[n]=gs(i[n]);return function(u){var v="",T;for(T=0;T<h;T++)v+=ge(i[T])?i[T].call(u,e):i[T];return v}}function tt(e,i){return e.isValid()?(i=La(i,e.localeData()),Mt[i]=Mt[i]||ms(i),Mt[i](e)):e.localeData().invalidDate()}function La(e,i){var n=5;function h(u){return i.longDateFormat(u)||u}for(Oe.lastIndex=0;n>=0&&Oe.test(e);)e=e.replace(Oe,h),Oe.lastIndex=0,n-=1;return e}var ps={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function vs(e){var i=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return i||!n?i:(this._longDateFormat[e]=n.match(Ut).map(function(h){return h==="MMMM"||h==="MM"||h==="DD"||h==="dddd"?h.slice(1):h}).join(""),this._longDateFormat[e])}var fs="Invalid date";function Ts(){return this._invalidDate}var Ds="%d",ys=/\d{1,2}/;function Es(e){return this._ordinal.replace("%d",e)}var Cs={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ss(e,i,n,h){var u=this._relativeTime[n];return ge(u)?u(e,i,n,h):u.replace(/%d/i,e)}function Fs(e,i){var n=this._relativeTime[e>0?"future":"past"];return ge(n)?n(i):n.replace(/%s/i,i)}var Ye={};function O(e,i){var n=e.toLowerCase();Ye[n]=Ye[n+"s"]=Ye[i]=e}function ie(e){return typeof e=="string"?Ye[e]||Ye[e.toLowerCase()]:void 0}function Gt(e){var i={},n,h;for(h in e)L(e,h)&&(n=ie(h),n&&(i[n]=e[h]));return i}var Ra={};function V(e,i){Ra[e]=i}function xs(e){var i=[],n;for(n in e)L(e,n)&&i.push({unit:n,priority:Ra[n]});return i.sort(function(h,u){return h.priority-u.priority}),i}function ut(e){return e%4===0&&e%100!==0||e%400===0}function re(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function A(e){var i=+e,n=0;return i!==0&&isFinite(i)&&(n=re(i)),n}function Le(e,i){return function(n){return n!=null?(Za(this,e,n),D.updateOffset(this,i),this):it(this,e)}}function it(e,i){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+i]():NaN}function Za(e,i,n){e.isValid()&&!isNaN(n)&&(i==="FullYear"&&ut(e.year())&&e.month()===1&&e.date()===29?(n=A(n),e._d["set"+(e._isUTC?"UTC":"")+i](n,e.month(),Tt(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+i](n))}function Ms(e){return e=ie(e),ge(this[e])?this[e]():this}function Ps(e,i){if(typeof e=="object"){e=Gt(e);var n=xs(e),h,u=n.length;for(h=0;h<u;h++)this[n[h].unit](e[n[h].unit])}else if(e=ie(e),ge(this[e]))return this[e](i);return this}var ja=/\d/,ae=/\d\d/,Na=/\d{3}/,Xt=/\d{4}/,gt=/[+-]?\d{6}/,Y=/\d\d?/,Ya=/\d\d\d\d?/,wa=/\d\d\d\d\d\d?/,mt=/\d{1,3}/,qt=/\d{1,4}/,pt=/[+-]?\d{1,6}/,Re=/\d+/,vt=/[+-]?\d+/,bs=/Z|[+-]\d\d:?\d\d/gi,ft=/Z|[+-]\d\d(?::?\d\d)?/gi,Hs=/[+-]?\d+(\.\d{1,3})?/,Ke=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ot;ot={};function E(e,i,n){ot[e]=ge(i)?i:function(h,u){return h&&n?n:i}}function ks(e,i){return L(ot,e)?ot[e](i._strict,i._locale):new RegExp(As(e))}function As(e){return te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(i,n,h,u,v){return n||h||u||v}))}function te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var zt={};function Z(e,i){var n,h=i,u;for(typeof e=="string"&&(e=[e]),De(i)&&(h=function(v,T){T[i]=A(v)}),u=e.length,n=0;n<u;n++)zt[e[n]]=h}function Je(e,i){Z(e,function(n,h,u,v){u._w=u._w||{},i(n,u._w,u,v)})}function Bs(e,i,n){i!=null&&L(zt,e)&&zt[e](i,n._a,n,e)}var Q=0,ve=1,he=2,K=3,oe=4,fe=5,be=6,zs=7,Is=8;function Ws(e,i){return(e%i+i)%i}var G;Array.prototype.indexOf?G=Array.prototype.indexOf:G=function(e){var i;for(i=0;i<this.length;++i)if(this[i]===e)return i;return-1};function Tt(e,i){if(isNaN(e)||isNaN(i))return NaN;var n=Ws(i,12);return e+=(i-n)/12,n===1?ut(e)?29:28:31-n%7%2}F("M",["MM",2],"Mo",function(){return this.month()+1});F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});F("MMMM",0,0,function(e){return this.localeData().months(this,e)});O("month","M");V("month",8);E("M",Y);E("MM",Y,ae);E("MMM",function(e,i){return i.monthsShortRegex(e)});E("MMMM",function(e,i){return i.monthsRegex(e)});Z(["M","MM"],function(e,i){i[ve]=A(e)-1});Z(["MMM","MMMM"],function(e,i,n,h){var u=n._locale.monthsParse(e,h,n._strict);u!=null?i[ve]=u:H(n).invalidMonth=e});var _s="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ua="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ga=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ls=Ke,Rs=Ke;function Zs(e,i){return e?ne(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ga).test(i)?"format":"standalone"][e.month()]:ne(this._months)?this._months:this._months.standalone}function js(e,i){return e?ne(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ga.test(i)?"format":"standalone"][e.month()]:ne(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ns(e,i,n){var h,u,v,T=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],h=0;h<12;++h)v=ue([2e3,h]),this._shortMonthsParse[h]=this.monthsShort(v,"").toLocaleLowerCase(),this._longMonthsParse[h]=this.months(v,"").toLocaleLowerCase();return n?i==="MMM"?(u=G.call(this._shortMonthsParse,T),u!==-1?u:null):(u=G.call(this._longMonthsParse,T),u!==-1?u:null):i==="MMM"?(u=G.call(this._shortMonthsParse,T),u!==-1?u:(u=G.call(this._longMonthsParse,T),u!==-1?u:null)):(u=G.call(this._longMonthsParse,T),u!==-1?u:(u=G.call(this._shortMonthsParse,T),u!==-1?u:null))}function Ys(e,i,n){var h,u,v;if(this._monthsParseExact)return Ns.call(this,e,i,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),h=0;h<12;h++){if(u=ue([2e3,h]),n&&!this._longMonthsParse[h]&&(this._longMonthsParse[h]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[h]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),!n&&!this._monthsParse[h]&&(v="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[h]=new RegExp(v.replace(".",""),"i")),n&&i==="MMMM"&&this._longMonthsParse[h].test(e))return h;if(n&&i==="MMM"&&this._shortMonthsParse[h].test(e))return h;if(!n&&this._monthsParse[h].test(e))return h}}function Xa(e,i){var n;if(!e.isValid())return e;if(typeof i=="string"){if(/^\d+$/.test(i))i=A(i);else if(i=e.localeData().monthsParse(i),!De(i))return e}return n=Math.min(e.date(),Tt(e.year(),i)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](i,n),e}function qa(e){return e!=null?(Xa(this,e),D.updateOffset(this,!0),this):it(this,"Month")}function ws(){return Tt(this.year(),this.month())}function Us(e){return this._monthsParseExact?(L(this,"_monthsRegex")||$a.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(L(this,"_monthsShortRegex")||(this._monthsShortRegex=Ls),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Gs(e){return this._monthsParseExact?(L(this,"_monthsRegex")||$a.call(this),e?this._monthsStrictRegex:this._monthsRegex):(L(this,"_monthsRegex")||(this._monthsRegex=Rs),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function $a(){function e(T,C){return C.length-T.length}var i=[],n=[],h=[],u,v;for(u=0;u<12;u++)v=ue([2e3,u]),i.push(this.monthsShort(v,"")),n.push(this.months(v,"")),h.push(this.months(v,"")),h.push(this.monthsShort(v,""));for(i.sort(e),n.sort(e),h.sort(e),u=0;u<12;u++)i[u]=te(i[u]),n[u]=te(n[u]);for(u=0;u<24;u++)h[u]=te(h[u]);this._monthsRegex=new RegExp("^("+h.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}F("Y",0,0,function(){var e=this.year();return e<=9999?ce(e,4):"+"+e});F(0,["YY",2],0,function(){return this.year()%100});F(0,["YYYY",4],0,"year");F(0,["YYYYY",5],0,"year");F(0,["YYYYYY",6,!0],0,"year");O("year","y");V("year",1);E("Y",vt);E("YY",Y,ae);E("YYYY",qt,Xt);E("YYYYY",pt,gt);E("YYYYYY",pt,gt);Z(["YYYYY","YYYYYY"],Q);Z("YYYY",function(e,i){i[Q]=e.length===2?D.parseTwoDigitYear(e):A(e)});Z("YY",function(e,i){i[Q]=D.parseTwoDigitYear(e)});Z("Y",function(e,i){i[Q]=parseInt(e,10)});function we(e){return ut(e)?366:365}D.parseTwoDigitYear=function(e){return A(e)+(A(e)>68?1900:2e3)};var Ka=Le("FullYear",!0);function Xs(){return ut(this.year())}function qs(e,i,n,h,u,v,T){var C;return e<100&&e>=0?(C=new Date(e+400,i,n,h,u,v,T),isFinite(C.getFullYear())&&C.setFullYear(e)):C=new Date(e,i,n,h,u,v,T),C}function Ue(e){var i,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,i=new Date(Date.UTC.apply(null,n)),isFinite(i.getUTCFullYear())&&i.setUTCFullYear(e)):i=new Date(Date.UTC.apply(null,arguments)),i}function nt(e,i,n){var h=7+i-n,u=(7+Ue(e,0,h).getUTCDay()-i)%7;return-u+h-1}function Ja(e,i,n,h,u){var v=(7+n-h)%7,T=nt(e,h,u),C=1+7*(i-1)+v+T,P,b;return C<=0?(P=e-1,b=we(P)+C):C>we(e)?(P=e+1,b=C-we(e)):(P=e,b=C),{year:P,dayOfYear:b}}function Ge(e,i,n){var h=nt(e.year(),i,n),u=Math.floor((e.dayOfYear()-h-1)/7)+1,v,T;return u<1?(T=e.year()-1,v=u+Te(T,i,n)):u>Te(e.year(),i,n)?(v=u-Te(e.year(),i,n),T=e.year()+1):(T=e.year(),v=u),{week:v,year:T}}function Te(e,i,n){var h=nt(e,i,n),u=nt(e+1,i,n);return(we(e)-h+u)/7}F("w",["ww",2],"wo","week");F("W",["WW",2],"Wo","isoWeek");O("week","w");O("isoWeek","W");V("week",5);V("isoWeek",5);E("w",Y);E("ww",Y,ae);E("W",Y);E("WW",Y,ae);Je(["w","ww","W","WW"],function(e,i,n,h){i[h.substr(0,1)]=A(e)});function $s(e){return Ge(e,this._week.dow,this._week.doy).week}var Ks={dow:0,doy:6};function Js(){return this._week.dow}function Qs(){return this._week.doy}function Os(e){var i=this.localeData().week(this);return e==null?i:this.add((e-i)*7,"d")}function Vs(e){var i=Ge(this,1,4).week;return e==null?i:this.add((e-i)*7,"d")}F("d",0,"do","day");F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});F("e",0,0,"weekday");F("E",0,0,"isoWeekday");O("day","d");O("weekday","e");O("isoWeekday","E");V("day",11);V("weekday",11);V("isoWeekday",11);E("d",Y);E("e",Y);E("E",Y);E("dd",function(e,i){return i.weekdaysMinRegex(e)});E("ddd",function(e,i){return i.weekdaysShortRegex(e)});E("dddd",function(e,i){return i.weekdaysRegex(e)});Je(["dd","ddd","dddd"],function(e,i,n,h){var u=n._locale.weekdaysParse(e,h,n._strict);u!=null?i.d=u:H(n).invalidWeekday=e});Je(["d","e","E"],function(e,i,n,h){i[h]=A(e)});function ei(e,i){return typeof e!="string"?e:isNaN(e)?(e=i.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ti(e,i){return typeof e=="string"?i.weekdaysParse(e)%7||7:isNaN(e)?null:e}function $t(e,i){return e.slice(i,7).concat(e.slice(0,i))}var ai="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ri="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),si=Ke,ii=Ke,oi=Ke;function ni(e,i){var n=ne(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(i)?"format":"standalone"];return e===!0?$t(n,this._week.dow):e?n[e.day()]:n}function li(e){return e===!0?$t(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function di(e){return e===!0?$t(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function hi(e,i,n){var h,u,v,T=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],h=0;h<7;++h)v=ue([2e3,1]).day(h),this._minWeekdaysParse[h]=this.weekdaysMin(v,"").toLocaleLowerCase(),this._shortWeekdaysParse[h]=this.weekdaysShort(v,"").toLocaleLowerCase(),this._weekdaysParse[h]=this.weekdays(v,"").toLocaleLowerCase();return n?i==="dddd"?(u=G.call(this._weekdaysParse,T),u!==-1?u:null):i==="ddd"?(u=G.call(this._shortWeekdaysParse,T),u!==-1?u:null):(u=G.call(this._minWeekdaysParse,T),u!==-1?u:null):i==="dddd"?(u=G.call(this._weekdaysParse,T),u!==-1||(u=G.call(this._shortWeekdaysParse,T),u!==-1)?u:(u=G.call(this._minWeekdaysParse,T),u!==-1?u:null)):i==="ddd"?(u=G.call(this._shortWeekdaysParse,T),u!==-1||(u=G.call(this._weekdaysParse,T),u!==-1)?u:(u=G.call(this._minWeekdaysParse,T),u!==-1?u:null)):(u=G.call(this._minWeekdaysParse,T),u!==-1||(u=G.call(this._weekdaysParse,T),u!==-1)?u:(u=G.call(this._shortWeekdaysParse,T),u!==-1?u:null))}function ci(e,i,n){var h,u,v;if(this._weekdaysParseExact)return hi.call(this,e,i,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),h=0;h<7;h++){if(u=ue([2e3,1]).day(h),n&&!this._fullWeekdaysParse[h]&&(this._fullWeekdaysParse[h]=new RegExp("^"+this.weekdays(u,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[h]=new RegExp("^"+this.weekdaysShort(u,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[h]=new RegExp("^"+this.weekdaysMin(u,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[h]||(v="^"+this.weekdays(u,"")+"|^"+this.weekdaysShort(u,"")+"|^"+this.weekdaysMin(u,""),this._weekdaysParse[h]=new RegExp(v.replace(".",""),"i")),n&&i==="dddd"&&this._fullWeekdaysParse[h].test(e))return h;if(n&&i==="ddd"&&this._shortWeekdaysParse[h].test(e))return h;if(n&&i==="dd"&&this._minWeekdaysParse[h].test(e))return h;if(!n&&this._weekdaysParse[h].test(e))return h}}function ui(e){if(!this.isValid())return e!=null?this:NaN;var i=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=ei(e,this.localeData()),this.add(e-i,"d")):i}function gi(e){if(!this.isValid())return e!=null?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return e==null?i:this.add(e-i,"d")}function mi(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var i=ti(e,this.localeData());return this.day(this.day()%7?i:i-7)}else return this.day()||7}function pi(e){return this._weekdaysParseExact?(L(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(L(this,"_weekdaysRegex")||(this._weekdaysRegex=si),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function vi(e){return this._weekdaysParseExact?(L(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(L(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ii),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function fi(e){return this._weekdaysParseExact?(L(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(L(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=oi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(k,I){return I.length-k.length}var i=[],n=[],h=[],u=[],v,T,C,P,b;for(v=0;v<7;v++)T=ue([2e3,1]).day(v),C=te(this.weekdaysMin(T,"")),P=te(this.weekdaysShort(T,"")),b=te(this.weekdays(T,"")),i.push(C),n.push(P),h.push(b),u.push(C),u.push(P),u.push(b);i.sort(e),n.sort(e),h.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Ti(){return this.hours()||24}F("H",["HH",2],0,"hour");F("h",["hh",2],0,Jt);F("k",["kk",2],0,Ti);F("hmm",0,0,function(){return""+Jt.apply(this)+ce(this.minutes(),2)});F("hmmss",0,0,function(){return""+Jt.apply(this)+ce(this.minutes(),2)+ce(this.seconds(),2)});F("Hmm",0,0,function(){return""+this.hours()+ce(this.minutes(),2)});F("Hmmss",0,0,function(){return""+this.hours()+ce(this.minutes(),2)+ce(this.seconds(),2)});function Oa(e,i){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)})}Oa("a",!0);Oa("A",!1);O("hour","h");V("hour",13);function Va(e,i){return i._meridiemParse}E("a",Va);E("A",Va);E("H",Y);E("h",Y);E("k",Y);E("HH",Y,ae);E("hh",Y,ae);E("kk",Y,ae);E("hmm",Ya);E("hmmss",wa);E("Hmm",Ya);E("Hmmss",wa);Z(["H","HH"],K);Z(["k","kk"],function(e,i,n){var h=A(e);i[K]=h===24?0:h});Z(["a","A"],function(e,i,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Z(["h","hh"],function(e,i,n){i[K]=A(e),H(n).bigHour=!0});Z("hmm",function(e,i,n){var h=e.length-2;i[K]=A(e.substr(0,h)),i[oe]=A(e.substr(h)),H(n).bigHour=!0});Z("hmmss",function(e,i,n){var h=e.length-4,u=e.length-2;i[K]=A(e.substr(0,h)),i[oe]=A(e.substr(h,2)),i[fe]=A(e.substr(u)),H(n).bigHour=!0});Z("Hmm",function(e,i,n){var h=e.length-2;i[K]=A(e.substr(0,h)),i[oe]=A(e.substr(h))});Z("Hmmss",function(e,i,n){var h=e.length-4,u=e.length-2;i[K]=A(e.substr(0,h)),i[oe]=A(e.substr(h,2)),i[fe]=A(e.substr(u))});function Di(e){return(e+"").toLowerCase().charAt(0)==="p"}var yi=/[ap]\.?m?\.?/i,Ei=Le("Hours",!0);function Ci(e,i,n){return e>11?n?"pm":"PM":n?"am":"AM"}var er={calendar:cs,longDateFormat:ps,invalidDate:fs,ordinal:Ds,dayOfMonthOrdinalParse:ys,relativeTime:Cs,months:_s,monthsShort:Ua,week:Ks,weekdays:ai,weekdaysMin:ri,weekdaysShort:Qa,meridiemParse:yi},w={},je={},Xe;function Si(e,i){var n,h=Math.min(e.length,i.length);for(n=0;n<h;n+=1)if(e[n]!==i[n])return n;return h}function xa(e){return e&&e.toLowerCase().replace("_","-")}function Fi(e){for(var i=0,n,h,u,v;i<e.length;){for(v=xa(e[i]).split("-"),n=v.length,h=xa(e[i+1]),h=h?h.split("-"):null;n>0;){if(u=Dt(v.slice(0,n).join("-")),u)return u;if(h&&h.length>=n&&Si(v,h)>=n-1)break;n--}i++}return Xe}function xi(e){return e.match("^[^/\\\\]*$")!=null}function Dt(e){var i=null,n;if(w[e]===void 0&&typeof st<"u"&&st&&st.exports&&xi(e))try{i=Xe._abbr,n=require,n("./locale/"+e),xe(i)}catch{w[e]=null}return w[e]}function xe(e,i){var n;return e&&(ee(i)?n=ye(e):n=Qt(e,i),n?Xe=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Xe._abbr}function Qt(e,i){if(i!==null){var n,h=er;if(i.abbr=e,w[e]!=null)_a("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),h=w[e]._config;else if(i.parentLocale!=null)if(w[i.parentLocale]!=null)h=w[i.parentLocale]._config;else if(n=Dt(i.parentLocale),n!=null)h=n._config;else return je[i.parentLocale]||(je[i.parentLocale]=[]),je[i.parentLocale].push({name:e,config:i}),null;return w[e]=new wt(At(h,i)),je[e]&&je[e].forEach(function(u){Qt(u.name,u.config)}),xe(e),w[e]}else return delete w[e],null}function Mi(e,i){if(i!=null){var n,h,u=er;w[e]!=null&&w[e].parentLocale!=null?w[e].set(At(w[e]._config,i)):(h=Dt(e),h!=null&&(u=h._config),i=At(u,i),h==null&&(i.abbr=e),n=new wt(i),n.parentLocale=w[e],w[e]=n),xe(e)}else w[e]!=null&&(w[e].parentLocale!=null?(w[e]=w[e].parentLocale,e===xe()&&xe(e)):w[e]!=null&&delete w[e]);return w[e]}function ye(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Xe;if(!ne(e)){if(i=Dt(e),i)return i;e=[e]}return Fi(e)}function Pi(){return Bt(w)}function Ot(e){var i,n=e._a;return n&&H(e).overflow===-2&&(i=n[ve]<0||n[ve]>11?ve:n[he]<1||n[he]>Tt(n[Q],n[ve])?he:n[K]<0||n[K]>24||n[K]===24&&(n[oe]!==0||n[fe]!==0||n[be]!==0)?K:n[oe]<0||n[oe]>59?oe:n[fe]<0||n[fe]>59?fe:n[be]<0||n[be]>999?be:-1,H(e)._overflowDayOfYear&&(i<Q||i>he)&&(i=he),H(e)._overflowWeeks&&i===-1&&(i=zs),H(e)._overflowWeekday&&i===-1&&(i=Is),H(e).overflow=i),e}var bi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ki=/Z|[+-]\d\d(?::?\d\d)?/,Ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Pt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ai=/^\/?Date\((-?\d+)/i,Bi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,zi={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function tr(e){var i,n,h=e._i,u=bi.exec(h)||Hi.exec(h),v,T,C,P,b=Ve.length,k=Pt.length;if(u){for(H(e).iso=!0,i=0,n=b;i<n;i++)if(Ve[i][1].exec(u[1])){T=Ve[i][0],v=Ve[i][2]!==!1;break}if(T==null){e._isValid=!1;return}if(u[3]){for(i=0,n=k;i<n;i++)if(Pt[i][1].exec(u[3])){C=(u[2]||" ")+Pt[i][0];break}if(C==null){e._isValid=!1;return}}if(!v&&C!=null){e._isValid=!1;return}if(u[4])if(ki.exec(u[4]))P="Z";else{e._isValid=!1;return}e._f=T+(C||"")+(P||""),ea(e)}else e._isValid=!1}function Ii(e,i,n,h,u,v){var T=[Wi(e),Ua.indexOf(i),parseInt(n,10),parseInt(h,10),parseInt(u,10)];return v&&T.push(parseInt(v,10)),T}function Wi(e){var i=parseInt(e,10);return i<=49?2e3+i:i<=999?1900+i:i}function _i(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Li(e,i,n){if(e){var h=Qa.indexOf(e),u=new Date(i[0],i[1],i[2]).getDay();if(h!==u)return H(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Ri(e,i,n){if(e)return zi[e];if(i)return 0;var h=parseInt(n,10),u=h%100,v=(h-u)/100;return v*60+u}function ar(e){var i=Bi.exec(_i(e._i)),n;if(i){if(n=Ii(i[4],i[3],i[2],i[5],i[6],i[7]),!Li(i[1],n,e))return;e._a=n,e._tzm=Ri(i[8],i[9],i[10]),e._d=Ue.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),H(e).rfc2822=!0}else e._isValid=!1}function Zi(e){var i=Ai.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}if(tr(e),e._isValid===!1)delete e._isValid;else return;if(ar(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:D.createFromInputFallback(e)}D.createFromInputFallback=se("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Be(e,i,n){return e??i??n}function ji(e){var i=new Date(D.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Vt(e){var i,n,h=[],u,v,T;if(!e._d){for(u=ji(e),e._w&&e._a[he]==null&&e._a[ve]==null&&Ni(e),e._dayOfYear!=null&&(T=Be(e._a[Q],u[Q]),(e._dayOfYear>we(T)||e._dayOfYear===0)&&(H(e)._overflowDayOfYear=!0),n=Ue(T,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[he]=n.getUTCDate()),i=0;i<3&&e._a[i]==null;++i)e._a[i]=h[i]=u[i];for(;i<7;i++)e._a[i]=h[i]=e._a[i]==null?i===2?1:0:e._a[i];e._a[K]===24&&e._a[oe]===0&&e._a[fe]===0&&e._a[be]===0&&(e._nextDay=!0,e._a[K]=0),e._d=(e._useUTC?Ue:qs).apply(null,h),v=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[K]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==v&&(H(e).weekdayMismatch=!0)}}function Ni(e){var i,n,h,u,v,T,C,P,b;i=e._w,i.GG!=null||i.W!=null||i.E!=null?(v=1,T=4,n=Be(i.GG,e._a[Q],Ge(N(),1,4).year),h=Be(i.W,1),u=Be(i.E,1),(u<1||u>7)&&(P=!0)):(v=e._locale._week.dow,T=e._locale._week.doy,b=Ge(N(),v,T),n=Be(i.gg,e._a[Q],b.year),h=Be(i.w,b.week),i.d!=null?(u=i.d,(u<0||u>6)&&(P=!0)):i.e!=null?(u=i.e+v,(i.e<0||i.e>6)&&(P=!0)):u=v),h<1||h>Te(n,v,T)?H(e)._overflowWeeks=!0:P!=null?H(e)._overflowWeekday=!0:(C=Ja(n,h,u,v,T),e._a[Q]=C.year,e._dayOfYear=C.dayOfYear)}D.ISO_8601=function(){};D.RFC_2822=function(){};function ea(e){if(e._f===D.ISO_8601){tr(e);return}if(e._f===D.RFC_2822){ar(e);return}e._a=[],H(e).empty=!0;var i=""+e._i,n,h,u,v,T,C=i.length,P=0,b,k;for(u=La(e._f,e._locale).match(Ut)||[],k=u.length,n=0;n<k;n++)v=u[n],h=(i.match(ks(v,e))||[])[0],h&&(T=i.substr(0,i.indexOf(h)),T.length>0&&H(e).unusedInput.push(T),i=i.slice(i.indexOf(h)+h.length),P+=h.length),Ie[v]?(h?H(e).empty=!1:H(e).unusedTokens.push(v),Bs(v,h,e)):e._strict&&!h&&H(e).unusedTokens.push(v);H(e).charsLeftOver=C-P,i.length>0&&H(e).unusedInput.push(i),e._a[K]<=12&&H(e).bigHour===!0&&e._a[K]>0&&(H(e).bigHour=void 0),H(e).parsedDateParts=e._a.slice(0),H(e).meridiem=e._meridiem,e._a[K]=Yi(e._locale,e._a[K],e._meridiem),b=H(e).era,b!==null&&(e._a[Q]=e._locale.erasConvertYear(b,e._a[Q])),Vt(e),Ot(e)}function Yi(e,i,n){var h;return n==null?i:e.meridiemHour!=null?e.meridiemHour(i,n):(e.isPM!=null&&(h=e.isPM(n),h&&i<12&&(i+=12),!h&&i===12&&(i=0)),i)}function wi(e){var i,n,h,u,v,T,C=!1,P=e._f.length;if(P===0){H(e).invalidFormat=!0,e._d=new Date(NaN);return}for(u=0;u<P;u++)v=0,T=!1,i=Yt({},e),e._useUTC!=null&&(i._useUTC=e._useUTC),i._f=e._f[u],ea(i),Nt(i)&&(T=!0),v+=H(i).charsLeftOver,v+=H(i).unusedTokens.length*10,H(i).score=v,C?v<h&&(h=v,n=i):(h==null||v<h||T)&&(h=v,n=i,T&&(C=!0));Se(e,n||i)}function Ui(e){if(!e._d){var i=Gt(e._i),n=i.day===void 0?i.date:i.day;e._a=Ia([i.year,i.month,n,i.hour,i.minute,i.second,i.millisecond],function(h){return h&&parseInt(h,10)}),Vt(e)}}function Gi(e){var i=new $e(Ot(rr(e)));return i._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function rr(e){var i=e._i,n=e._f;return e._locale=e._locale||ye(e._l),i===null||n===void 0&&i===""?ct({nullInput:!0}):(typeof i=="string"&&(e._i=i=e._locale.preparse(i)),le(i)?new $e(Ot(i)):(qe(i)?e._d=i:ne(n)?wi(e):n?ea(e):Xi(e),Nt(e)||(e._d=null),e))}function Xi(e){var i=e._i;ee(i)?e._d=new Date(D.now()):qe(i)?e._d=new Date(i.valueOf()):typeof i=="string"?Zi(e):ne(i)?(e._a=Ia(i.slice(0),function(n){return parseInt(n,10)}),Vt(e)):He(i)?Ui(e):De(i)?e._d=new Date(i):D.createFromInputFallback(e)}function sr(e,i,n,h,u){var v={};return(i===!0||i===!1)&&(h=i,i=void 0),(n===!0||n===!1)&&(h=n,n=void 0),(He(e)&&jt(e)||ne(e)&&e.length===0)&&(e=void 0),v._isAMomentObject=!0,v._useUTC=v._isUTC=u,v._l=n,v._i=e,v._f=i,v._strict=h,Gi(v)}function N(e,i,n,h){return sr(e,i,n,h,!1)}var qi=se("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=N.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:ct()}),$i=se("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=N.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:ct()});function ir(e,i){var n,h;if(i.length===1&&ne(i[0])&&(i=i[0]),!i.length)return N();for(n=i[0],h=1;h<i.length;++h)(!i[h].isValid()||i[h][e](n))&&(n=i[h]);return n}function Ki(){var e=[].slice.call(arguments,0);return ir("isBefore",e)}function Ji(){var e=[].slice.call(arguments,0);return ir("isAfter",e)}var Qi=function(){return Date.now?Date.now():+new Date},Ne=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Oi(e){var i,n=!1,h,u=Ne.length;for(i in e)if(L(e,i)&&!(G.call(Ne,i)!==-1&&(e[i]==null||!isNaN(e[i]))))return!1;for(h=0;h<u;++h)if(e[Ne[h]]){if(n)return!1;parseFloat(e[Ne[h]])!==A(e[Ne[h]])&&(n=!0)}return!0}function Vi(){return this._isValid}function eo(){return de(NaN)}function yt(e){var i=Gt(e),n=i.year||0,h=i.quarter||0,u=i.month||0,v=i.week||i.isoWeek||0,T=i.day||0,C=i.hour||0,P=i.minute||0,b=i.second||0,k=i.millisecond||0;this._isValid=Oi(i),this._milliseconds=+k+b*1e3+P*6e4+C*1e3*60*60,this._days=+T+v*7,this._months=+u+h*3+n*12,this._data={},this._locale=ye(),this._bubble()}function at(e){return e instanceof yt}function It(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function to(e,i,n){var h=Math.min(e.length,i.length),u=Math.abs(e.length-i.length),v=0,T;for(T=0;T<h;T++)(n&&e[T]!==i[T]||!n&&A(e[T])!==A(i[T]))&&v++;return v+u}function or(e,i){F(e,0,0,function(){var n=this.utcOffset(),h="+";return n<0&&(n=-n,h="-"),h+ce(~~(n/60),2)+i+ce(~~n%60,2)})}or("Z",":");or("ZZ","");E("Z",ft);E("ZZ",ft);Z(["Z","ZZ"],function(e,i,n){n._useUTC=!0,n._tzm=ta(ft,e)});var ao=/([\+\-]|\d\d)/gi;function ta(e,i){var n=(i||"").match(e),h,u,v;return n===null?null:(h=n[n.length-1]||[],u=(h+"").match(ao)||["-",0,0],v=+(u[1]*60)+A(u[2]),v===0?0:u[0]==="+"?v:-v)}function aa(e,i){var n,h;return i._isUTC?(n=i.clone(),h=(le(e)||qe(e)?e.valueOf():N(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+h),D.updateOffset(n,!1),n):N(e).local()}function Wt(e){return-Math.round(e._d.getTimezoneOffset())}D.updateOffset=function(){};function ro(e,i,n){var h=this._offset||0,u;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=ta(ft,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&i&&(u=Wt(this)),this._offset=e,this._isUTC=!0,u!=null&&this.add(u,"m"),h!==e&&(!i||this._changeInProgress?dr(this,de(e-h,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,D.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?h:Wt(this)}function so(e,i){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,i),this):-this.utcOffset()}function io(e){return this.utcOffset(0,e)}function oo(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Wt(this),"m")),this}function no(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=ta(bs,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function lo(e){return this.isValid()?(e=e?N(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function ho(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function co(){if(!ee(this._isDSTShifted))return this._isDSTShifted;var e={},i;return Yt(e,this),e=rr(e),e._a?(i=e._isUTC?ue(e._a):N(e._a),this._isDSTShifted=this.isValid()&&to(e._a,i.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function uo(){return this.isValid()?!this._isUTC:!1}function go(){return this.isValid()?this._isUTC:!1}function nr(){return this.isValid()?this._isUTC&&this._offset===0:!1}var mo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,po=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function de(e,i){var n=e,h=null,u,v,T;return at(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:De(e)||!isNaN(+e)?(n={},i?n[i]=+e:n.milliseconds=+e):(h=mo.exec(e))?(u=h[1]==="-"?-1:1,n={y:0,d:A(h[he])*u,h:A(h[K])*u,m:A(h[oe])*u,s:A(h[fe])*u,ms:A(It(h[be]*1e3))*u}):(h=po.exec(e))?(u=h[1]==="-"?-1:1,n={y:Pe(h[2],u),M:Pe(h[3],u),w:Pe(h[4],u),d:Pe(h[5],u),h:Pe(h[6],u),m:Pe(h[7],u),s:Pe(h[8],u)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(T=vo(N(n.from),N(n.to)),n={},n.ms=T.milliseconds,n.M=T.months),v=new yt(n),at(e)&&L(e,"_locale")&&(v._locale=e._locale),at(e)&&L(e,"_isValid")&&(v._isValid=e._isValid),v}de.fn=yt.prototype;de.invalid=eo;function Pe(e,i){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*i}function Ma(e,i){var n={};return n.months=i.month()-e.month()+(i.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(i)&&--n.months,n.milliseconds=+i-+e.clone().add(n.months,"M"),n}function vo(e,i){var n;return e.isValid()&&i.isValid()?(i=aa(i,e),e.isBefore(i)?n=Ma(e,i):(n=Ma(i,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function lr(e,i){return function(n,h){var u,v;return h!==null&&!isNaN(+h)&&(_a(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),v=n,n=h,h=v),u=de(n,h),dr(this,u,e),this}}function dr(e,i,n,h){var u=i._milliseconds,v=It(i._days),T=It(i._months);e.isValid()&&(h=h??!0,T&&Xa(e,it(e,"Month")+T*n),v&&Za(e,"Date",it(e,"Date")+v*n),u&&e._d.setTime(e._d.valueOf()+u*n),h&&D.updateOffset(e,v||T))}var fo=lr(1,"add"),To=lr(-1,"subtract");function hr(e){return typeof e=="string"||e instanceof String}function Do(e){return le(e)||qe(e)||hr(e)||De(e)||Eo(e)||yo(e)||e===null||e===void 0}function yo(e){var i=He(e)&&!jt(e),n=!1,h=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u,v,T=h.length;for(u=0;u<T;u+=1)v=h[u],n=n||L(e,v);return i&&n}function Eo(e){var i=ne(e),n=!1;return i&&(n=e.filter(function(h){return!De(h)&&hr(e)}).length===0),i&&n}function Co(e){var i=He(e)&&!jt(e),n=!1,h=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],u,v;for(u=0;u<h.length;u+=1)v=h[u],n=n||L(e,v);return i&&n}function So(e,i){var n=e.diff(i,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Fo(e,i){arguments.length===1&&(arguments[0]?Do(arguments[0])?(e=arguments[0],i=void 0):Co(arguments[0])&&(i=arguments[0],e=void 0):(e=void 0,i=void 0));var n=e||N(),h=aa(n,this).startOf("day"),u=D.calendarFormat(this,h)||"sameElse",v=i&&(ge(i[u])?i[u].call(this,n):i[u]);return this.format(v||this.localeData().calendar(u,this,N(n)))}function xo(){return new $e(this)}function Mo(e,i){var n=le(e)?e:N(e);return this.isValid()&&n.isValid()?(i=ie(i)||"millisecond",i==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(i).valueOf()):!1}function Po(e,i){var n=le(e)?e:N(e);return this.isValid()&&n.isValid()?(i=ie(i)||"millisecond",i==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(i).valueOf()<n.valueOf()):!1}function bo(e,i,n,h){var u=le(e)?e:N(e),v=le(i)?i:N(i);return this.isValid()&&u.isValid()&&v.isValid()?(h=h||"()",(h[0]==="("?this.isAfter(u,n):!this.isBefore(u,n))&&(h[1]===")"?this.isBefore(v,n):!this.isAfter(v,n))):!1}function Ho(e,i){var n=le(e)?e:N(e),h;return this.isValid()&&n.isValid()?(i=ie(i)||"millisecond",i==="millisecond"?this.valueOf()===n.valueOf():(h=n.valueOf(),this.clone().startOf(i).valueOf()<=h&&h<=this.clone().endOf(i).valueOf())):!1}function ko(e,i){return this.isSame(e,i)||this.isAfter(e,i)}function Ao(e,i){return this.isSame(e,i)||this.isBefore(e,i)}function Bo(e,i,n){var h,u,v;if(!this.isValid())return NaN;if(h=aa(e,this),!h.isValid())return NaN;switch(u=(h.utcOffset()-this.utcOffset())*6e4,i=ie(i),i){case"year":v=rt(this,h)/12;break;case"month":v=rt(this,h);break;case"quarter":v=rt(this,h)/3;break;case"second":v=(this-h)/1e3;break;case"minute":v=(this-h)/6e4;break;case"hour":v=(this-h)/36e5;break;case"day":v=(this-h-u)/864e5;break;case"week":v=(this-h-u)/6048e5;break;default:v=this-h}return n?v:re(v)}function rt(e,i){if(e.date()<i.date())return-rt(i,e);var n=(i.year()-e.year())*12+(i.month()-e.month()),h=e.clone().add(n,"months"),u,v;return i-h<0?(u=e.clone().add(n-1,"months"),v=(i-h)/(h-u)):(u=e.clone().add(n+1,"months"),v=(i-h)/(u-h)),-(n+v)||0}D.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";D.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function zo(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Io(e){if(!this.isValid())return null;var i=e!==!0,n=i?this.clone().utc():this;return n.year()<0||n.year()>9999?tt(n,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ge(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",tt(n,"Z")):tt(n,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Wo(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",i="",n,h,u,v;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",i="Z"),n="["+e+'("]',h=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",u="-MM-DD[T]HH:mm:ss.SSS",v=i+'[")]',this.format(n+h+u+v)}function _o(e){e||(e=this.isUtc()?D.defaultFormatUtc:D.defaultFormat);var i=tt(this,e);return this.localeData().postformat(i)}function Lo(e,i){return this.isValid()&&(le(e)&&e.isValid()||N(e).isValid())?de({to:this,from:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function Ro(e){return this.from(N(),e)}function Zo(e,i){return this.isValid()&&(le(e)&&e.isValid()||N(e).isValid())?de({from:this,to:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function jo(e){return this.to(N(),e)}function cr(e){var i;return e===void 0?this._locale._abbr:(i=ye(e),i!=null&&(this._locale=i),this)}var ur=se("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function gr(){return this._locale}var lt=1e3,We=60*lt,dt=60*We,mr=(365*400+97)*24*dt;function _e(e,i){return(e%i+i)%i}function pr(e,i,n){return e<100&&e>=0?new Date(e+400,i,n)-mr:new Date(e,i,n).valueOf()}function vr(e,i,n){return e<100&&e>=0?Date.UTC(e+400,i,n)-mr:Date.UTC(e,i,n)}function No(e){var i,n;if(e=ie(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?vr:pr,e){case"year":i=n(this.year(),0,1);break;case"quarter":i=n(this.year(),this.month()-this.month()%3,1);break;case"month":i=n(this.year(),this.month(),1);break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=n(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=_e(i+(this._isUTC?0:this.utcOffset()*We),dt);break;case"minute":i=this._d.valueOf(),i-=_e(i,We);break;case"second":i=this._d.valueOf(),i-=_e(i,lt);break}return this._d.setTime(i),D.updateOffset(this,!0),this}function Yo(e){var i,n;if(e=ie(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?vr:pr,e){case"year":i=n(this.year()+1,0,1)-1;break;case"quarter":i=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=n(this.year(),this.month()+1,1)-1;break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=dt-_e(i+(this._isUTC?0:this.utcOffset()*We),dt)-1;break;case"minute":i=this._d.valueOf(),i+=We-_e(i,We)-1;break;case"second":i=this._d.valueOf(),i+=lt-_e(i,lt)-1;break}return this._d.setTime(i),D.updateOffset(this,!0),this}function wo(){return this._d.valueOf()-(this._offset||0)*6e4}function Uo(){return Math.floor(this.valueOf()/1e3)}function Go(){return new Date(this.valueOf())}function Xo(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function qo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function $o(){return this.isValid()?this.toISOString():null}function Ko(){return Nt(this)}function Jo(){return Se({},H(this))}function Qo(){return H(this).overflow}function Oo(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}F("N",0,0,"eraAbbr");F("NN",0,0,"eraAbbr");F("NNN",0,0,"eraAbbr");F("NNNN",0,0,"eraName");F("NNNNN",0,0,"eraNarrow");F("y",["y",1],"yo","eraYear");F("y",["yy",2],0,"eraYear");F("y",["yyy",3],0,"eraYear");F("y",["yyyy",4],0,"eraYear");E("N",ra);E("NN",ra);E("NNN",ra);E("NNNN",hn);E("NNNNN",cn);Z(["N","NN","NNN","NNNN","NNNNN"],function(e,i,n,h){var u=n._locale.erasParse(e,h,n._strict);u?H(n).era=u:H(n).invalidEra=e});E("y",Re);E("yy",Re);E("yyy",Re);E("yyyy",Re);E("yo",un);Z(["y","yy","yyy","yyyy"],Q);Z(["yo"],function(e,i,n,h){var u;n._locale._eraYearOrdinalRegex&&(u=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?i[Q]=n._locale.eraYearOrdinalParse(e,u):i[Q]=parseInt(e,10)});function Vo(e,i){var n,h,u,v=this._eras||ye("en")._eras;for(n=0,h=v.length;n<h;++n){switch(typeof v[n].since){case"string":u=D(v[n].since).startOf("day"),v[n].since=u.valueOf();break}switch(typeof v[n].until){case"undefined":v[n].until=1/0;break;case"string":u=D(v[n].until).startOf("day").valueOf(),v[n].until=u.valueOf();break}}return v}function en(e,i,n){var h,u,v=this.eras(),T,C,P;for(e=e.toUpperCase(),h=0,u=v.length;h<u;++h)if(T=v[h].name.toUpperCase(),C=v[h].abbr.toUpperCase(),P=v[h].narrow.toUpperCase(),n)switch(i){case"N":case"NN":case"NNN":if(C===e)return v[h];break;case"NNNN":if(T===e)return v[h];break;case"NNNNN":if(P===e)return v[h];break}else if([T,C,P].indexOf(e)>=0)return v[h]}function tn(e,i){var n=e.since<=e.until?1:-1;return i===void 0?D(e.since).year():D(e.since).year()+(i-e.offset)*n}function an(){var e,i,n,h=this.localeData().eras();for(e=0,i=h.length;e<i;++e)if(n=this.clone().startOf("day").valueOf(),h[e].since<=n&&n<=h[e].until||h[e].until<=n&&n<=h[e].since)return h[e].name;return""}function rn(){var e,i,n,h=this.localeData().eras();for(e=0,i=h.length;e<i;++e)if(n=this.clone().startOf("day").valueOf(),h[e].since<=n&&n<=h[e].until||h[e].until<=n&&n<=h[e].since)return h[e].narrow;return""}function sn(){var e,i,n,h=this.localeData().eras();for(e=0,i=h.length;e<i;++e)if(n=this.clone().startOf("day").valueOf(),h[e].since<=n&&n<=h[e].until||h[e].until<=n&&n<=h[e].since)return h[e].abbr;return""}function on(){var e,i,n,h,u=this.localeData().eras();for(e=0,i=u.length;e<i;++e)if(n=u[e].since<=u[e].until?1:-1,h=this.clone().startOf("day").valueOf(),u[e].since<=h&&h<=u[e].until||u[e].until<=h&&h<=u[e].since)return(this.year()-D(u[e].since).year())*n+u[e].offset;return this.year()}function nn(e){return L(this,"_erasNameRegex")||sa.call(this),e?this._erasNameRegex:this._erasRegex}function ln(e){return L(this,"_erasAbbrRegex")||sa.call(this),e?this._erasAbbrRegex:this._erasRegex}function dn(e){return L(this,"_erasNarrowRegex")||sa.call(this),e?this._erasNarrowRegex:this._erasRegex}function ra(e,i){return i.erasAbbrRegex(e)}function hn(e,i){return i.erasNameRegex(e)}function cn(e,i){return i.erasNarrowRegex(e)}function un(e,i){return i._eraYearOrdinalRegex||Re}function sa(){var e=[],i=[],n=[],h=[],u,v,T=this.eras();for(u=0,v=T.length;u<v;++u)i.push(te(T[u].name)),e.push(te(T[u].abbr)),n.push(te(T[u].narrow)),h.push(te(T[u].name)),h.push(te(T[u].abbr)),h.push(te(T[u].narrow));this._erasRegex=new RegExp("^("+h.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}F(0,["gg",2],0,function(){return this.weekYear()%100});F(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Et(e,i){F(0,[e,e.length],0,i)}Et("gggg","weekYear");Et("ggggg","weekYear");Et("GGGG","isoWeekYear");Et("GGGGG","isoWeekYear");O("weekYear","gg");O("isoWeekYear","GG");V("weekYear",1);V("isoWeekYear",1);E("G",vt);E("g",vt);E("GG",Y,ae);E("gg",Y,ae);E("GGGG",qt,Xt);E("gggg",qt,Xt);E("GGGGG",pt,gt);E("ggggg",pt,gt);Je(["gggg","ggggg","GGGG","GGGGG"],function(e,i,n,h){i[h.substr(0,2)]=A(e)});Je(["gg","GG"],function(e,i,n,h){i[h]=D.parseTwoDigitYear(e)});function gn(e){return fr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function mn(e){return fr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function pn(){return Te(this.year(),1,4)}function vn(){return Te(this.isoWeekYear(),1,4)}function fn(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function Tn(){var e=this.localeData()._week;return Te(this.weekYear(),e.dow,e.doy)}function fr(e,i,n,h,u){var v;return e==null?Ge(this,h,u).year:(v=Te(e,h,u),i>v&&(i=v),Dn.call(this,e,i,n,h,u))}function Dn(e,i,n,h,u){var v=Ja(e,i,n,h,u),T=Ue(v.year,0,v.dayOfYear);return this.year(T.getUTCFullYear()),this.month(T.getUTCMonth()),this.date(T.getUTCDate()),this}F("Q",0,"Qo","quarter");O("quarter","Q");V("quarter",7);E("Q",ja);Z("Q",function(e,i){i[ve]=(A(e)-1)*3});function yn(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}F("D",["DD",2],"Do","date");O("date","D");V("date",9);E("D",Y);E("DD",Y,ae);E("Do",function(e,i){return e?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient});Z(["D","DD"],he);Z("Do",function(e,i){i[he]=A(e.match(Y)[0])});var Tr=Le("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear");O("dayOfYear","DDD");V("dayOfYear",4);E("DDD",mt);E("DDDD",Na);Z(["DDD","DDDD"],function(e,i,n){n._dayOfYear=A(e)});function En(e){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?i:this.add(e-i,"d")}F("m",["mm",2],0,"minute");O("minute","m");V("minute",14);E("m",Y);E("mm",Y,ae);Z(["m","mm"],oe);var Cn=Le("Minutes",!1);F("s",["ss",2],0,"second");O("second","s");V("second",15);E("s",Y);E("ss",Y,ae);Z(["s","ss"],fe);var Sn=Le("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)});F(0,["SS",2],0,function(){return~~(this.millisecond()/10)});F(0,["SSS",3],0,"millisecond");F(0,["SSSS",4],0,function(){return this.millisecond()*10});F(0,["SSSSS",5],0,function(){return this.millisecond()*100});F(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});F(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});F(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});F(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});O("millisecond","ms");V("millisecond",16);E("S",mt,ja);E("SS",mt,ae);E("SSS",mt,Na);var Fe,Dr;for(Fe="SSSS";Fe.length<=9;Fe+="S")E(Fe,Re);function Fn(e,i){i[be]=A(("0."+e)*1e3)}for(Fe="S";Fe.length<=9;Fe+="S")Z(Fe,Fn);Dr=Le("Milliseconds",!1);F("z",0,0,"zoneAbbr");F("zz",0,0,"zoneName");function xn(){return this._isUTC?"UTC":""}function Mn(){return this._isUTC?"Coordinated Universal Time":""}var y=$e.prototype;y.add=fo;y.calendar=Fo;y.clone=xo;y.diff=Bo;y.endOf=Yo;y.format=_o;y.from=Lo;y.fromNow=Ro;y.to=Zo;y.toNow=jo;y.get=Ms;y.invalidAt=Qo;y.isAfter=Mo;y.isBefore=Po;y.isBetween=bo;y.isSame=Ho;y.isSameOrAfter=ko;y.isSameOrBefore=Ao;y.isValid=Ko;y.lang=ur;y.locale=cr;y.localeData=gr;y.max=$i;y.min=qi;y.parsingFlags=Jo;y.set=Ps;y.startOf=No;y.subtract=To;y.toArray=Xo;y.toObject=qo;y.toDate=Go;y.toISOString=Io;y.inspect=Wo;typeof Symbol<"u"&&Symbol.for!=null&&(y[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});y.toJSON=$o;y.toString=zo;y.unix=Uo;y.valueOf=wo;y.creationData=Oo;y.eraName=an;y.eraNarrow=rn;y.eraAbbr=sn;y.eraYear=on;y.year=Ka;y.isLeapYear=Xs;y.weekYear=gn;y.isoWeekYear=mn;y.quarter=y.quarters=yn;y.month=qa;y.daysInMonth=ws;y.week=y.weeks=Os;y.isoWeek=y.isoWeeks=Vs;y.weeksInYear=fn;y.weeksInWeekYear=Tn;y.isoWeeksInYear=pn;y.isoWeeksInISOWeekYear=vn;y.date=Tr;y.day=y.days=ui;y.weekday=gi;y.isoWeekday=mi;y.dayOfYear=En;y.hour=y.hours=Ei;y.minute=y.minutes=Cn;y.second=y.seconds=Sn;y.millisecond=y.milliseconds=Dr;y.utcOffset=ro;y.utc=io;y.local=oo;y.parseZone=no;y.hasAlignedHourOffset=lo;y.isDST=ho;y.isLocal=uo;y.isUtcOffset=go;y.isUtc=nr;y.isUTC=nr;y.zoneAbbr=xn;y.zoneName=Mn;y.dates=se("dates accessor is deprecated. Use date instead.",Tr);y.months=se("months accessor is deprecated. Use month instead",qa);y.years=se("years accessor is deprecated. Use year instead",Ka);y.zone=se("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",so);y.isDSTShifted=se("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",co);function Pn(e){return N(e*1e3)}function bn(){return N.apply(null,arguments).parseZone()}function yr(e){return e}var R=wt.prototype;R.calendar=us;R.longDateFormat=vs;R.invalidDate=Ts;R.ordinal=Es;R.preparse=yr;R.postformat=yr;R.relativeTime=Ss;R.pastFuture=Fs;R.set=hs;R.eras=Vo;R.erasParse=en;R.erasConvertYear=tn;R.erasAbbrRegex=ln;R.erasNameRegex=nn;R.erasNarrowRegex=dn;R.months=Zs;R.monthsShort=js;R.monthsParse=Ys;R.monthsRegex=Gs;R.monthsShortRegex=Us;R.week=$s;R.firstDayOfYear=Qs;R.firstDayOfWeek=Js;R.weekdays=ni;R.weekdaysMin=di;R.weekdaysShort=li;R.weekdaysParse=ci;R.weekdaysRegex=pi;R.weekdaysShortRegex=vi;R.weekdaysMinRegex=fi;R.isPM=Di;R.meridiem=Ci;function ht(e,i,n,h){var u=ye(),v=ue().set(h,i);return u[n](v,e)}function Er(e,i,n){if(De(e)&&(i=e,e=void 0),e=e||"",i!=null)return ht(e,i,n,"month");var h,u=[];for(h=0;h<12;h++)u[h]=ht(e,h,n,"month");return u}function ia(e,i,n,h){typeof e=="boolean"?(De(i)&&(n=i,i=void 0),i=i||""):(i=e,n=i,e=!1,De(i)&&(n=i,i=void 0),i=i||"");var u=ye(),v=e?u._week.dow:0,T,C=[];if(n!=null)return ht(i,(n+v)%7,h,"day");for(T=0;T<7;T++)C[T]=ht(i,(T+v)%7,h,"day");return C}function Hn(e,i){return Er(e,i,"months")}function kn(e,i){return Er(e,i,"monthsShort")}function An(e,i,n){return ia(e,i,n,"weekdays")}function Bn(e,i,n){return ia(e,i,n,"weekdaysShort")}function zn(e,i,n){return ia(e,i,n,"weekdaysMin")}xe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var i=e%10,n=A(e%100/10)===1?"th":i===1?"st":i===2?"nd":i===3?"rd":"th";return e+n}});D.lang=se("moment.lang is deprecated. Use moment.locale instead.",xe);D.langData=se("moment.langData is deprecated. Use moment.localeData instead.",ye);var me=Math.abs;function In(){var e=this._data;return this._milliseconds=me(this._milliseconds),this._days=me(this._days),this._months=me(this._months),e.milliseconds=me(e.milliseconds),e.seconds=me(e.seconds),e.minutes=me(e.minutes),e.hours=me(e.hours),e.months=me(e.months),e.years=me(e.years),this}function Cr(e,i,n,h){var u=de(i,n);return e._milliseconds+=h*u._milliseconds,e._days+=h*u._days,e._months+=h*u._months,e._bubble()}function Wn(e,i){return Cr(this,e,i,1)}function _n(e,i){return Cr(this,e,i,-1)}function Pa(e){return e<0?Math.floor(e):Math.ceil(e)}function Ln(){var e=this._milliseconds,i=this._days,n=this._months,h=this._data,u,v,T,C,P;return e>=0&&i>=0&&n>=0||e<=0&&i<=0&&n<=0||(e+=Pa(_t(n)+i)*864e5,i=0,n=0),h.milliseconds=e%1e3,u=re(e/1e3),h.seconds=u%60,v=re(u/60),h.minutes=v%60,T=re(v/60),h.hours=T%24,i+=re(T/24),P=re(Sr(i)),n+=P,i-=Pa(_t(P)),C=re(n/12),n%=12,h.days=i,h.months=n,h.years=C,this}function Sr(e){return e*4800/146097}function _t(e){return e*146097/4800}function Rn(e){if(!this.isValid())return NaN;var i,n,h=this._milliseconds;if(e=ie(e),e==="month"||e==="quarter"||e==="year")switch(i=this._days+h/864e5,n=this._months+Sr(i),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(i=this._days+Math.round(_t(this._months)),e){case"week":return i/7+h/6048e5;case"day":return i+h/864e5;case"hour":return i*24+h/36e5;case"minute":return i*1440+h/6e4;case"second":return i*86400+h/1e3;case"millisecond":return Math.floor(i*864e5)+h;default:throw new Error("Unknown unit "+e)}}function Zn(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+A(this._months/12)*31536e6:NaN}function Ee(e){return function(){return this.as(e)}}var jn=Ee("ms"),Nn=Ee("s"),Yn=Ee("m"),wn=Ee("h"),Un=Ee("d"),Gn=Ee("w"),Xn=Ee("M"),qn=Ee("Q"),$n=Ee("y");function Kn(){return de(this)}function Jn(e){return e=ie(e),this.isValid()?this[e+"s"]():NaN}function ke(e){return function(){return this.isValid()?this._data[e]:NaN}}var Qn=ke("milliseconds"),On=ke("seconds"),Vn=ke("minutes"),el=ke("hours"),tl=ke("days"),al=ke("months"),rl=ke("years");function sl(){return re(this.days()/7)}var pe=Math.round,ze={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function il(e,i,n,h,u){return u.relativeTime(i||1,!!n,e,h)}function ol(e,i,n,h){var u=de(e).abs(),v=pe(u.as("s")),T=pe(u.as("m")),C=pe(u.as("h")),P=pe(u.as("d")),b=pe(u.as("M")),k=pe(u.as("w")),I=pe(u.as("y")),W=v<=n.ss&&["s",v]||v<n.s&&["ss",v]||T<=1&&["m"]||T<n.m&&["mm",T]||C<=1&&["h"]||C<n.h&&["hh",C]||P<=1&&["d"]||P<n.d&&["dd",P];return n.w!=null&&(W=W||k<=1&&["w"]||k<n.w&&["ww",k]),W=W||b<=1&&["M"]||b<n.M&&["MM",b]||I<=1&&["y"]||["yy",I],W[2]=i,W[3]=+e>0,W[4]=h,il.apply(null,W)}function nl(e){return e===void 0?pe:typeof e=="function"?(pe=e,!0):!1}function ll(e,i){return ze[e]===void 0?!1:i===void 0?ze[e]:(ze[e]=i,e==="s"&&(ze.ss=i-1),!0)}function dl(e,i){if(!this.isValid())return this.localeData().invalidDate();var n=!1,h=ze,u,v;return typeof e=="object"&&(i=e,e=!1),typeof e=="boolean"&&(n=e),typeof i=="object"&&(h=Object.assign({},ze,i),i.s!=null&&i.ss==null&&(h.ss=i.s-1)),u=this.localeData(),v=ol(this,!n,h,u),n&&(v=u.pastFuture(+this,v)),u.postformat(v)}var bt=Math.abs;function Ae(e){return(e>0)-(e<0)||+e}function Ct(){if(!this.isValid())return this.localeData().invalidDate();var e=bt(this._milliseconds)/1e3,i=bt(this._days),n=bt(this._months),h,u,v,T,C=this.asSeconds(),P,b,k,I;return C?(h=re(e/60),u=re(h/60),e%=60,h%=60,v=re(n/12),n%=12,T=e?e.toFixed(3).replace(/\.?0+$/,""):"",P=C<0?"-":"",b=Ae(this._months)!==Ae(C)?"-":"",k=Ae(this._days)!==Ae(C)?"-":"",I=Ae(this._milliseconds)!==Ae(C)?"-":"",P+"P"+(v?b+v+"Y":"")+(n?b+n+"M":"")+(i?k+i+"D":"")+(u||h||e?"T":"")+(u?I+u+"H":"")+(h?I+h+"M":"")+(e?I+T+"S":"")):"P0D"}var z=yt.prototype;z.isValid=Vi;z.abs=In;z.add=Wn;z.subtract=_n;z.as=Rn;z.asMilliseconds=jn;z.asSeconds=Nn;z.asMinutes=Yn;z.asHours=wn;z.asDays=Un;z.asWeeks=Gn;z.asMonths=Xn;z.asQuarters=qn;z.asYears=$n;z.valueOf=Zn;z._bubble=Ln;z.clone=Kn;z.get=Jn;z.milliseconds=Qn;z.seconds=On;z.minutes=Vn;z.hours=el;z.days=tl;z.weeks=sl;z.months=al;z.years=rl;z.humanize=dl;z.toISOString=Ct;z.toString=Ct;z.toJSON=Ct;z.locale=cr;z.localeData=gr;z.toIsoString=se("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ct);z.lang=ur;F("X",0,0,"unix");F("x",0,0,"valueOf");E("x",vt);E("X",Hs);Z("X",function(e,i,n){n._d=new Date(parseFloat(e)*1e3)});Z("x",function(e,i,n){n._d=new Date(A(e))});//! moment.js
D.version="2.29.4";ls(N);D.fn=y;D.min=Ki;D.max=Ji;D.now=Qi;D.utc=ue;D.unix=Pn;D.months=Hn;D.isDate=qe;D.locale=xe;D.invalid=ct;D.duration=de;D.isMoment=le;D.weekdays=An;D.parseZone=bn;D.localeData=ye;D.isDuration=at;D.monthsShort=kn;D.weekdaysMin=zn;D.defineLocale=Qt;D.updateLocale=Mi;D.locales=Pi;D.weekdaysShort=Bn;D.normalizeUnits=ie;D.relativeTimeRounding=nl;D.relativeTimeThreshold=ll;D.calendarFormat=So;D.prototype=y;D.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var ba=["English","German","Russian","Hungarian","Swedish","Chinese","Italian","Japanese","Korean","Spanish","French","Arabic","Portuguese","Norwegian","Romanian"],et=["en","de","ru","hu","sv","zh-cn","it","ja","ko","es","fr","ar","pt-br","nb","ro"],Ht=[["4 months","4 Monate","4 месяца","4 hónap","4 månader","4个月","4 mesi","4ヶ月","4개월","4 meses","Quatre mois","4 أشهر","4 meses","4 måneder","4 luni"],["4 Years","4 Jahre","4 года","4 év","4 år","4年","4 anni","4年","4년","4 años","Quatre ans","4 سنوات","4 anos","4 År","4 Ani"],["About","Über","О приложении","Magunkról","Om","关于","Info su","製品について","정보","Acerca de","À propos","حول","Sobre","Om","Despre noi"],["All","Alles","Все","Mind","Alla","所有","Tutto","すべての","전부","Todos","Tout","جميع","Tudo","Alle","Toate"],["Auto","Automatische Zeitzone","Автоматически","Auto","Auto","自动","Fuso orario automatico","オート","자동","Automático","Auto","تلقائي","Automático","Auto","Auto"],["Back","Zurück","Назад","Vissza","Tillbaka","返回","Indietro","戻る","뒤로","Volver","Retour","العودة","Voltar","Tilbake","Înapoi"],["Calendar","Kalender","Календарь","Naptár","Kalender","日历","Calendario","カレンダー","캘린더","Calendario","Agenda","التقويم","Calendário","Kalender","Calendar"],["Calendars","Kalender","Календари","Naptárak","Kalendrar","日历","Calendari","カレンダー","캘린더","Calendarios","Agendas","التقويمات","Calendários","Kalendere","Calendare"],["Cancel","Abbrechen","Отмена","Mégsem","Avbryt","取消","Annulla","キャンセル","취소","Cancelar","Annuler","إلغاء","Cancelar","Avbryt","Anulare"],["Color picker?","Farbwähler?","Выбор цвета?","Színválasztó?","Färgväljare?","选色器？","Color Picker?","カラーピッカー？","색상 선택기?","¿Selector de color?","Pipette à couleurs?","إنتقاء اللون؟","seletor de cores?","Fargevelger?","Selector de culoare?"],["Connect Google calendar","Mit Google Calendar verbinden","Подключить Google Календарь","Google Naptár csatlakoztatása","Logga in med Google","连接Google日历","Connetti a Google Calendar","Googleカレンダーを接続","구글 캘린더 연결하기","Connectar Google Calendar","Connecter Google Agenda","الاتصال بتقويم جوجل","Conectar calendário com o Google","Kople til Google kalender","Conectează cu Google Calendar"],["Connection failed","Verbindung fehlgeschlagen","Соединение не удалось","Sikertelen kapcsolódás","Anslutningen misslyckades","连接失败","Connessione fallita","接続に失敗しました","연결 실패","La conexión ha fallado","La connexion a échoué","فشل الاتصال","Falha na conexão","Forbindelse feilet","Conexiune eșuată"],["Data amount (startup speed)","Datenmenge (Startgeschwindigkeit)","Объём данных (скорость запуска)","Adatmennyiség (betöltési idõ)","Datamängd (starthastighet)","数据量（启动速度）","Sincronizza dati (velocità startup)","データ量 (スタートアップ速度)","데어터 량 (시작 속도)","Cantidad de datos (velocidad de inicio)","Quantité de données (vitesse de démarrage)","كمية البيانات (سرعة بدء التشغيل)","Quantidade de dados (velocidade de inicialização)","Datamengde (oppstartshastighet)","Cantitatea de date (viteza de pornire)"],["Day","Tag","День","Nap","Dag","日","Giorno","日","일","Día","Jour","يوم","Dia","Dag","Zi"],["Delete the whole series","Komplette Eventserie löschen","Удалить всю серию событий","Az összes esemény törlése","Radera hela serien","删除整个系列","Eliminare l'intera serie","シリーズすべてを削除する","전체 시리즈 삭제","Eliminar toda la serie","Supprimer toute la série","حذف السلسلة بأكملها","Excluir toda a série","Slett hele serien","Șterge întreaga serie"],["Delete this and future events","Diesen und zukünftige Events löschen","Удалить это и будущие события","Jelen és az összes jövõbeli esemény törlése","Radera detta och framtida händelser","删除这个事件和未来事件","Eliminare questo e gli eventi futuri","これと将来のイベントを削除する","이 이벤트 및 향후 이벤트 삭제","Eliminar este y eventos futuros","Supprimer cet événement et les événements futurs","حذف هذا الحدث والأحداث المستقبلية","Excluir este e futuros eventos","Slett denne og fremtidige hendelser","Șterge acest eveniment și pe cele viitoare"],["Delete?","Löschen?","Удалить?","Törlés?","Radera?","删除？","Eliminare?","削除しますか?","삭제하시겠습니까?","¿Eliminar","Effacer ?","هل تريد الحذف؟","Excluir?","Slette?","Șterge?"],["Details","Details","Детали","Részletek","Detaljer","详情","Dettagli","詳細","세부 정보","Detalles","Détails","التفاصيل","Detalhes","Detaljer","Detalii"],["Disconnect from Google","Verbindung zu Google aufheben","Отключиться от Google","Google kapcsolat megszûntetése","Logga ur Google","取消与Google的连接","Disconnetti da Google","Googleから切断","구글 연결 끊기","Desconectar de Google","Se déconnecter de Google","قطع الاتصال عن جوجل","Desconectar do Google","Kople fra Google","Deconectează de la Google"],["Drag me","Lass los ","Бремя ","Húzz oda","Dra","拖动 ","Lasciami","견인 ","","Arrastrar ","Traînée ","سحب ","Arrastar","Dra meg ","Trage-ma "],["Edit the whole series","Komplette Eventserie bearbeiten","Редактировать всю серию событий","Az összes esemény módosítása","Redigera hela serien","编辑整个系列","Madificare l'intera serie","シリーズすべてを編集","전체 시리즈 편집","Editar toda la serie","Modifier toute la série","تعديل السلسلة بأكملها","Editar toda a série","Rediger hele serien","Editează întreaga serie"],["Edit this and future events","Diesen und zukünftige Events bearbeiten","Редактировать это и будущие события","Jelen és az összes jövõbeli esemény módosítása","Redigera detta och framtida händelser","编辑这个事件和未来事件","Modifica questo e gli eventi futuri","これと将来のイベントを編集する","이 이벤트 및 향후 이벤트 편집","Editar este y eventos futuros","Modifier cet événement et les événements futurs","تعديل هذا الحدث والأحداث المستقبلية","Editar este e futuros eventos","Rediger denne og fremtidige hendelser","Editează acest eveniment și pe cele viitoare"],["Edit","Bearbeiten","Редактировать","Módosítás","Redigera","编辑","Modifica","編集","편집","Editar","Modifier","تعديل","Editar","Rediger","Editează"],["End before a date","Beenden vor einem bestimmten Datum","Окончание до указанной даты","Meghatározott dátumig","Avsluta före ett visst datum","在某个日期前结束","Fine prima di una data","以前に終わり","해당 날짜 전에 종료","Terminar antes de una fecha","Se termine avant une date","الانتهاء قبل موعد","Finalizar antes de uma data","Slutt før en dato","Încheie înainte de o dată"],["End before","Beenden vor","Окончание до","Ismétlõdés vége","Avsluta före","在...之前结束","Finire prima","以前に終わり","전에 종료","Terminar antes de","Se termine avant","الانتهاء قبل","Finalizar antes de","Slutt før","Încheie înainte de"],["End","Ende","Окончание","Végzõdés","Slut","结束","Fine","終わり","종료","Terminar","Fin","انتهاء","Finalizar","Slutt","Încheie"],["Error","Fehler","Ошибка","Hiba","Fel","错误","Errore","エラー","에러","Error","Erreur","خطأ","Erro","Feil","Eroare"],["Every X day(s)","Jeden X Tag(e)","Каждые X дней","Minden X-edik napon","Varje X dag(ar)","每隔X天","Ogni X giorno(i)","X日ごと","X일마다","Cada X día(s)","Tous les X jour(s)","كل X يوم (أيام)","A cada X dia(s)","Hver X dag(er)","La fiecare X zile"],["Every X month(s)","Jeden X Monat(e)","Каждые X месяцев","Minden X-edik hónapban","Varje X månad(er)","每隔X月","Ogni X mese(i)","Xヶ月ごと","X개월마다","Cada X mes(es)","Tous les X mois","كل X شهر (شهور)","A cada X mês(es)","Hver X måned(er)","La fiecare X luni"],["Every X week(s)","Jede X Woche(n)","Каждые X недель","Minden X-edik héten","Varje X vecka/veckor","每隔X周","Ogni X settimana(e)","X週間ごと","X주마다","Cada X semana(s)","Toutes les X semaine(s)","كل X أسبوع (أسابيع)","A cada X semana(s)","Hver X uke(r)","La fiecare X săptămâni"],["Every X year(s)","Jede(s) X Jahr(e)","Каждые X лет","Minden X-edik évben","Varje X år","每隔X年","Ogni X anno(i)","X年ごと","X년마다","Cada X año(s)","Tous les X an(s)","كل X سنة (سنين)","A cada X ano(s)","Hver X År","La fiecare X ani"],["First day of week","Erster Tag in der Woche","Первый день недели","A hét elsõ napja","Första dagen i veckan","每周第一天","Primo giorno della settimana","週の最初の日","일주일의 첫 날","Primer día de la semana","Premier jour de la semaine","اليوم الأول من الأسبوع","Primeiro dia da semana","Første ukedag","În prima zi a săptămânii"],["Forever","Für immer","Бесконечно","Örökké","För alltid","永远","Per sempre","永遠","영원히","Para siempre","Pour toujours","مدى الحياة","Para sempre","For alltid","Pentru totdeauna"],["Frequency","Wiederholung","Частота повторений","Ismétlõdés","Frekvens","频率","Frequenza","頻度","횟수","Frecuencia","Fréquence","تردد","Frequência","Frekvens","Frecvență"],["Gray days","Graue Tage","Дни серого цвета","Szürke napok","Gråa dagar","阴天","Giorni grigi","グレーの日","회색 일자","Días grises","Jours gris","الأيام الرمادية","Dias cinzas","Lørdager","Zile marcate cu gri"],["Hold CTRL/CMD while clicking on the reminders you want.","Halte CTRL/CMD während du auf einen Event clickst.","Удерживая CTRL/CMD, щёлкните по требуемым напоминаниям","Nyomd le a CTRL/CMD gombot az emlékeztetõk kiválasztásához.","Håll ner CTRL/CMD och klicka på önskade påminnelser.","按住CTRL/CMD键，同时点击你要选择的提醒。","Tieni premuto CTRL/CMD mentre clicchi sui promemoria che desideri","ご希望のリマインダーをクリックしながら、CTRL/CMDを長押ししてください。","원하는 알림을 클릭하면서 CTRL/CMD를 누르세요.","Mantén presionado CTRL/CMD al hacer clic en los recordatorios que deseas.","Maintenez CTRL / CMD en cliquant sur les rappels que vous voulez.","اضغط باستمرار على CTRL / CMD أثناء النقر على التذكيرات التي تريدها.","Aperte CTRL/CMD enquanto clica nos lembretes que deseja.","Hold CTRL/CMD nede mens du klikker på påminnelsen du ønsker.","Ține apăsat CTRL/CMD în timp ce apeși pe mementourile dorite"],["Invited","Eingeladen","Участники","Meghívottak","Inbjuden","已邀请","Invitato","招待された","초대됨","Invitado","Invité","تم دعوته","Convidado","Invitert","Invitat"],["Language","Sprache","Язык","Nyelv","Språk:","语言","Lingua","言語","언어","Idioma","Langue","اللغة","Idioma","Språk","Limbă"],["Mixed English","Mixed Englisch","Английский","Angol (vegyes)","Blandad engelska:","混合式英语","Inglese mischiato","ミックスされた英語","혼합 영어","Mixto Inglés","Anglais mixte","الإنجليزية المختلطة","Inglês misto","Blandet Engelsk","Engleză mixtă"],["Month","Monat","Месяц","Hónap","Månad","月","Mese","月","개월","Mes","Mois","شهر","Mês","Måned","Lună"],["More themes?","Mehr Themen?","Другие темы?","További témák?","Fler teman?","更多主题？","Altri temi?","その他のテーマ？","더 많은 테마?","Más temas?","Plus de thèmes?","مزيد من الموضوعات؟","Mais temas?","Flere temaer?","Mai multe teme?"],["Move","Verschieben","Переместить","Mozgatás","Flytta","移动","Sposta","移動させる","이동","Mover","Déplacer","انتقال","Mover","Flytt","Mută"],["NO (Press to add)","Keine (tippen um hinzuzufügen) ","Никто ","Egyik sem ","Nej (Tryck för att lägga till)","没有","Nessuna (premi per aggiungere)","なし ","없음 ","Ninguna ","Aucun ","لا شيء ","Nenhum ","None","Nici unul "],["Not repeated","Ohne Wiederholung","Не повторяется","Nem ismétlõdõ","Upprepas ej","不重复","Senza ripetizione","繰り返されない","반복 없음","No repetido","Non répété","لا تتكرر","Não repetido","Ikke gjentatt","Nu e repetat"],["Ok","OK","OK","Ok","Ok","好","OK","分かりました","Ok","Aceptar","D'accord","موافق","Ok","Ok","Ok"],["On %1, week %2 of each month","Am %1, die %2 Woche im Monat","Каждый %1 %2-й недели месяца","%1, minden hónap %2. hetében","På %1, vecka %2 i varje månad","在每月的第%2周第%1天","Ogni %1 della %2 settimana del mese","毎月%2週の%1に","매달 %2주 %1에","En día %1, semana %2 de cada mes","Le %1, semaine %2 de chaque mois","على%1 ،%2 أسبوع من كل شهر","Em %1, semana %2 de cada mês","På %1, uke %2 i hver måned","La 1%, săptămânal 2% în fiecare lună"],["On day %1 of each month","Am %1 Tag im Monat","%1 число каждого месяца","Minden hónap %1. napján","På dag %1 i varje månad","在每月的第%1天","Ogni %1 giorno della settimana","毎月%1日に","매달 %1일에","En el día %1 de cada mes","Le %1 de chaque mois","في يوم %1 من كل شهر","No dia %1 de cada mês","På dag %1 i hver måned","Pe zi 1% din fiecare lună"],["Only delete this event","Lösche nur diesen Event","Удалить только это событие","Csak a jelen esemény törlése","Radera endast denna händelse","只删除这个事件","Elimina solo questo evento","このイベントだけを削除する","이 이벤트만 삭제","Solo eliminar este evento","Supprimer cet événement uniquement","حذف هذا الحدث فقط","Excluir apenas este evento","Slett bare denne hendelsen","Doar șterge acest eveniment"],["Only edit this event","Bearbeite nur diesen Event","Редактировать только это событие","Csak a jelen esemény szerkesztése","Redigera endast denna händelse","只编辑这个事件","Modifica solo questo evento","このイベントだけを編集する","이 이벤트만 편집","Solo editar este evento","Modifier cet événement uniquement","تعديل هذا الحدث فقط","Editar apenas este evento","Rediger bare denne hendelsen","Doar editează acest eveniment"],["Recurrence","Wiederholung","Повторяющееся событие","Ismétlõdés","Upprepning","循环","Ricorrenza","繰り返し","반복","Recurrencia","Récurrence","تكرار","Recorrência","Gjentakelse","Repetare"],["Refresh","Auffrischen","Обновить","Frissítés","Uppdatera","刷新","Aggiorna","更新","새로 고침","Recargar","Rafraîchir","إعادة تحميل","Atualizar","Oppfrisk","Actualizăează"],["Reminders","Errinerung","Напоминания","Emlékeztetõk","Påminnelser","提醒","Promemoria","リマインダー","알림","Recordatorios","Rappels","التذكيرات","Lembretes","Påminnelser","Mementouri"],["Repeat X times","Wiederhole X mal","Повторить X раз","Ismétlõdés X alkalommal","Upprepa X gånger","重复X次","Ripeti X volte","X回くりかえす","X번 반복","Repetir X veces","Répéter X fois","تكرار عدد X من المرات","Repetir X vezes","Gjenta X ganger","Repetă de X ori"],["Settings","Einstellungen","Настройки","Beállítások","Inställningar","设置","Impostazioni","設定","설정","Ajustes","Paramètres","إعدادات","Configurações","Innstillinger","Setări"],["Shop","Geschäft","Магазин","Üzlet","Affär","店","Negozio","ショップ","가게","Tienda","Boutique","متجر","Loja","Butikk","Magazin"],["Show demo calendar","Zeige Demo Kalender","Показать демонстрационный календарь","Demo naptár mutatása","Visa demo-kalender","显示日历示例","Mostra calendario demo","デモカレンダーを表示する","데모 캘린더 보기","Mostrar calendario de demostración","Afficher l’agenda de démonstration","عرض التقويم التجريبي","Mostrar calendário demo","Vis demo kalender","Arată calendarul demo"],["Show week numbers","Zeige Wochennummern","Показывать номера недель","Hetek sorszámának megjelenítése","Visa veckonummer","显示周数","Mostra numeri di settimana","週の番号を表示する","주 번호 보기","Mostrar números de semana","Afficher les numéros de semaine","عرض أعداد الأسابيع","Mostrar números da semana","Vis ukenummer","Arată numărul săptămânilor"],["Sorry, this event can't be edited","Event kann nicht bearbeitet werden","К сожалению, это событие не редактируемо","Sajnálom, ez az esemény nem szerkeszthetõ","Tyvärr, denna händelse kan ej redigeras","对不起，无法编辑这个事件","Non puoi modificare questo evento","申し訳ございません。このイベントは編集できません","죄송합니다. 이 이벤트는 편집할 수 없습니다","Lo sentimos, este evento no se puede editar","Désolé, cet événement ne peut pas être modifié","عذراً، لا يمكن تعديل هذا الحدث","Desculpe, este evento não pode ser editado","Beklager, denne hendelsen kan ikke redigeres","Scuze, acest eveniment nu poate fi editat"],["Start","Anfang","Начало","Kezdés","Start","开始","Inizio","開始","시작하기","Inicio","Démarrer","بداية","Começar","Start","Start"],["Theme","Thema","тема","Téma","Tema","主题","Tema","テーマ","테마","Tema","Thème","موضوع","Tema","Tema","Temă"],["Time zone","Zeitzone","Часовой пояс","Idõzóna","Tidszon","时区","Fuso orario","タイムゾーン","시간대","Zona horaria","Fuseau horaire","منطقة زمنية","Fuso horário","Tidssone","Fus Orar"],["Title","Titel","Название","Cím","Titel","标题","Titolo","タイトル","제목","Título","Titre","عنوان","Título","Tittel","Titlu"],["Type","Typ","Тип","Típus","Typ","类型","Tipo","タイプ","유형","Tipo","Type","نوع","Tipo","Type","Tip"],["Use 24-hour format","24 Stunden Format","Использовать 24-часовой формат","24 órás formátum használata","Använd 24-timmarssystem","使用24小时格式","Usa formato 24h","24時間フォーマットを使用する","24시간 형식","Usar formato de 24 horas","Utiliser le format 24 heures","استخدام تنسيق 24 ساعة","Usar formato de 24 horas","Bruk 24-timers format","Folosește format de 24 de ore"],["Week days","WOchentage","Дни недели","Ismétlõdés ezen a napon","Veckodagar","周间","Giorni in settimana","曜日","1주일","Entre semana","Jours de la semaine","أيام الأسبوع","Dias da semana","Ukedager","Zilele săptămânii"],["Week","Woche","Неделя","Hét","Vecka","周","Settimana","週","주","Semana","Semaine","أسبوع","Semana","Uke","Săptămână"],["When","Wann","Время","Mikor","När","何时","Quando","いつ","일시","Cuándo","Quand","متى","Quando","Når","Când"],["Where","Wo","Место","Hol","Var","何地","Dove","どこで","장소","Dónde","Où","أين","Onde","Hvor","Unde"],["Year","Jahr","Год","Év","År","年","Anno","年","년","Año","Année","سنة","Ano","År","An"],["Not possible","Nicht möglich","Невозможно","Nem lehetséges","Inte möjligt","不可能","Non possibile","ありえない","수 없음","Imposible","Pas possible","غير ممكن","Não é possivel","Umulig ","nu este posibil "]],q;(e=>{class i{constructor(t=[]){this.calendarEvents=t}dateTimeReviver(t,r){return typeof r=="string"&&t.length>4&&(t.substr(t.length-4)==="Date"||t.substr(t.length-4)==="Time")?new Date(r):r}localStorageSetItem(t,r){try{localStorage.setItem(t,r)}catch{}}}e.LocalStorage=i;class n extends i{constructor(){super(),this.cachedTimeZoneDiffInMinutes=void 0,this.cachedGrayDays=void 0,this.cachedSavedCalendarColors=void 0,this.cachedFirstDayOfWeek=void 0,this.defaultUseWeek=!1,this.defaultUse24hFormat=!1,this.theme="0"}get calendarIdLastAddedTo(){try{var t=localStorage.getItem("oneview_settings_lastCalendarId");if(t!=null)return JSON.parse(t)}catch{}}set calendarIdLastAddedTo(t){this.localStorageSetItem("oneview_settings_lastCalendarId",JSON.stringify(t))}get hasShownRemindersInfo(){return this.getBoolean("oneview_settings_hasShownRemindersInfo",!1)}set hasShownRemindersInfo(t){this.localStorageSetItem("oneview_settings_hasShownRemindersInfo",JSON.stringify(t))}getDefaultUse24hFormat(){return this.defaultUse24hFormat!==void 0&&this.defaultUse24hFormat!==null?this.defaultUse24hFormat:this.defaultUse24hFormat=!(0<D().format("LT").indexOf(D().format("A"))&&0<D().format("A").length)}getDefaultUseWeek(){if(this.defaultUseWeek!==void 0&&this.defaultUseWeek!==null)return this.defaultUseWeek;var t="AT AX BE CH CZ DE DK EE ES EU FI FO FR GB GL GR IE IM IS IT LI LU LV NL NO PL PT SE SJ".split(" ");this.defaultUseWeek=!1;for(var r=0;r<t.length;r++)-1<navigator.language.toUpperCase().indexOf(t[r])&&(this.defaultUseWeek=!0);return this.defaultUseWeek}get showWeekNumbers(){return this.getBoolean("oneview_settings_showWeekNumbers",this.getDefaultUseWeek())}set showWeekNumbers(t){this.localStorageSetItem("oneview_settings_showWeekNumbers",JSON.stringify(t))}get use24hFormat(){return this.getBoolean("oneview_settings_use24hFormat",this.getDefaultUse24hFormat())}set use24hFormat(t){this.localStorageSetItem("oneview_settings_use24hFormat",JSON.stringify(t))}get timeZoneForSettingsPage(){return this.getString("oneview_settings_timeZone","-")}set timeZoneForSettingsPage(t){this.cachedTimeZoneDiffInMinutes=void 0,this.localStorageSetItem("oneview_settings_timeZone",JSON.stringify(t))}get dataAmountToLoad(){return this.getNumber("oneview_settings_dataAmountToLoad",48,!1)}set dataAmountToLoad(t){this.localStorageSetItem("oneview_settings_dataAmountToLoad",JSON.stringify(t))}get language(){var t;return t=D.locale(),e.Translate.languageExists(t)||(t="-"),this.getString("oneview_settings_language",t)}set language(t){this.localStorageSetItem("oneview_settings_language",JSON.stringify(t)),this.updateAppWithLang()}updateAppWithLang(){var t=this.language;(t===""||t=="-")&&(t=navigator.language),D.locale(t),e.core.translate=new e.Translate(t),e.core.helper.monthesShort=new e.Hashtable,e.core.helper.monthesLong=new e.Hashtable,e.core.helper.weekdayShort=new e.Hashtable,e.core.helper.weekdayLong=new e.Hashtable}get licenseDarkTheme(){return this.getBoolean("oneview_settings_licenceDarkTheme",!1)}set licenseDarkTheme(t){this.localStorageSetItem("oneview_settings_licenceDarkTheme",JSON.stringify(t))}get licenseCandyTheme(){return this.getBoolean("oneview_settings_licenceCandyTheme",!1)}set licenseCandyTheme(t){this.localStorageSetItem("oneview_settings_licenceCandyTheme",JSON.stringify(t))}get licenseColorPicker(){return this.getBoolean("oneview_settings_licenceColorPicker",!1)}set licenseColorPicker(t){this.localStorageSetItem("oneview_settings_licenceColorPicker",JSON.stringify(t))}get firstDayOfWeek(){if(this.cachedFirstDayOfWeek==null){var t=D().startOf("week").isoWeekday();this.cachedFirstDayOfWeek=this.correctWeekDayNumber(Number(this.getString("oneview_settings_firstDayOfWeek",""+t)))}return this.cachedFirstDayOfWeek}set firstDayOfWeek(t){this.cachedFirstDayOfWeek=void 0,this.localStorageSetItem("oneview_settings_firstDayOfWeek",JSON.stringify(this.correctWeekDayNumber(t)))}get savedCalendarColors(){if(this.cachedSavedCalendarColors==null){var t=JSON.stringify(new e.Dictionary);this.cachedSavedCalendarColors=new e.Dictionary,t=JSON.parse(this.getObjectData("oneview_saved_calendar_colors",""+t)),this.cachedSavedCalendarColors.setup(t._keys,t._values)}return this.cachedSavedCalendarColors}set savedCalendarColors(t){this.cachedSavedCalendarColors=void 0,e.syncArrays(),this.localStorageSetItem("oneview_saved_calendar_colors",JSON.stringify(t))}get grayDays(){return this.cachedGrayDays==null&&(this.cachedGrayDays=(this.getString("oneview_settings_grayDays","67")+"").replace("0","7")),this.cachedGrayDays}set grayDays(t){this.cachedGrayDays=void 0,this.localStorageSetItem("oneview_settings_grayDays",JSON.stringify(t.replace("0","7")))}getCachedTimeZoneDiffInMinutes(){if(this.cachedTimeZoneDiffInMinutes==null){var t=this.timeZoneForSettingsPage;return t==null||t=="-"?0:60*Number(t)+new Date().getTimezoneOffset()}return this.cachedTimeZoneDiffInMinutes}getBoolean(t,r){try{var s=localStorage.getItem(t);return s!=null?JSON.parse(s):r}catch{return r}}getObjectData(t,r){try{var s=localStorage.getItem(t);return s??r}catch{return r}}getString(t,r){try{var s=localStorage.getItem(t);return s!=null?JSON.parse(s):r}catch{return r}}getNumber(t,r,s){try{return t=localStorage.getItem(t),t!=null&&(t=JSON.parse(t)),t!=null&&(s||t!=0)?t:r}catch{return r}}correctWeekDayNumber(t){for(;1>t;)t+=7;for(;7<t;)t-=7;return t}}e.CommonUserSettings=n;class h{constructor(){this.previousFont="",this.canvasCache=new e.SpeedCache}debugText(t){e.core.zopDrawArea.canvasContext.fillStyle="#FF0000",this.setFont(20),e.core.zopDrawArea.canvasContext.fillText(t,5,30)}drawIcon(t,r,s,o,l){}loadIcon(t,r,s,o,l,c){this.drawPicture(r,s,o,l,c),this.loadingIconNames.splice(this.loadingIconNames.indexOf(t),1),this.loadedIconNames||(this.loadedIconNames=[]),this.loadedIcons||(this.loadedIcons=[]),this.loadedIconNames.push(t),this.loadedIcons.push(r)}drawLoader(t){var r=Math.min(e.core.zopDrawArea.zopAreaWidth,e.core.zopDrawArea.zopAreaHeight)/32,s=e.core.zopDrawArea.zopAreaWidth/2,o=e.core.zopDrawArea.zopAreaHeight/2;e.core.zopDrawArea.canvasContext.strokeStyle=e.core.settings.theme.colorDark,e.core.zopDrawArea.canvasContext.lineWidth=Math.max(r/2,r/6+12),e.core.zopDrawArea.canvasContext.lineCap="butt",e.core.zopDrawArea.canvasContext.beginPath(),e.core.zopDrawArea.canvasContext.arc(s,o,r,t,t+2.5),e.core.zopDrawArea.canvasContext.stroke()}drawPicture(t,r,s,o,l){r=Math.floor(r),s=Math.floor(s),o=Math.floor(o),l=Math.floor(l),e.core.zopDrawArea.canvasContext.drawImage(t,r,s,o,l)}drawPictureWithOffset(t,r,s,o,l,c,p){r=Math.floor(r),s=Math.floor(s),o=Math.floor(o),l=Math.floor(l),e.core.zopDrawArea.canvasContext.drawImage(t,c,p,o,l,r,s,o,l)}drawFilledRectangle({x:t,y:r,width:s,height:o,fillStyle:l,hasShadow:c,rounded:p,strokeStyle:f}){e.core.zopDrawArea.setShadow(c);const g=e.core.zopDrawArea.canvasContext;g.fillStyle=l,p?(g.beginPath(),g.roundRect(Math.floor(t),Math.floor(r),Math.floor(s),Math.floor(o),15),g.fill()):(g.fillRect(Math.floor(t),Math.floor(r),Math.floor(s),Math.floor(o)),f&&(g.strokeStyle=f,g.strokeRect(Math.floor(t),Math.floor(r),Math.floor(s),Math.floor(o)))),e.core.zopDrawArea.removeShadow(c)}setFont(t,r,s,o){r===void 0&&(r=!1),s===void 0&&(s=!1),o===void 0&&(o=!1),r?(r=t+"px "+e.core.settings.theme.titleBarFont,o&&(r=t+"px "+e.core.settings.theme.titleBarFontBold),s&&(r=t+"px "+e.core.settings.theme.textFont)):r=o?t+"px "+e.core.settings.theme.textFontBold:s?t+"px "+e.core.settings.theme.textFontThin:t+"px "+e.core.settings.theme.textFont,e.core.zopDrawArea.canvasContext.font!==r&&(e.core.zopDrawArea.canvasContext.font=r)}drawTriangle(t,r,s,o,l,c,p,f){e.core.zopDrawArea.setShadow(f),o=r+o,c=r+c,e.core.zopDrawArea.canvasContext.fillStyle=p,e.core.zopDrawArea.canvasContext.beginPath(),e.core.zopDrawArea.canvasContext.moveTo(t,r),e.core.zopDrawArea.canvasContext.lineTo(t+s,o),e.core.zopDrawArea.canvasContext.lineTo(t+l,c),e.core.zopDrawArea.canvasContext.closePath(),e.core.zopDrawArea.canvasContext.fill(),e.core.zopDrawArea.removeShadow(f)}drawLine2(t,r,s,o,l,c,p){this.drawLine(t,r,s-t,o-r,l,c,p)}startLines(t,r,s,o){e.core.zopDrawArea.canvasContext.beginPath(),e.core.zopDrawArea.canvasContext.lineWidth=s,e.core.zopDrawArea.canvasContext.moveTo(t,r),e.core.zopDrawArea.canvasContext.strokeStyle=o,e.core.zopDrawArea.canvasContext.lineCap="round",e.core.zopDrawArea.canvasContext.lineJoin="round"}continueLines(t,r){e.core.zopDrawArea.canvasContext.lineTo(t,r)}endLines(){e.core.zopDrawArea.canvasContext.stroke()}drawLine(t,r,s,o,l,c,p){e.core.zopDrawArea.setShadow(p),o=r+o,e.core.zopDrawArea.canvasContext.beginPath(),e.core.zopDrawArea.canvasContext.lineCap="square",e.core.zopDrawArea.canvasContext.lineWidth=l,e.core.zopDrawArea.canvasContext.moveTo(t,r),e.core.zopDrawArea.canvasContext.lineTo(t+s,o),e.core.zopDrawArea.canvasContext.strokeStyle=c,e.core.zopDrawArea.canvasContext.stroke(),e.core.zopDrawArea.removeShadow(p)}drawHorizontalLineNotZOP(t,r,s,o,l,c){e.core.zopDrawArea.setShadow(c),r=Math.floor(r),e.core.zopDrawArea.canvasContext.beginPath(),e.core.zopDrawArea.canvasContext.lineWidth=l,e.core.zopDrawArea.canvasContext.lineCap="square",e.core.zopDrawArea.canvasContext.moveTo(t,r),e.core.zopDrawArea.canvasContext.lineTo(t+s,r),e.core.zopDrawArea.canvasContext.strokeStyle=o,e.core.zopDrawArea.canvasContext.stroke(),e.core.zopDrawArea.removeShadow(c)}drawVerticalLineNotZOP(t,r,s,o,l){t=Math.floor(t)+.5,e.core.zopDrawArea.canvasContext.beginPath(),e.core.zopDrawArea.canvasContext.lineWidth=l,e.core.zopDrawArea.canvasContext.lineCap="square",e.core.zopDrawArea.canvasContext.moveTo(t,r),e.core.zopDrawArea.canvasContext.lineTo(t,s),e.core.zopDrawArea.canvasContext.strokeStyle=o,e.core.zopDrawArea.canvasContext.stroke()}drawCenteredText(t,r,s,o,l,c,p,f,g){for(g===void 0&&(g=!1),p=Math.max(0,(o-e.core.zopDrawArea.measureTextWidth(t,l,f,!1))/2);e.core.zopDrawArea.measureTextWidth(t,l,f,!1)>o;)t=t.substring(0,t.length-1);e.core.drawArea.drawText(t,r+p,s,l,c,!1,f,g,!1)}startNewRound(){this.canvasCache.startNewRound()}drawText(t,r,s,o,l,c,p,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.setFont(o,p,f,g),e.core.zopDrawArea.canvasContext.fillStyle=l,e.core.zopDrawArea.canvasContext.fillText(t,Math.floor(r)+.45,Math.floor(s+o)+.45)}}e.DrawArea=h;class u{constructor(){this.preparingScrollCounter=0,this.previousScrollSpeed=0,this.scrollSpeed=0,this.speedSlowDown=.013,this.azTopZOPSpeed=0,this.azBottomZOPSpeed=0,this.azTopZOPSpeed_Linear=0,this.azBottomZOPSpeed_Linear=0,this.azLastZoomTime=0,this.azRunning=!1,this.azCallBack=()=>{}}startAutoZoom(t,r,s,o){this.azGoalTopZOP=t,this.azGoalBottomZOP=r,this.speedModifier=(this.megaSlowZoom=s)?4e6:6e3,this.azTopZOPSpeed=this.getAzTopZopSpeed(),this.azBottomZOPSpeed=this.getAzBottomZopSpeed(),this.azTopZOPSpeed_Linear=this.azGoalTopZOP>e.core.zopHandler.topZOP?this.azTopZOPSpeed/2e3:this.azTopZOPSpeed/20,this.azBottomZOPSpeed_Linear=this.azGoalBottomZOP<e.core.zopHandler.bottomZOP?this.azBottomZOPSpeed/3e3:this.azBottomZOPSpeed/20,this.azLastZoomTime=e.core.getTimeStamp(),this.azRunning=!0,this.azCallBack=o,e.core.redraw(!1)}runAutoZoom(){if(!this.azRunning)return!1;var t=e.core.getTimeStamp()-this.azLastZoomTime;if(t===0)return!1;var r=e.core.zopHandler.topZOP+this.azTopZOPSpeed*t;return(0<=this.azTopZOPSpeed&&r>this.azGoalTopZOP||0>this.azTopZOPSpeed&&r<this.azGoalTopZOP)&&(r=this.azGoalTopZOP,this.azTopZOPSpeed=0),t=e.core.zopHandler.bottomZOP+this.azBottomZOPSpeed*t,(0<=this.azBottomZOPSpeed&&t>this.azGoalBottomZOP||0>this.azBottomZOPSpeed&&t<this.azGoalBottomZOP)&&(t=this.azGoalBottomZOP,this.azBottomZOPSpeed=0),e.core.zopHandler.setZoom(r,t,e.core.zopHandler.topPixel,e.core.zopHandler.bottomPixel),this.azTopZOPSpeed==0&&this.azBottomZOPSpeed==0?(this.stopAutoZoom(),!1):(this.megaSlowZoom?(this.azTopZOPSpeed=this.getAzTopZopSpeed()/2,this.azBottomZOPSpeed=this.getAzBottomZopSpeed()/2):(this.azTopZOPSpeed=(this.getAzTopZopSpeed()+this.azTopZOPSpeed_Linear)/2,this.azBottomZOPSpeed=(this.getAzBottomZopSpeed()+this.azBottomZOPSpeed_Linear)/2),!0)}getAzTopZopSpeed(){return(this.azGoalTopZOP-e.core.zopHandler.topZOP)/this.speedModifier}getAzBottomZopSpeed(){return(this.azGoalBottomZOP-e.core.zopHandler.bottomZOP)/this.speedModifier}runEffects(){return this.runAutoScroll()||this.runAutoZoom()}prepareAutoScroll(t,r){r===void 0&&(r=0);var s=e.core.getTimeStamp(),o=s-this.lastScrollTime;o<=r||(this.previousScrollSpeed=this.scrollSpeed,1<this.preparingScrollCounter?(this.scrollSpeed=(t-this.lastScrollYPixel)/o,this.scrollSpeed>e.core.zopHandler.maxScrollSpeed&&(this.scrollSpeed=e.core.zopHandler.maxScrollSpeed),this.scrollSpeed<-e.core.zopHandler.maxScrollSpeed&&(this.scrollSpeed=-e.core.zopHandler.maxScrollSpeed)):this.scrollSpeed=0,this.preparingScrollCounter++,this.lastScrollTime=s,this.lastScrollYPixel=t)}startAutoScroll(t){e.core.zopHandler.startScroll(t),this.previousScrollSpeed!=0&&this.scrollSpeed!=0&&(this.scrollSpeed=(this.scrollSpeed+this.previousScrollSpeed)/2*1.2),this.preparingScrollCounter=this.previousScrollSpeed=0}runAutoScroll(){if(this.scrollSpeed!=0&&this.preparingScrollCounter===0){var t=e.core.getTimeStamp(),r=t-this.lastScrollTime;if(r===0)return!1;var s=this.lastScrollYPixel+this.scrollSpeed*r;return this.lastScrollYPixel=s,this.lastScrollTime=t,e.core.zopHandler.continueScroll(s),e.core.zopHandler.endScroll(),e.core.zopHandler.startScroll(s),this.speedSlowDown=r*e.core.zopHandler.maxScrollSpeed/2200,this.scrollSpeed=this.scrollSpeed>2*this.speedSlowDown?this.scrollSpeed-this.speedSlowDown:this.scrollSpeed<2*-this.speedSlowDown?this.scrollSpeed+this.speedSlowDown:0,this.scrollSpeed===0&&e.core.zopHandler.endScroll(),!0}return!1}isScrollingOrZooming(){return 1<this.scrollSpeed||this.azRunning===!0}stopAllEffects(){this.previousScrollSpeed=this.scrollSpeed=0,e.core.zopHandler.endScroll(),this.stopAutoZoom(),e.core.redraw(!1)}stopAutoZoom(){this.azRunning=!1,this.azBottomZOPSpeed=this.azTopZOPSpeed=0,this.azCallBack&&(this.azCallBack(),this.azCallBack=void 0),e.core.redraw(!1)}}e.DrawAreaEffects=u;class v{constructor(){this.pageHtml='<div id="noColorPickerWindow" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div class="base menuItem" style="text-align:center">{#Color picker?#}</div>    <div>        <button id="gotoShopCancel" class="topBarButton" style="width:50%"><img src="images/cross.svg" class="topBarImage"/><span>{#Cancel#}</span></button>        <button id="gotoShopOk" class="topBarButton" style="width:50%"><img src="images/shop.svg" class="topBarImage"/><span>{#Shop#}</span></button>    </div></div></div></div><div id="calendarsTopBar" class="topBar">    <button id="calendarsBack" class="topBarButton" style="width:50%"><img src="images/arrow-left.svg" class="topBarImage"/></span><span>{#Back#}</span></button>    <button id="emptyButton" class="topBarButton" style="width:50%"></button>    <div id="calendarsTitle" class="topBarTitle" style="width:100%">{#Calendars#}</div></div><div id="calendarsArea" class="pageContent">    <ul class="calendarsPopupList" id="calendarsPopupList"></ul></div>',this.visibilitySettings=[]}show(){e.core.domHandler.hideCanvas(),this.timestamp=e.core.getTimeStamp(),e.core.calendarDataProxy.analyticsPage("Calendars page"),this.calendarsPage=e.core.domHandler.pageHtmlFormatHelper("calendarsPage",this.pageHtml),this.calendarsPage.style.display="block",e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements=e.core.domHandler.resizeDomElements.bind(e.core.domHandler),window.setTimeout(e.core.domHandler.resizeDomElements,0),window.setTimeout(e.core.domHandler.resizeDomElements,100);var t=(e.core.settings.titleWidth/e.core.ratio-24)/2;for(document.getElementById("calendarsBack").style.padding=t+"px",document.getElementById("emptyButton").style.padding=e.core.settings.titleWidth/e.core.ratio/2+1+"px",document.getElementById("calendarsArea").style.top="54px",e.core.showBackButtons()?(e.core.domHandler.addClickEvent("calendarsBack",this.calendarsBack,this),document.getElementById("calendarsTitle").style.display="none"):(document.getElementById("calendarsBack").style.display="none",document.getElementById("emptyButton").style.display="none"),this.visibilitySettings=[],t=0;t<e.core.calendars.length;t++)this.visibilitySettings.push(new d(e.core.calendars[t].id,e.core.calendars[t].visibility));for(var r=document.getElementById("calendarsPopupList");r.firstChild;)r.removeChild(r.firstChild);for(this.liElements=[],this.checkBoxElements=[],this.spanElements=[],this.colorBoxElements=[],t=0;t<e.core.calendars.length;t++){var s=document.createElement("li"),o=document.createTextNode(e.core.calendars[t].name),l=document.createElement("span");this.liElements.push(s);var c=document.createElement("img");c.id="checkbox"+t,c.style.height="24px",c.style.paddingTop="6px",c.style.paddingRight="12px",c.style.paddingBottom="6px",c.style.verticalAlign="top",s.appendChild(c),this.checkBoxElements.push(c);var p=document.createElement("span");if(p.id="span"+t,p.className="textInList",p.style.maxWidth=e.core.domHandler.screenWidthForDOM-130+"px",p.appendChild(o),s.appendChild(p),this.spanElements.push(p),this.colorBoxElements.push(l),l.className="colorBox",l.id="colorBox"+t,l.style.cssFloat="right",s.appendChild(l),this.styleBasedOnVisibility(s,c,l,e.core.calendars[t],null),e.core.commonUserSettings.licenceColorPicker){o=document.createElement("div"),o.id="colorPicker"+t,s.appendChild(o),c=new Piklor,c.init(o,e.core.settings.theme.eventColors,{open:l,closeOnBlur:!1},""+t);var f=this;c.colorChosen(function(g,m){var S=+m,M=e.core.settings.theme.eventColors.indexOf(g);document.getElementById("colorBox"+S);var _=e.core.commonUserSettings.savedCalendarColors;e.core.commonUserSettings.savedCalendarColors.containsKey(e.core.calendars[S].id)?_[e.core.calendars[S].id]=M:_.add(e.core.calendars[S].id,M),e.core.commonUserSettings.savedCalendarColors=_,e.core.calendars[S].colorId=M,e.core.calendars[S].visibility=e.VisibilityType.Visible,e.core.calendarDataProxy.saveSettings(),f.styleBasedOnVisibility(f.liElements[S],f.checkBoxElements[S],f.colorBoxElements[S],e.core.calendars[S],null)})}else this.showNoColorPickerWindow=this.showNoColorPickerWindow.bind(this),l.addEventListener("click",this.showNoColorPickerWindow,!1);s.id="calendarsPopupList"+t,r.appendChild(s),e.core.domHandler.addClickEvent(s.id,this.calendarClicked,this)}}showNoColorPickerWindow(){document.getElementById("noColorPickerWindow").style.display="table",e.core.domHandler.addClickEvent("gotoShopOk",this.gotoShop,this),e.core.domHandler.addClickEvent("gotoShopCancel",this.hideNoColorPickerWindow,this)}hideNoColorPickerWindow(){document.getElementById("noColorPickerWindow").style.display="none"}gotoShop(){e.core.appStateHandler.viewShop()}hide(){e.core.appStateHandler.calendarsControlIsShowing=!1;for(var t=0;t<e.core.calendars.length;t++)this.visibilitySettings[t].newVisibility=e.core.calendars[t].visibility;e.core.calendarDataProxy.persistCalendarsVisibilitySettings(this.visibilitySettings),e.core.domHandler.showCanvas(),e.core.domHandler.removeElement(this.calendarsPage.id)}reshow(){this.show()}styleBasedOnVisibility(t,r,s,o,l){t.style.backgroundColor=e.core.settings.theme.colorBackground,l=e.core.helper.getEventColor(l,o),s.style.backgroundColor=l,s.style.borderColor=l,o.visibility==e.VisibilityType.Visible?(r.src="images/checkbox-checked.svg",t.style.color=e.core.settings.theme.colorHorizontalTitle):(r.src="images/checkbox-unchecked.svg",t.style.color=e.core.helper.colorToRGBA(e.core.settings.theme.colorHorizontalTitle,.5))}getEventTarget(t){return t=t||window.event,t.target||t.srcElement}calendarClicked(t){t.preventDefault();var r=e.core.getTimeStamp();this.lastClickTime&&this.lastClickTime+250>r||(this.lastClickTime=r,t=this.getEventTarget(t),r=this.liElements.indexOf(t),0>r&&(r=this.checkBoxElements.indexOf(t)),0<=r&&(e.core.calendars[r].visibility=e.core.calendars[r].visibility==e.VisibilityType.Visible?e.VisibilityType.Hidden:e.VisibilityType.Visible,this.styleBasedOnVisibility(this.liElements[r],this.checkBoxElements[r],this.colorBoxElements[r],e.core.calendars[r],null)))}calendarsBack(t){300>e.core.getTimeStamp()-this.timestamp||e.core.appStateHandler.back()}}e.CalendarsControl=v;class T{constructor(t,r){this.id=t,this.oldVisibility=r}}e.CalendarVisibilitySetting=T;class C{constructor(){this.pageHtml='<div id="noThemesWindow" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div class="base menuItem" style="text-align:center">{#More themes?#}</div>    <div>        <button id="gotoShopCancel" class="topBarButton" style="width:50%"><img src="images/cross.svg" class="topBarImage"/><span>{#Cancel#}</span></button>        <button id="gotoShopOk" class="topBarButton" style="width:50%"><img src="images/shop.svg" class="topBarImage"/><span>{#Shop#}</span></button>    </div></div></div></div><div id="settingsTopBar" class="topBar">    <button id="settingsBack" class="topBarButton" style="width:50%"><img src="images/arrow-left.svg" class="topBarImage"/></span><span>{#Back#}</span></button>    <button id="emptyButton" class="topBarButton" style="width:50%"></button>    <div id="settingsTitle" class="topBarTitle" style="width:100%">{#Settings#}</div></div><div id="settingsArea" class="pageContent pageTopPadding" style="float:left; background-color: #E9E9E9;">    <div class="miniTitle sizedTitle" id="themeTitle">{#Theme#}</div>        <div style="position: relative"><div class="inputBox"><select id="settingsTheme" class="base inputBase" ></select></div>    </div>        <div class="miniTitle sizedTitle" id="timezoneTitle">{#Time zone#}</div>            <div style="position: relative"><div class="inputBox"><select id="settingsTimeZone" class="base inputBase" >                <option class="inputOption" value="-">{#Auto#}</option>                <option class="inputOption" value="-12">-12</option>                <option class="inputOption" value="-11">-11</option>                <option class="inputOption" value="-10">-10</option>                <option class="inputOption" value="-9.5">-9:30</option>                <option class="inputOption" value="-9">-9</option>                <option class="inputOption" value="-8">-8</option>                <option class="inputOption" value="-7">-7</option>                <option class="inputOption" value="-6">-6</option>                <option class="inputOption" value="-5">-5</option>                <option class="inputOption" value="-4">-4</option>                <option class="inputOption" value="-3.5">-3:30</option>                <option class="inputOption" value="-3">-3</option>                <option class="inputOption" value="-2">-2</option>                <option class="inputOption" value="-1">-1</option>                <option class="inputOption" value="0" >0</option>                <option class="inputOption" value="+1">+1</option>                <option class="inputOption" value="+2">+2</option>                <option class="inputOption" value="+3">+3</option>                <option class="inputOption" value="+3.5">+3:30</option>                <option class="inputOption" value="+4">+4</option>                <option class="inputOption" value="+4.5">+4:30</option>                <option class="inputOption" value="+5">+5</option>                <option class="inputOption" value="+5.5">+5:30</option>                <option class="inputOption" value="+5.75">+5:45</option>                <option class="inputOption" value="+6">+6</option>                <option class="inputOption" value="+6.5">+6:30</option>                <option class="inputOption" value="+7">+7</option>                <option class="inputOption" value="+8">+8</option>                <option class="inputOption" value="+8.5">+8:30</option>                <option class="inputOption" value="+8.75">+8:45</option>                <option class="inputOption" value="+9">+9</option>                <option class="inputOption" value="+9.5">+9:30</option>                <option class="inputOption" value="+10">+10</option>                <option class="inputOption" value="+10.5">+10:30</option>                <option class="inputOption" value="+11">+11</option>                <option class="inputOption" value="+12">+12</option>                <option class="inputOption" value="+12.75">+12:45</option>                <option class="inputOption" value="+13">+13</option>                <option class="inputOption" value="+14">+14</option>            </select></div></div>        <div class="miniTitle sizedTitle" id="firstDayTitle">{#First day of week#}</div>            <div style="position: relative"><div class="inputBox"><select id="settingsFirstDay" class="base inputBase" >            </select></div></div>    <div class="miniTitle sizedTitle">{#Show week numbers#}</div>    <div style="position: relative"><div class="inputBox transparent"><input id="checkBoxShowWeeks" type="checkbox" class="base inputBase inputCheckBox"></input></div></div>    <div class="miniTitle sizedTitle">{#Use 24-hour format#}</div>    <div style="position: relative"><div class="inputBox transparent"><input id="checkBox24h" type="checkbox" class="base inputBase inputCheckBox"></input></div></div>    <div class="miniTitle sizedTitle" id="grayDaysTitle">{#Gray days#}</div>        <div style="position: relative"><div class="inputBox"><select id="settingsGrayDays" class="base inputBase maybeBig" multiple="multiple"></select></div>    </div>    <div class="miniTitle sizedTitle" id="languageTitle">{#Language#}</div>        <div style="position: relative"><div class="inputBox"><select id="settingsLanguage" class="base inputBase" ></select></div>    </div>    <div class="miniTitle sizedTitle" id="daatAmountTitle">{#Data amount (startup speed)#}</div>        <div style="position: relative"><div class="inputBox"><select id="settingsDataAmount" class="base inputBase" >            <option class="inputOption" value="4800">{#All#}</option>            <option class="inputOption" value="48">{#4 Years#}</option>            <option class="inputOption" value="4">{#4 months#}</option>        </select></div>     </div></div>',this.visibilitySettings=[]}show(){e.core.domHandler.hideCanvas(),e.core.calendarDataProxy.analyticsPage("Settings page"),this.timestamp=e.core.getTimeStamp(),this.settingsPage=e.core.domHandler.pageHtmlFormatHelper("settingsPage",this.pageHtml),this.settingsPage.style.display="block",e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements=e.core.domHandler.resizeDomElements.bind(e.core.domHandler),window.setTimeout(e.core.domHandler.resizeDomElements,0),window.setTimeout(e.core.domHandler.resizeDomElements,100);var t=(e.core.settings.titleWidth/e.core.ratio-24)/2;document.getElementById("settingsBack").style.padding=t+"px",document.getElementById("emptyButton").style.padding=e.core.settings.titleWidth/e.core.ratio/2+1+"px",document.getElementById("settingsArea").style.top="54px",e.core.showBackButtons()?(e.core.domHandler.addClickEvent("settingsBack",this.settingsBack,this),document.getElementById("settingsTitle").style.display="none"):(document.getElementById("settingsBack").style.display="none",document.getElementById("emptyButton").style.display="none"),this.firstDaySelectElement=document.getElementById("settingsFirstDay"),this.grayDaysSelectElement=document.getElementById("settingsGrayDays"),this.timeZoneSelectElement=document.getElementById("settingsTimeZone"),this.languageSelectElement=document.getElementById("settingsLanguage"),this.themeSelectElement=document.getElementById("settingsTheme"),this.dataAmountSelectElement=document.getElementById("settingsDataAmount"),this.showWeekCheckBox=document.getElementById("checkBoxShowWeeks"),this.use24hCheckBox=document.getElementById("checkBox24h"),e.core.domHandler.addWeekDaysToSelectNode(this.firstDaySelectElement),e.core.domHandler.addWeekDaysToSelectNode(this.grayDaysSelectElement),this.showWeekCheckBox.checked=e.core.commonUserSettings.showWeekNumbers,this.use24hCheckBox.checked=e.core.commonUserSettings.use24hFormat,this.timeZoneSelectElement.value=e.core.commonUserSettings.timeZoneForSettingsPage,e.Translate.languageExists(D.locale())||(t=new Option("-",e.core.translate.get("Auto(partially English)"),!1,!1),t.className="inputOption",this.languageSelectElement.appendChild(t));for(var r=0;r<e.core.translate.languages.keys().length;r++)t=new Option(e.core.translate.languages.values()[r],e.core.translate.languages.keys()[r],!1,!1),t.className="inputOption",this.languageSelectElement.appendChild(t);for(this.languageSelectElement.value=e.core.commonUserSettings.language.toString(),r=0;r<e.core.settings.themes.keys().length;r++)t=new Option(e.core.translate.get(e.core.settings.themes.values()[r].themeName),e.core.settings.themes.keys()[r],!1,!1),t.className="inputOption",this.themeSelectElement.appendChild(t);this.themeSelectElement.value=e.core.commonUserSettings.theme.toString(),e.core.settings.themes.keys().length==1&&(this.preventOptions=this.preventOptions.bind(this),this.themeSelectElement.addEventListener("mousedown",this.preventOptions),this.themeSelectElement.addEventListener("touchstart",this.preventOptions)),this.dataAmountSelectElement.value=e.core.commonUserSettings.dataAmountToLoad.toString(),e.core.domHandler.selectWeekDays(this.firstDaySelectElement,""+e.core.commonUserSettings.firstDayOfWeek),e.core.domHandler.selectWeekDays(this.grayDaysSelectElement,""+e.core.commonUserSettings.grayDays)}preventOptions(t){t.preventDefault(),this.themeSelectElement.blur(),window.focus(),this.showNoThemesWindow()}showNoThemesWindow(){document.getElementById("noThemesWindow").style.display="table",e.core.domHandler.addClickEvent("gotoShopOk",this.gotoShop,this),e.core.domHandler.addClickEvent("gotoShopCancel",this.hideNoThemesWindow,this)}hideNoThemesWindow(){document.getElementById("noThemesWindow").style.display="none"}gotoShop(){e.core.appStateHandler.viewShop()}hide(){var t=!1;e.core.appStateHandler.settingsControlIsShowing=!1,e.core.commonUserSettings.showWeekNumbers=this.showWeekCheckBox.checked,e.core.commonUserSettings.use24hFormat!=this.use24hCheckBox.checked&&(e.core.commonUserSettings.use24hFormat=this.use24hCheckBox.checked,e.core.calendarDataProxy.analyticsValue("Value","Settings","Use 24h",e.core.commonUserSettings.use24hFormat==1?1:0),t=!0),e.core.commonUserSettings.timeZoneForSettingsPage!=this.timeZoneSelectElement.value&&(e.core.commonUserSettings.timeZoneForSettingsPage=this.timeZoneSelectElement.value,e.core.calendarDataProxy.analyticsValue("Value","Settings","Time zone",e.core.helper.getNumberFromString(e.core.commonUserSettings.timeZoneForSettingsPage,1e3)),t=!0),e.core.commonUserSettings.dataAmountToLoad.toString()!=this.dataAmountSelectElement.value&&(e.core.commonUserSettings.dataAmountToLoad=Number(this.dataAmountSelectElement.value),e.core.calendarDataProxy.analyticsValue("Value","Settings","Data amount to load",e.core.commonUserSettings.dataAmountToLoad),t=!0),e.core.commonUserSettings.firstDayOfWeek+""!=e.core.domHandler.getSelectOptions(this.firstDaySelectElement)&&(e.core.commonUserSettings.firstDayOfWeek=Number(e.core.domHandler.getSelectOptions(this.firstDaySelectElement)),e.core.calendarDataProxy.analyticsValue("Value","Settings","First Day Of Week",e.core.commonUserSettings.firstDayOfWeek),e.core.calendarDateHandler.clearWeekInfo()),e.core.commonUserSettings.grayDays+""!=e.core.domHandler.getSelectOptions(this.grayDaysSelectElement)&&(e.core.commonUserSettings.grayDays=e.core.domHandler.getSelectOptions(this.grayDaysSelectElement),e.core.calendarDataProxy.analyticsValue("Value","Settings","Gray days",e.core.helper.getNumberFromString(e.core.commonUserSettings.grayDays,1e3)),e.core.calendarDateHandler.clearWeekInfo()),e.core.commonUserSettings.language.toString()!==this.languageSelectElement.value&&(e.core.commonUserSettings.language=this.languageSelectElement.value,e.core.calendarDataProxy.analyticsValue("Value","Settings","Language "+this.languageSelectElement.value,1),e.core.reopenApp(),t=!0),e.core.commonUserSettings.theme.toString()!==this.themeSelectElement.value&&(e.core.commonUserSettings.theme=this.themeSelectElement.value,e.core.calendarDataProxy.analyticsValue("Value","Settings","Theme "+this.themeSelectElement.value,1),e.core.settings.reloadTheme(),e.core.reopenApp(),t=!0),e.core.domHandler.showCanvas(),e.core.domHandler.removeElement(this.settingsPage.id),t&&e.core.reloadAllCalendarData()}reshow(){this.show()}getEventTarget(t){return t=t||window.event,t.target||t.srcElement}settingsBack(t){300>e.core.getTimeStamp()-this.timestamp||e.core.appStateHandler.back()}}e.SettingsControl=C;class P{constructor(){this.nudgeBecauseMenuBeingDragged=0,this.menuItems=[],this.transparency=-1,this.animationDuration=600,this.lastDragDirection=0,this.currentMaxRight=0,this.movingMenuWidth=0,this.movingMenuWidth=e.core.settings.titleWidth}resetDrawAreaSize(t,r){this.movingMenuWidth=e.core.settings.titleWidth}reshow(){this.safeBack()}show(){this.menuItemLogin=new d(e.core.translate.get("Connect Google calendar"),e.core.charCodeLogin),this.menuItemFake=new d(e.core.translate.get("Show demo calendar"),e.core.charCodeFake),this.menuItemLogout=new d(e.core.translate.get("Disconnect from Google"),e.core.charCodeLogout),this.menuItemCalendars=new d(e.core.translate.get("Calendars"),e.core.charCodeCalendars),this.menuItemShop=new d(e.core.translate.get("Shop"),e.core.charCodeShop),this.menuItemReload=new d(e.core.translate.get("Refresh"),e.core.charCodeReload),this.menuItemSettings=new d(e.core.translate.get("Settings"),e.core.charCodeSettings),this.menuItemAbout=new d(e.core.translate.get("About"),e.core.charCodeAbout),this.menuItemRate=new d(e.core.translate.get("Rate"),e.core.charCodeHeart),this.menuItemFeedback=new d(e.core.translate.get("Send feedback"),e.core.charCodeSend),this.showTime=e.core.getTimeStamp(),this.menuItems=[],e.core.enableGoogle&&e.core.calendarDataProxy&&(e.core.calendarDataProxy.calendarDataProxyType!==e.CalendarDataProxyType.Google||e.core.calendarDataProxy.enableGoogleLogin)&&this.menuItems.push(this.menuItemLogin),e.core.calendarDataProxy&&e.core.calendarDataProxy.enableMultipleCalendars&&this.menuItems.push(this.menuItemCalendars),e.core.calendarDataProxy&&e.core.calendarDataProxy.enableShop&&this.menuItems.push(this.menuItemShop),e.core.calendarDataProxy&&e.core.calendarDataProxy.enableReload&&this.menuItems.push(this.menuItemReload),this.menuItems.push(this.menuItemSettings),e.core.helper.isAndroid()&&(this.menuItems.push(this.menuItemRate),this.menuItems.push(this.menuItemFeedback)),e.core.calendarDataProxy&&e.core.calendarDataProxy.enableGoogleLogout&&this.menuItems.push(this.menuItemLogout),this.redraw()}safeBack(){e.core.appStateHandler.safeBack(this)||this.startCloseAnimation()}click(t,r){500>e.core.getTimeStamp()-this.showTime?this.showTime=e.core.getTimeStamp():(this.showTime=e.core.getTimeStamp(),this.isFullyExpanded()&&(this.safeBack(),this.hitTest(this.menuItemLogin,t,r)?this.menuItemLogin_Click():this.hitTest(this.menuItemReload,t,r)?this.menuItemReload_Click():this.hitTest(this.menuItemLogout,t,r)?this.menuItemLogout_Click():this.hitTest(this.menuItemFake,t,r)?this.menuItemFake_Click():this.hitTest(this.menuItemCalendars,t,r)?this.menuItemCalendars_Click():this.hitTest(this.menuItemShop,t,r)?this.menuItemShop_Click():this.hitTest(this.menuItemSettings,t,r)?this.menuItemSettings_Click():this.hitTest(this.menuItemAbout,t,r)?this.menuItemAbout_Click():this.hitTest(this.menuItemRate,t,r)?this.menuItemRate_Click():this.hitTest(this.menuItemFeedback,t,r)&&this.menuItemFeedback_Click()))}hide(){this.startCloseAnimation()}setSizes(){this.menuLeft=this.menuTop=1;var t=0;this.textSize=e.core.settings.menuTextHeight,this.logoTextSize=Math.floor(2.2*this.textSize),this.logoSize=Math.floor(3*e.core.settings.menuIconHeight),this.logoTextSubSize=Math.floor(1.4*this.textSize);for(var r=e.core.zopDrawArea.measureTextWidth("OneView",this.logoTextSize,!0,!1),s=0;s<this.menuItems.length;s++)this.menuItems[s].top=t,t+=e.core.settings.menuItemHeight,this.menuItems[s].bottom=t,r=Math.max(r,e.core.zopDrawArea.measureTextWidth(this.menuItems[s].text,this.textSize,!0,!1));this.expandedMenuWidth=Math.floor(Math.min(r+e.core.settings.menuItemHeight+e.core.settings.menuIconHeight,Math.min(e.core.domHandler.screenWidth,e.core.domHandler.screenHeight))),this.movingMenuWidth=Math.floor(Math.max(e.core.settings.titleWidth,Math.min(this.currentMaxRight,this.expandedMenuWidth))),this.menuHeight=e.core.domHandler.screenHeight,this.nudgeBecauseMenuBeingDragged=Math.floor(Math.max(0,e.core.mainMenuControl.movingMenuWidth-e.core.settings.titleWidth)),this.transparency=Math.max(-1,Math.min(1,(2*Math.min(this.currentMaxRight,this.movingMenuWidth)-this.expandedMenuWidth-e.core.settings.titleWidth)/(this.expandedMenuWidth-e.core.settings.titleWidth))),this.logoSizeGrowing=Math.floor(.85*this.logoSize+.15*this.logoSize*Math.max(0,this.transparency)),this.textColor=e.core.settings.theme.colorTitleText}drawAreaResized(){e.core.appStateHandler.isMainMenuShowing&&this.redraw()}redrawMenuIcon(){}hitMenuButton(t,r){return 0<t&&t<e.core.settings.titleWidth&&0<r&&r<e.core.settings.titleWidth}redraw(){if(this.setSizes(),.1<this.movingMenuWidth/this.expandedMenuWidth&&0<this.transparency){e.core.zopDrawArea.canvasContext.save(),e.core.zopDrawArea.canvasContext.rect(this.menuLeft-1,this.menuTop,this.movingMenuWidth,this.menuHeight+2),e.core.zopDrawArea.canvasContext.clip();var t=this.expandedMenuWidth/20;for(this.menuTop=t,e.core.drawArea.drawIcon(e.core.charCodeLogo,this.menuLeft+(this.expandedMenuWidth-this.logoSizeGrowing)/2,this.menuTop+(this.logoSize-this.logoSizeGrowing)/2,this.logoSizeGrowing,this.logoSizeGrowing),this.menuTop+=this.logoSize,this.menuTop+=this.logoTextSize,e.core.drawArea.drawCenteredText("Calendar",this.menuLeft,this.menuTop,this.expandedMenuWidth,this.logoTextSubSize,this.textColor,!1,!0,!0),this.menuTop+=this.logoTextSubSize+2*t,t=0;t<this.menuItems.length;t++)this.paintMenuItem(this.menuItems[t]);e.core.zopDrawArea.canvasContext.globalAlpha=Math.min(1,Math.max(0,1-this.transparency)),e.core.drawArea.drawFilledRectangle({x:e.core.zopHandler.leftPixel,y:0,width:e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged+2*e.core.ratio,height:e.core.zopDrawArea.zopAreaHeight,fillStyle:e.core.settings.theme.colorTitleBackground,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.zopDrawArea.canvasContext.globalAlpha=1,e.core.zopDrawArea.canvasContext.restore()}}paintMenuItem(t){var r=e.core.settings.menuItemHeight-1;e.core.drawArea.drawHorizontalLineNotZOP(this.menuLeft,this.menuTop+t.top,this.expandedMenuWidth-4,this.textColor,1,!1),e.core.drawArea.drawHorizontalLineNotZOP(this.menuLeft,this.menuTop+t.top+1+e.core.settings.menuItemHeight-1,this.expandedMenuWidth-4,this.textColor,1,!1),e.core.drawArea.drawText(t.text,this.menuLeft+r,this.menuTop+t.top+(e.core.settings.menuItemHeight-this.textSize)/2.5,this.textSize,this.textColor,!1,!0,!1,!1),e.core.drawArea.drawIcon(t.charCode,this.menuLeft+r/2-e.core.settings.menuIconHeight/2,this.menuTop+t.top+r/2-e.core.settings.menuIconHeight/2,e.core.settings.menuIconHeight,e.core.settings.menuIconHeight)}hitTest(t,r,s){return-1<this.menuItems.indexOf(t)&&r>this.menuLeft&&r<this.menuLeft+this.expandedMenuWidth&&s>this.menuTop+t.top&&s<this.menuTop+t.bottom}menuItemLogin_Click(){e.core.calendarDataProxy.analyticsEvent("Event","Login Clicked"),e.core.calendarDataProxy?(e.core.calendarDataProxy=new e.GoogleCalendarDataProxy,e.core.calendarDataProxy.login()):e.core.loadDataProxy()}menuItemReload_Click(){e.core.calendarDataProxy.analyticsEvent("Event","Reload Clicked"),e.core.reloadAllCalendarData()}menuItemLogout_Click(){e.core.calendarDataProxy.logout(),e.core.calendarDataProxy.analyticsEvent("Event","Logout Clicked"),e.core.calendarDataProxy=new e.DemoCalendarDataProxy,e.core.calendarDataProxy.populateCalendarEvents(function(){e.core.dataLoadReady()})}menuItemFake_Click(){e.core.calendarDataProxy=new e.DemoCalendarDataProxy,e.core.calendarDataProxy.populateCalendarEvents(function(){e.core.dataLoadReady()})}menuItemCalendars_Click(){e.core.appStateHandler.viewCalendars()}menuItemShop_Click(){e.core.appStateHandler.viewShop()}menuItemSettings_Click(){e.core.appStateHandler.viewSettings()}menuItemAbout_Click(){e.core.appStateHandler.viewAbout()}menuItemRate_Click(){e.core.helper.isAndroid()?window.open("market://details?id=com.oneviewcalendar.app"):window.open("https://web.archive.org/web/20190808203716/https://play.google.com/store/apps/details?id=com.oneviewcalendar.app")}menuItemFeedback_Click(){window.open("mailto:support@oneviewcalendar.com?body=%0D%0A%0D%0A%0D%0A%0D%0A%0D%0A-------------------%0D%0ASent from OneView Calendar version: 1.1.8")}getAnimationProgress(){var t=e.core.getTimeStamp(),t=Math.min(this.animationDuration,Math.max(10,t-this.animationStartTime))/this.animationDuration;return 1-(1-t)*(1-t)*(1-t)*(1-t)}startOpenAnimation(){this.animationAborted=!1,e.core.appStateHandler.isMainMenuBeingDragged=!1,this.animationStartTime=e.core.getTimeStamp()-20,this.animationStartPos=this.currentMaxRight,this.animationGoalDistance=this.expandedMenuWidth-this.animationStartPos,this.doOpenAnimation()}doOpenAnimation(){var t=this;this.animationAborted||(this.currentMaxRight=this.animationStartPos+this.animationGoalDistance*this.getAnimationProgress(),this.isFullyExpanded()||window.setTimeout(function(){t.doOpenAnimation()},30),e.core.redraw(!0))}isFullyExpanded(){return this.movingMenuWidth>=this.expandedMenuWidth-5}startCloseAnimation(){this.animationAborted=!1,e.core.appStateHandler.isMainMenuBeingDragged=!1,this.animationStartTime=e.core.getTimeStamp()-20,this.animationStartPos=this.currentMaxRight,this.animationGoalDistance=-this.animationStartPos,this.doCloseAnimation()}doCloseAnimation(){var t=this;this.animationAborted||(this.currentMaxRight=this.animationStartPos+this.animationGoalDistance*this.getAnimationProgress(),0<this.currentMaxRight?window.setTimeout(function(){t.doCloseAnimation()},30):(this.currentMaxRight=0,e.core.appStateHandler.isMainMenuBeingDragged=!1,this.movingMenuWidth=e.core.settings.titleWidth,e.core.appStateHandler.isMainMenuShowing=!1,this.redraw())),e.core.redraw(!0)}startDragging(t,r){return e.core.appStateHandler.isMainMenuBeingDragged=!1,t>=e.core.zopDrawArea.zopAreaLeft&&t<=e.core.zopDrawArea.zopAreaLeft+Math.max(e.core.settings.titleWidth,this.currentMaxRight)||e.core.appStateHandler.isMainMenuShowing&&this.isFullyExpanded()?this.animationAborted=!0:!1}continueDragging(t,r){this.animationAborted=e.core.appStateHandler.isMainMenuBeingDragged=!0,t=Math.max(t,e.core.settings.titleWidth),this.lastDragDirection=t-this.currentMaxRight,this.currentMaxRight=t,e.core.appStateHandler.isMainMenuShowing||(e.core.appStateHandler.showMainMenu(!1),this.currentMaxRight=t)}endDragging(){e.core.appStateHandler.isMainMenuBeingDragged=!1,0<this.lastDragDirection?(e.core.appStateHandler.addVisibleControl(e.core.mainMenuControl),this.startOpenAnimation()):this.safeBack()}}e.MainMenuControl=P;class b{constructor(){this.animationLength=2e3,this.precision=4,this.animationActive=!1}drawAreaResized(){e.core.appStateHandler.isAddButtonBeingDragged&&this.redraw(),this.width=Math.floor(e.core.settings.titleWidth*e.core.settings.theme.addButtonWidthFactor),this.halfWidth=Math.floor(this.width/2),this.radius=Math.floor(this.width/2),this.defaultCenterY=e.core.zopDrawArea.zopAreaTop+e.core.zopDrawArea.zopAreaHeight-2*e.core.settings.margin-this.radius,this.currentCenterX=this.defaultCenterX=e.core.zopDrawArea.zopAreaLeft+e.core.zopDrawArea.zopAreaWidth-2*e.core.settings.margin-this.radius,this.currentCenterY=this.defaultCenterY,this.leftForDetailedSelection=(e.core.zopHandler.rightPixel-e.core.settings.titleWidth)/2+e.core.settings.titleWidth}redrawAddButton(){e.core.appStateHandler.isAddButtonBeingDragged||this.isAnimationActive()?(this.passedMinDistance()&&this.selectedStartTime&&e.core.zopDrawArea.drawFilledRectangle(e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,e.core.zopHandler.dateToZOP(this.selectedStartTime),e.core.zopDrawArea.zopAreaWidth-e.core.settings.titleWidth-e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,e.core.zopHandler.dateToZOP(this.selectedEndTime),e.core.settings.theme.colorFadeOut,5),this.passedMinDistance()&&e.core.drawArea.drawVerticalLineNotZOP(this.leftForDetailedSelection,0,e.core.zopDrawArea.zopAreaHeight,e.core.settings.theme.colorMarker,3),e.core.zopDrawArea.drawFilledCircle2(this.defaultCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,this.defaultCenterY,this.radius+1,e.core.settings.theme.colorDarkSoft,!1),e.core.zopDrawArea.drawFilledCircle2(this.defaultCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,this.defaultCenterY,this.radius-1,e.core.settings.theme.colorLightSoft,!1)):(this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY),e.core.zopDrawArea.drawFilledCircle2(this.currentCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,this.currentCenterY,this.radius,e.core.settings.theme.colorAddButton,!1);var t=e.core.settings.lineThickness,r=0;t===1&&(r=.5),this.isAnimationActive()?(t=this.radius/2.2,e.core.drawArea.drawCenteredText("Drag me",this.currentCenterX-this.radius+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,this.currentCenterY-t/1.5,2*this.radius,t,e.core.settings.theme.colorTagText,!1,!1,!1)):(e.core.drawArea.drawLine2(this.currentCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-r,Math.floor(this.currentCenterY-this.width/7)-r,this.currentCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-r,Math.floor(this.currentCenterY+this.width/7)-r,t,e.core.settings.theme.colorTitleText,!1),e.core.drawArea.drawLine2(Math.floor(this.currentCenterX-this.width/7+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged)-r,this.currentCenterY-r,Math.floor(this.currentCenterX+this.width/7+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged)-r,this.currentCenterY-r,t,e.core.settings.theme.colorTitleText,!1))}startDragging(t,r){return this.passefMinDistanceEver=!1,t>this.currentCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-1.5*this.radius&&t<this.currentCenterX+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged+1.5*this.radius&&r>this.currentCenterY+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-1.5*this.radius&&r<this.currentCenterY+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged+1.5*this.radius?e.core.appStateHandler.isAddButtonBeingDragged=!0:e.core.appStateHandler.isAddButtonBeingDragged=!1}getTitleExtraData(){if(e.core.appStateHandler.isAddButtonBeingDragged&&this.detailedTimeInfo)return this.detailedTimeInfo}continueDragging(t,r){if(this.currentCenterX=t,this.currentCenterY=r,this.passedMinDistance()){this.passefMinDistanceEver=!0;var s;if(t>=this.leftForDetailedSelection&&(s=e.core.calendarDateHandler.getClosestFakeDetailAt(r,this.precision,!1)),!s){this.detailedTimeInfo=void 0,s=e.core.calendarDateHandler.selectCalendarDateObjectAt(t,r,!0);for(var o=10;s&&s.calendarDateObjectType===e.CalendarDateObjectType.Title;)s=e.core.calendarDateHandler.selectCalendarDateObjectAt(t+o,r,!0),o+=10}s&&s.calendarDateObjectType===e.CalendarDateObjectType.Week&&(this.detailedTimeInfo=s.longText),s&&(s.calendarDateObjectType<e.CalendarDateObjectType.Hour&&(s=new e.CalendarDateObject(e.CalendarDateObjectType.Hour,s.startDateTime)),this.selectedStartTime!==s.startDateTime&&(this.previousSelectedStartTime=this.selectedStartTime,this.previousSelectedEndTime=this.selectedEndTime,this.selectedTimeStamp=e.core.getTimeStamp()),this.selectedStartTime=s.startDateTime,this.selectedEndTime=s.endDateTime),s&&(this.detailedTimeInfo=s.longText,s.calendarDateObjectType<=e.CalendarDateObjectType.Hour&&(this.detailedTimeInfo=D(s.startDateTime).format("dddd ")+s.longText))}else this.detailedTimeInfo=this.selectedEndTime=this.selectedStartTime=void 0}endDragging(){e.core.appStateHandler.isAddButtonBeingDragged=!1,this.selectedTimeStamp+200>e.core.getTimeStamp()&&this.previousSelectedEndTime!==void 0&&(this.selectedStartTime=this.previousSelectedStartTime,this.selectedEndTime=this.previousSelectedEndTime),this.passedMinDistance()?this.selectedStartTime&&(e.core.zopDrawArea.drawFilledRectangle(e.core.settings.titleWidth,e.core.zopHandler.dateToZOP(this.selectedStartTime),e.core.zopDrawArea.zopAreaWidth-e.core.settings.titleWidth,e.core.zopHandler.dateToZOP(this.selectedEndTime),e.core.settings.theme.colorFadeOut,5),this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY,e.core.appStateHandler.startAddCalendarEventObject(this.selectedStartTime,this.selectedEndTime)):this.passefMinDistanceEver?(this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY):(this.animationStartTime=e.core.getTimeStamp(),this.animationActive=!0),this.detailedTimeInfo=this.selectedEndTime=this.selectedStartTime=void 0}isAnimationActive(){return e.core.appStateHandler.isAddButtonBeingDragged&&(this.animationActive=!1),this.animationActive}passedMinDistance(){return Math.abs(this.currentCenterX-this.defaultCenterX)+Math.abs(this.currentCenterY-this.defaultCenterY)>=this.width}doAnimation(){var t=e.core.getTimeStamp()-this.animationStartTime;if(t>this.animationLength&&(this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY),t>2*this.animationLength)this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY,this.animationActive=!1;else{var r=e.core.zopDrawArea.zopAreaHeight/8,s=Math.PI/2-(t/this.animationLength*Math.PI+2*Math.PI/8),t=t/this.animationLength*Math.PI/2;this.currentCenterX=this.defaultCenterX+Math.sin(s)*r-.706*r,this.currentCenterY=this.defaultCenterY+Math.cos(s)*r-.708*r,this.currentCenterX-=Math.sin(t)*r*1,this.currentCenterY-=Math.sin(t)*r*1.5,this.continueDragging(this.currentCenterX,this.currentCenterY),e.core.redraw(!1)}}doAnimation2(){var t=e.core.getTimeStamp()-this.animationStartTime;if(t>this.animationLength&&(this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY),t>2*this.animationLength)this.currentCenterX=this.defaultCenterX,this.currentCenterY=this.defaultCenterY,this.animationActive=!1;else{var r=e.core.zopDrawArea.zopAreaHeight/8,s=this.defaultCenterY-1*r,o=this.defaultCenterX-1*r,l=this.defaultCenterY-8*r,c=this.defaultCenterX-8*r,p=this.defaultCenterY-5*r,f=Math.min(1,2*t/this.animationLength);this.currentCenterX=this.newPosHelper(this.defaultCenterX-2*r,this.currentCenterX,f),this.currentCenterY=this.newPosHelper(s,this.currentCenterY,f),f=Math.max(0,Math.min(1,t*t/600/this.animationLength)),this.currentCenterX=this.newPosHelper(o,this.currentCenterX,f),this.currentCenterY=this.newPosHelper(l,this.currentCenterY,f),t>this.animationLength/2&&(f=Math.min(1,(t-this.animationLength/2)/(this.animationLength-this.animationLength/2)),this.currentCenterX=this.newPosHelper(c,this.currentCenterX,f),this.currentCenterY=this.newPosHelper(p,this.currentCenterY,f)),f=Math.min(1,t/this.animationLength),this.continueDragging(this.newPosHelper(this.defaultCenterX,this.currentCenterX,f),this.newPosHelper(this.defaultCenterY,this.currentCenterY,f)),e.core.redraw(!1)}}newPosHelper(t,r,s){return t*s+r*(1-s)}redraw(){}}e.AddButtonControl=b;class k{constructor(){this.menuItems=[],this.menuItems=a}resetDrawAreaSize(t,r){}showMenuFor(t,r){this.x=t,this.y=r,this.tryShiftPixels=r-e.core.domHandler.screenHeight/2,this.redraw()}click(t,r){for(var s=0;s<this.menuItems.length;s++)if(this.hitTest(this.menuItems[s],t,r)){this.menuItems[s].onMenuItemClicked();return}history.back()}drawAreaResized(){this.redraw()}redraw(){for(var t=0,r=0,s=0;s<this.menuItems.length;s++)this.menuItems[s].isVisible&&(this.menuItems[s].top=t,t+=e.core.settings.menuItemHeight,this.menuItems[s].bottom=t,r=Math.max(r,e.core.zopDrawArea.measureTextWidth(this.menuItems[s].text,e.core.settings.menuTextHeight,!0,!1)));for(this.menuWidth=Math.min(r+e.core.settings.menuItemHeight+e.core.settings.menuIconHeight,Math.min(e.core.domHandler.screenWidth,e.core.domHandler.screenHeight)),this.menuHeight=t+1,this.menuLeft=(e.core.domHandler.screenWidth-this.menuWidth)/2,this.menuTop=(e.core.domHandler.screenHeight-this.menuHeight)/2+this.tryShiftPixels,this.menuTop=Math.max(20,this.menuTop),this.menuTop=Math.min(e.core.domHandler.screenHeight-20-this.menuHeight,this.menuTop),e.core.drawArea.drawFilledRectangle({x:this.menuLeft-1,y:this.menuTop-1,width:this.menuWidth+2,height:this.menuHeight+2,fillStyle:e.core.settings.theme.colorWhite,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:this.menuLeft,y:this.menuTop,width:this.menuWidth,height:this.menuHeight,fillStyle:e.core.settings.theme.colorDarkSoft,hasShadow:!1,rounded:!1,strokeStyle:void 0}),s=0;s<this.menuItems.length;s++)this.paintMenuItem(this.menuItems[s])}paintMenuItem(t){if(t.isVisible){var r=e.core.settings.menuItemHeight-1;e.core.drawArea.drawFilledRectangle({x:this.menuLeft+1,y:this.menuTop+t.top+1,width:this.menuWidth-2,height:e.core.settings.menuItemHeight-1,fillStyle:e.core.settings.theme.colorDark,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawText(t.text,this.menuLeft+r+1,this.menuTop+t.top+(e.core.settings.menuItemHeight-e.core.settings.menuTextHeight)/2.5,e.core.settings.menuTextHeight,e.core.settings.theme.colorWhite,!1,!0,!1,!1),e.core.drawArea.drawIcon(t.charCode,this.menuLeft+r/2-e.core.settings.menuIconHeight/2,this.menuTop+t.top+r/2-e.core.settings.menuIconHeight/2,e.core.settings.menuIconHeight,e.core.settings.menuIconHeight)}}hitTest(t,r,s){return r>this.menuLeft&&r<this.menuLeft+this.menuWidth&&s>this.menuTop+t.top&&s<this.menuTop+t.bottom}}e.PopupMenuControl_Base=k;class I{constructor(t,r,s){this.isHighlited=!1,this.isVisible=!0,this.text=t,this.charCode=r,this.onMenuItemClicked=s}}e.MenuItemInfo=I;class W{constructor(){this.pageHtml='<div id="message" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div id="messageText" class="base menuItem" style="text-align:center">{#Error#}</div>    <div>        <button id="messageOk" class="topBarButton" style="width:100%"><img src="images/check.svg" height="24px" style="vertical-align: text-bottom"/><span>{#Ok#}</span></button>    </div></div></div></div><div id="noColorPickerWindow" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div class="base menuItem" style="text-align:center">{#Color picker?#}</div>    <div>        <button id="gotoShopCancel" class="topBarButton" style="width:50%"><img src="images/cross.svg" class="topBarImage"/><span>{#Cancel#}</span></button>        <button id="gotoShopOk" class="topBarButton" style="width:50%"><img src="images/shop.svg" class="topBarImage"/><span>{#Shop#}</span></button>    </div></div></div></div><div id="colorPickerWindow" class="outer" style="display: none" > <div class="middle" > <div class="inner" >          <div id="colorPickerArea" style="padding: 20px; padding-top: 12px;"></div></div></div></div><div id="editEventTopBar" class="topBar">    <button id="editEventCancel" class="topBarButton" style="width:50%"><img src="images/cross.svg" class="topBarImage"/><span>{#Cancel#}</span></button>    <button id="editEventOk" class="topBarButton" style="width:50%"><img src="images/check.svg" class="topBarImage"/><span>{#Ok#}</span></button></div><div class="pageContent" id="editEventArea" style="float:left; background-color: #E9E9E9;">        <div class="editEventPopupContent pageTopPadding" id="editEventPopupContent">            <div class="miniTitle sizedTitle">{#Title#}</div>            <div style="position: relative"><div class="inputBox"><input type="text" class="base inputBase inputOneLiner" name="task" id="editEventTitle" required /></div></div>            <div class="miniTitle sizedTitle">{#Start#}</div>            <div style="position: relative"><div class="inputBox lessSpace"><input type="date" class="base inputBase inputDate" id="editEventDateStart" min="0001-01-01" max="4000-01-01" /><span id="fakeDateStart" class="base inputBase dateFake" ></span></div></div>            <div style="position: relative"><div class="inputBox"><input type="time" class="base inputBase inputDate androidDown" id="editEventTimeStart" step="60"></div></div>            <div class="miniTitle sizedTitle">{#End#}</div>            <div style="position: relative"><div class="inputBox lessSpace"><select id="editEventDuration" class="base inputBase">            </select></div></div>            <div style="position: relative"><div class="inputBox lessSpace"><input type="date" class="base inputBase inputDate" id="editEventDateEnd" min="0001-01-01" max="4000-01-01" ><span id="fakeDateEnd" class="base inputBase dateFake"></span></div></div>            <div style="position: relative"><div class="inputBox"><input type="time" class="base inputBase inputDate androidDown" id="editEventTimeEnd"  step="60"/></div></div>            <div class="miniTitle sizedTitle" id="remindersTitle">{#Reminders#}</div>            <div style="position: relative"><div class="inputBox"><select id="editEventReminders" class="base inputBase maybeBig" multiple="multiple" >            </select></div></div>            <div class="miniTitle sizedTitle">{#Where#}</div>            <div style="position: relative"><div class="inputBox"><input type="text" class="base inputBase inputOneLiner" name="task" id="editEventLocation" ></div></div>            <div class="miniTitle sizedTitle">{#Details#}</div>            <div style="position: relative"><div class="inputBox"><textarea class="base inputBase inputTwoLiner" name="task" id="editEventDetails" ></textarea></div></div>            <div id="spaceForColors"></div>                        <div class="miniTitle sizedTitle">{#Calendar#}</div>                        <div style="position: relative"><div id="calendarSelWrapper" class="inputBox"><select id="editEventCalendar" class="base inputBase inputOneLiner" >                        </select></div><div id="editEventColor" class="square"></div>            <table style ="width:100%">                <tr>                    <td style="white-space: nowrap">                        <div class="miniTitle sizedTitle">{#Recurrence#}</div>                        <div><div class="inputBox"><div class="base inputBase inputOneLiner" id="editEventRecurrenceWrapper"><span class="pageContentText" id="editEventRecurrence" style="cursor: pointer" style="float:left" taborder="10"></span></div></div></div>                    </td><td style="width:80%"></td>                 </tr>            </table>            </div> </div>         </div></div>',this.isShowingDatePickerForStartTime=!1,this.canEditReccur=!0}reshow(){e.core.appStateHandler.editEventControlIsShowing=!0,this.updateRecurrenceHtml(),this.timestamp=e.core.getTimeStamp()}init(t,r){this.calendarEvent=r===e.EventEditType.AllInSeries&&t.isRecurring?e.core.calendarDataProxy.getFirstRecurringEvent(t):t,this.editType=r,this.originalStartDate=this.calendarEvent.startDateTime,this.originalEndDate=this.calendarEvent.endDateTime,this.originalIsRecurring=this.calendarEvent.isRecurring,this.rruleFetched=this.rruleFetched.bind(this),e.core.calendarDataProxy.getRRuleObject(this.calendarEvent,this.rruleFetched)}show(){e.core.domHandler.hideCanvas(),e.core.calendarDataProxy.analyticsPage("Edit event page"),this.editPage=e.core.domHandler.pageHtmlFormatHelper("editEvent",this.pageHtml),this.editPage.style.display="block",e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements(),this.setByDuration(null),e.core.domHandler.resizeDomElements=e.core.domHandler.resizeDomElements.bind(e.core.domHandler),window.setTimeout(e.core.domHandler.resizeDomElements,0),window.setTimeout(e.core.domHandler.resizeDomElements,100),this.durationSelectElement=document.getElementById("editEventDuration"),this.updateDuration(),this.remindersSelectElement=document.getElementById("editEventReminders"),this.updateReminders();var t=(e.core.settings.titleWidth/e.core.ratio-24)/2;document.getElementById("editEventOk").style.padding=t+"px",document.getElementById("editEventCancel").style.padding=t+"px",document.getElementById("editEventArea").style.top="54px",e.core.domHandler.addClickEvent("editEventOk",this.editEventOk,this),e.core.domHandler.addClickEvent("editEventCancel",this.editEventCancel,this),e.core.domHandler.addClickEvent("editEventRecurrence",this.editRecurrency,this),e.core.domHandler.addClickEvent("editEventArea",this.doNothing,this),e.core.helper.canShowDatePicker()&&(e.core.domHandler.addClickEvent("editEventTimeStart",this.showDatePickerForStartTime,this),e.core.domHandler.addClickEvent("editEventTimeEnd",this.showDatePickerForEndTime,this)),e.core.domHandler.addEvent("editEventDateStart","change",this.startChanged,this),e.core.domHandler.addEvent("editEventDateEnd","change",this.endChanged,this),e.core.domHandler.addEvent("editEventTimeStart","change",this.startChanged,this),e.core.domHandler.addEvent("editEventTimeEnd","change",this.endChanged,this),e.core.domHandler.addEvent("editEventDuration","change",this.editEventDurationChanged,this),e.core.domHandler.addEvent("editEventTimeStart","blur",this.showFakeTimeStart,this),e.core.domHandler.addEvent("editEventTimeEnd","blur",this.showFakeTimeEnd,this),this.calendarEvent.summary?document.getElementById("editEventTitle").value=this.calendarEvent.summary:document.getElementById("editEventTitle").value="",this.calendarEvent.location?document.getElementById("editEventLocation").value=this.calendarEvent.location:document.getElementById("editEventLocation").value="",new e.Helper().isMobile()||(document.getElementById("remindersTitle").innerHTML+="  ("+e.core.translate.get("Hold CTRL/CMD while clicking on the reminders you want.")+")"),this.updateFakes(),this.updateRealDateInputs(),this.calendarEvent.description?document.getElementById("editEventDetails").value=this.calendarEvent.description:document.getElementById("editEventDetails").value="",this.updateRecurrenceHtml(),t=document.getElementById("editEventCalendar"),this.calendarChanged=this.calendarChanged.bind(this),t.onchange=this.calendarChanged;var r="",s;for(s=0;s<e.core.calendars.length;s++)e.core.calendars[s].canEditCalendarEvents==1&&(r+="<option value='"+e.core.calendars[s].id+"' > "+e.core.calendars[s].name+" </option > ");t.innerHTML=r,t.value=this.calendarEvent.calendarId,e.core.domHandler.addClickEvent("editEventColor",this.showColorPickerWindow,this),document.getElementById("colorPickerArea").style.backgroundColor=e.core.settings.theme.colorBackground,document.getElementById("editEventColor").style.backgroundColor=e.core.helper.getEventColor2(this.calendarEvent),t=new Piklor,t.init(document.getElementById("colorPickerArea"),e.core.settings.theme.eventColors,{open:document.getElementById("editEventColor"),closeOnBlur:!0},"");var o=this;t.colorChosen(function(l,c){l&&(o.calendarEvent.extraColorId=e.core.settings.theme.eventColors.indexOf(l),o.calendarEvent.extraColorId==e.core.getCalendar(o.calendarEvent.calendarId).colorId&&(o.calendarEvent.extraColorId=void 0),document.getElementById("editEventColor").style.backgroundColor=e.core.helper.getEventColor2(o.calendarEvent)),o.hideColorPickerWindow()})}calendarChanged(t){t=document.getElementById("editEventCalendar").value,document.getElementById("editEventColor").style.backgroundColor=e.core.helper.getCalendarColor(e.core.getCalendar(t)),this.calendarEvent.extraColorId=void 0}onSuccess(t){this.isShowingDatePickerForStartTime?(document.getElementById("editEventTimeStart").value=this.timeToValue(t),this.calendarEvent.startDateTime=t,this.startChanged(null)):(document.getElementById("editEventTimeEnd").value=this.timeToValue(t),this.calendarEvent.endDateTime=t,this.endChanged(null))}onError(t){}showDatePicker(t){this.isShowingDatePickerForStartTime=t,t={date:t?this.calendarEvent.startDateTime:this.calendarEvent.endDateTime,mode:"time",androidTheme:1,is24Hour:e.core.commonUserSettings.use24hFormat},this.onSuccess=this.onSuccess.bind(this),this.onError=this.onError.bind(this),datePicker.show(t,this.onSuccess,this.onError)}showDatePickerForStartTime(t){t.preventDefault(),this.showDatePicker(!0)}showDatePickerForEndTime(t){t.preventDefault(),this.showDatePicker(!1)}showMessage(t,r){var s=this;document.getElementById("message").style.display="table",document.getElementById("messageText").innerText=t,e.core.domHandler.addClickEvent("messageOk",function(){s.hideMessage(r)},this)}hideMessage(t){document.getElementById("message").style.display="none",t&&e.core.appStateHandler.back()}showColorPickerWindow(){e.core.commonUserSettings.licenceColorPicker?document.getElementById("colorPickerWindow").style.display="table":(document.getElementById("noColorPickerWindow").style.display="table",e.core.domHandler.addClickEvent("gotoShopOk",this.gotoShop,this),e.core.domHandler.addClickEvent("gotoShopCancel",this.hideNoColorPickerWindow,this))}hideColorPickerWindow(){document.getElementById("colorPickerWindow").style.display="none"}hideNoColorPickerWindow(){document.getElementById("noColorPickerWindow").style.display="none"}gotoShop(){e.core.appStateHandler.viewShop()}updateRecurrenceHtml(){this.canEditReccur=!0,this.calendarEvent.isRecurring&&this.editType!=e.EventEditType.ThisOnly&&(document.getElementById("editEventRecurrence").innerHTML="YES (Press to edit)"),this.calendarEvent.isRecurring&&this.editType==e.EventEditType.ThisOnly&&(this.canEditReccur=!1,document.getElementById("editEventRecurrence").innerHTML=e.core.translate.get("Not possible"),document.getElementById("editEventRecurrence").setAttribute("style","cursor: default"),document.getElementById("editEventRecurrence").removeEventListener("touchend",this.editRecurrency,!1),document.getElementById("editEventRecurrence").removeEventListener("mouseup",this.editRecurrency,!1)),this.calendarEvent.isRecurring||(document.getElementById("editEventRecurrence").innerHTML="NO (Press to add)")}autoAdjustSoNotNegativeTime(){this.calendarEvent.startDateTime>=this.calendarEvent.endDateTime&&(this.calendarEvent.endDateTime=D(this.calendarEvent.startDateTime).add(1,"hours").toDate(),this.updateRealDateInputs(),this.updateFakes())}showFakeTimeStart(){this.autoAdjustSoNotNegativeTime()}showFakeTimeEnd(){this.calendarEvent.startDateTime>=this.calendarEvent.endDateTime&&(this.calendarEvent.startDateTime=D(this.calendarEvent.endDateTime).add(-1,"hours").toDate(),this.updateRealDateInputs(),this.updateFakes())}dateToValue(t){return this.timezoneOffset=6e4*t.getTimezoneOffset(),new Date(t.getTime()-this.timezoneOffset).toISOString().replace("Z","").split("T")[0]}timeToValue(t){return this.timezoneOffset=6e4*t.getTimezoneOffset(),new Date(t.getTime()-this.timezoneOffset).toISOString().replace("Z","").split("T")[1]}valueToDate(t){return new Date(new Date(t).getTime()+this.timezoneOffset)}rruleFetched(t){t&&(this.originalRRule=this.calendarEvent.rruleToSave=t)}hide(){e.core.appStateHandler.editEventControlIsShowing=!1,e.core.domHandler.showCanvas(),e.core.domHandler.removeElement(this.editPage.id)}startChanged(t){var r=this;new e.Helper().isAndroid()?(this.readDateTimeToCalendarEvent(),this.updateEndBasedOnDuration(),this.autoAdjustSoNotNegativeTime(),t.target.blur()):(this.lastStartChangedOnWeb=e.core.getTimeStamp(),this.startChangedOnWeb=this.startChangedOnWeb.bind(this),window.setTimeout(function(){r.startChangedOnWeb(t)},700))}startChangedOnWeb(t){e.core.getTimeStamp()<this.lastStartChangedOnWeb+600||(this.readDateTimeToCalendarEvent(),this.updateEndBasedOnDuration(),this.autoAdjustSoNotNegativeTime(),window.setTimeout(t.target.focus,50))}endChanged(t){var r=this;new e.Helper().isAndroid()?(this.readDateTimeToCalendarEvent(),this.autoAdjustSoNotNegativeTime(),this.updateFakes(),this.updateDuration(),t.target.blur()):(this.lastEndChangedOnWeb=e.core.getTimeStamp(),this.endChangedOnWeb=this.endChangedOnWeb.bind(this),window.setTimeout(function(){r.endChangedOnWeb(t)},700))}endChangedOnWeb(t){e.core.getTimeStamp()<this.lastEndChangedOnWeb+600||(this.readDateTimeToCalendarEvent(),this.autoAdjustSoNotNegativeTime(),this.updateFakes(),this.updateDuration(),window.setTimeout(t.target.focus,50))}updateFakes(){document.getElementById("fakeDateStart").innerText=e.core.helper.GetDateWithWeekDay(this.calendarEvent.startDateTime),document.getElementById("fakeDateEnd").innerText=e.core.helper.GetDateWithWeekDay(this.calendarEvent.endDateTime)}updateRealDateInputs(){document.getElementById("editEventDateStart").value=this.dateToValue(this.calendarEvent.startDateTime),document.getElementById("editEventTimeStart").value=this.timeToValue(this.calendarEvent.startDateTime),document.getElementById("editEventDateEnd").value=this.dateToValue(this.calendarEvent.endDateTime),document.getElementById("editEventTimeEnd").value=this.timeToValue(this.calendarEvent.endDateTime)}validateStartAndEnd(){return this.calendarEvent.startDateTime>=this.calendarEvent.endDateTime?(this.showMessage("Please enter a valid end time.",!1),!1):!0}validateTitle(t){return t==null||t.length==0?(this.showMessage("Please enter a title.",!1),!1):!0}editEventOk(t){if(t.preventDefault(),t=document.getElementById("editEventTitle").value,this.validateTitle(t)&&(this.readDateTimeToCalendarEvent(),this.validateStartAndEnd()&&!(300>e.core.getTimeStamp()-this.timestamp))){var r;for(this.calendarEvent.reminders=[],r=0;r<this.remindersSelectElement.options.length;r++)this.remindersSelectElement.options[r].selected&&this.calendarEvent.reminders.push(new e.Reminder(+this.remindersSelectElement.options[r].value));this.calendarEvent.summary=t,this.calendarEvent.location=document.getElementById("editEventLocation").value,this.calendarEvent.description=document.getElementById("editEventDetails").value,t=this.calendarEvent.calendarId,r=document.getElementById("editEventCalendar").value,e.core.commonUserSettings.calendarIdLastAddedTo=r,e.core.persistChangesToCalendars(),this.editType!=e.EventEditType.New&&t!=r?(e.core.calendarDataProxy.deleteEvent(this.calendarEvent,this.editType,!0),this.calendarEvent.calendarId=r,e.core.calendarDataProxy.addNewEvent(this.calendarEvent,!0)):(this.calendarEvent.calendarId=r,this.editType==e.EventEditType.New?e.core.calendarDataProxy.addNewEvent(this.calendarEvent,!1):(this.editType==e.EventEditType.DontKnow&&(this.editType=e.EventEditType.AllInSeries),e.core.calendarDataProxy.editExistingEvent(this.calendarEvent,this.editType))),this.calendarEvent.reminders!==void 0&&0<this.calendarEvent.reminders.length&&!e.core.commonUserSettings.hasShownRemindersInfo?(this.showMessage("You have set reminders. Please note that this app relies on your default calendar to show the reminders.",!0),e.core.commonUserSettings.hasShownRemindersInfo=!0):e.core.appStateHandler.back()}}readDateTimeToCalendarEvent(){this.calendarEvent.startDateTime=this.valueToDate(document.getElementById("editEventDateStart").value+"T"+this.addMiliseconds(document.getElementById("editEventTimeStart").value)+"Z"),this.calendarEvent.endDateTime=this.valueToDate(document.getElementById("editEventDateEnd").value+"T"+this.addMiliseconds(document.getElementById("editEventTimeEnd").value)+"Z"),e.core.zopHandler.updateStartEndZOP(this.calendarEvent),e.core.calendarEventHandler.gradeCalendarEvent(this.calendarEvent),e.core.calendarEventHandler.reorderAllEvents()}addMiliseconds(t){return t.length==5?t+":00.000":t.length==8?t+".000":t}editEventCancel(t){t.preventDefault(),this.calendarEvent.startDateTime=this.originalStartDate,this.calendarEvent.endDateTime=this.originalEndDate,this.calendarEvent.rruleToSave=this.originalRRule,this.calendarEvent.isRecurring=this.originalIsRecurring,e.core.zopHandler.updateStartEndZOP(this.calendarEvent),e.core.calendarEventHandler.gradeCalendarEvent(this.calendarEvent),e.core.calendarEventHandler.reorderAllEvents(),e.core.appStateHandler.back()}doNothing(t){}editEventDurationChanged(t){t=e.core.domHandler.getSelectOptions(this.durationSelectElement),this.calendarEvent.endDateTime=D(this.calendarEvent.startDateTime).add("milliseconds",t).toDate(),this.updateRealDateInputs(),this.updateFakes()}updateEndBasedOnDuration(){this.calendarEvent.endDateTime=D(this.calendarEvent.startDateTime).add("milliseconds",this.previousDuration).toDate(),this.updateRealDateInputs(),this.updateFakes()}updateDuration(){this.previousDuration=this.calendarEvent.endDateTime.getTime()-this.calendarEvent.startDateTime.getTime(),e.core.domHandler.addDurationsToSelectNode(this.durationSelectElement,this.calendarEvent.startDateTime,this.calendarEvent.endDateTime)}updateReminders(){this.calendarEvent.reminders==null&&(this.calendarEvent.reminders=[]),e.core.domHandler.addRemindersToSelectNode(this.remindersSelectElement,this.calendarEvent.reminders)}setByDuration(t){}setByTime(t){}editRecurrency(t){this.canEditReccur&&e.core.appStateHandler.editRecurrence(this.calendarEvent)}moveEvent(t){this.readDateTimeToCalendarEvent(),this.hide(),e.core.appStateHandler.startMoveCalendarEventObject(this.calendarEvent,e.core.domHandler.screenWidth/2,e.core.domHandler.screenHeight/2,e.EventEditType.DontKnow)}}e.EditEventControl=W;class J{constructor(){this.pageHtml='<div id="editRecurrenceTopBar" class="topBar">    <button id="editRecurrenceCancel" class="topBarButton" style="width:50%"><img src="images/cross.svg" class="topBarImage"/></span><span>{#Cancel#}</span></button>    <button id="editRecurrenceOk" class="topBarButton" style="width:50%"><img src="images/check.svg" class="topBarImage"/></span><span>{#Ok#}</span></button></div><div class="pageContent" id="editRecurrenceArea" style="float:left; background-color: #E9E9E9;">        <div class="editRecurrencePopupContent pageTopPadding" id="editRecurrencePopupContent">            <div class="miniTitle sizedTitle">{#Frequency#}</div>            <div style="position: relative"><div class="inputBox">                <select class="base inputBase" id="editRecurrenceFrequency">                    <option class="inputOption" value="none">{#Not repeated#}</option>                    <option class="inputOption" value="day">{#Day#}</option>                    <option class="inputOption" value="week">{#Week#}</option>                    <option class="inputOption" value="month">{#Month#}</option>                    <option class="inputOption" value="year">{#Year#}</option>                </select>            </div></div>            <div id="daySelectionArea">                <div class="miniTitle sizedTitle">{#Every X day(s)#}</div>                <div style="position: relative"><div class="inputBox">                    <input type="number" class="base inputBase" name="task" id="dayInterval">                </div></div>            </div>            <div id="weekSelectionArea">                <div class="miniTitle sizedTitle">{#Every X week(s)#}</div>                <div style="position: relative"><div class="inputBox">                    <input type="number" class="base inputBase" name="task" id="weekInterval">                </div></div>                <div class="miniTitle sizedTitle">{#Week days#}</div>                <div style="position: relative"><div class="inputBox">                    <select id="weekDays" class="base inputBase maybeBig" multiple="multiple">                    </select>                </div></div>            </div>            <div id="monthSelectionArea">                <div class="miniTitle sizedTitle">{#Every X month(s)#}</div>                <div style="position: relative"><div class="inputBox">                    <input type="number" class="base inputBase" name="task" id="monthInterval">                </div></div>                <div class="miniTitle sizedTitle">{#Type#}</div>                <div style="position: relative"> <div class="inputBox">                     <select class="base inputBase" id="editRecurrenceMonthType">                        <option class="inputOption" value="date">?</option>                        <option class="inputOption" value="weekday">?</option>                    </select>                </div></div>            </div>            <div id="yearSelectionArea">                <div class="miniTitle sizedTitle">{#Every X year(s)#}</div>                <div style="position: relative"><div class="inputBox">                    <input type="number" class="base inputBase" name="task" id="yearInterval">                </div></div>            </div>            <div class="miniTitle sizedTitle">{#End#}</div>                <div style="position: relative"><div class="inputBox">                     <select class="base inputBase" id="editRecurrenceEnd">                         <option class="inputOption" value="forever">{#Forever#}</option>                         <option class="inputOption" value="untildate">{#End before a date#}</option>                         <option class="inputOption" value="numberoftimes">{#Repeat X times#}</option>                    </select>                </div></div>                <div class="miniTitle sizedTitle" id="numberoftimes_input_title">{#Repeat X times#}</div>                <div style="position: relative"><div class="inputBox">                     <input type="number" class="base inputBase" name="task" id="numberoftimes_input">                </div></div>                <div class="miniTitle sizedTitle" id="untildate_input_title">{#End before#}</div>                <div style="position: relative"><div class="inputBox">                     <input type="date" class="base inputBase inputDate" name="task" id="untildate_input">                </div></div>            </div>        </div></div><br/><br/>'}reshow(){this.show()}init(t){this.calendarEvent=t}show(){var t=this;e.core.calendarDataProxy.analyticsPage("Edit recurrence page"),this.editPage=e.core.domHandler.pageHtmlFormatHelper("editRecurrence",this.pageHtml),this.editPage.style.display="block",e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements=e.core.domHandler.resizeDomElements.bind(e.core.domHandler),window.setTimeout(e.core.domHandler.resizeDomElements,0),window.setTimeout(e.core.domHandler.resizeDomElements,100);var s=(e.core.settings.titleWidth/e.core.ratio-24)/2;document.getElementById("editRecurrenceOk").style.padding=s+"px",document.getElementById("editRecurrenceCancel").style.padding=s+"px",document.getElementById("editRecurrenceArea").style.top="54px",this.editRecurrenceFrequency=document.getElementById("editRecurrenceFrequency"),this.daySelectionArea=document.getElementById("daySelectionArea"),this.weekSelectionArea=document.getElementById("weekSelectionArea"),this.monthSelectionArea=document.getElementById("monthSelectionArea"),this.yearSelectionArea=document.getElementById("yearSelectionArea"),this.dayInterval=document.getElementById("dayInterval"),this.weekInterval=document.getElementById("weekInterval"),this.monthInterval=document.getElementById("monthInterval"),this.yearInterval=document.getElementById("yearInterval"),this.weekDays=document.getElementById("weekDays"),this.editRecurrenceMonthType=document.getElementById("editRecurrenceMonthType"),this.editRecurrenceEnd=document.getElementById("editRecurrenceEnd"),this.numberoftimes_input_title=document.getElementById("numberoftimes_input_title"),this.untildate_input_title=document.getElementById("untildate_input_title"),this.numberoftimes_input=document.getElementById("numberoftimes_input"),this.untildate_input=document.getElementById("untildate_input"),e.core.domHandler.addWeekDaysToSelectNode(this.weekDays),e.core.domHandler.addEvent("editRecurrenceFrequency","change",this.editRecurrenceFrequencyChanged,this),e.core.domHandler.addEvent("editRecurrenceEnd","change",this.editRecurrenceEndChanged,this),e.core.domHandler.addClickEvent("editRecurrenceOk",this.editRecurrenceOk,this),e.core.domHandler.addClickEvent("editRecurrenceCancel",this.editRecurrenceCancel,this),this.loadSettings=this.loadSettings.bind(this),s=e.core.translate.get("On day %1 of each month").replace("%1",""+this.calendarEvent.startDateTime.getDate()),this.editRecurrenceMonthType[0].text=s;var s=e.core.translate.get("On %1, week %2 of each month"),r=Math.floor(this.calendarEvent.startDateTime.getDate()/7)+1,s=s.replace("%1",""+D(this.calendarEvent.startDateTime).format("dddd")),s=s.replace("%2",""+r);this.editRecurrenceMonthType[1].text=s;var o=this;e.core.dynamicallyLoadFile("libs/rrule.js","js",function(){t.calendarEvent.rruleToSave===void 0&&(t.calendarEvent.rruleToSave=new RRule,t.calendarEvent.rruleToSave.options.count=10,t.calendarEvent.rruleToSave.options.freq=e.RRuleFrequencies.Week,t.calendarEvent.rruleToSave.options.interval=1,t.calendarEvent.rruleToSave.options.byweekday=[t.calendarEvent.startDateTime.getDay()-1]),o.loadSettings(t.calendarEvent.rruleToSave)}),this.editPage.style.display="block"}loadSettings(t){if(this.yearInterval.value=t.options.interval.toString(),this.monthInterval.value=t.options.interval.toString(),this.weekInterval.value=t.options.interval.toString(),this.dayInterval.value=t.options.interval.toString(),t.options.freq==e.RRuleFrequencies.Year)this.editRecurrenceFrequency.value="year";else if(t.options.freq==e.RRuleFrequencies.Month)this.editRecurrenceFrequency.value="month",this.editRecurrenceMonthType.value=t.options.bynweekday==null||t.options.bynweekday.length==0?"date":"weekday";else if(t.options.freq==e.RRuleFrequencies.Week){this.editRecurrenceFrequency.value="week";for(var r=0;r<this.weekDays.options.length;r++)this.weekDays.options[r].selected=!1;this.weekDays.options[0].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Monday),this.weekDays.options[1].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Tuesday),this.weekDays.options[2].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Wednesday),this.weekDays.options[3].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Thursday),this.weekDays.options[4].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Friday),this.weekDays.options[5].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Saturday),this.weekDays.options[6].selected=-1<t.options.byweekday.indexOf(e.RRuleWeekDay.Sunday)}else t.options.freq==e.RRuleFrequencies.Day&&(this.editRecurrenceFrequency.value="day");0<t.options.count?(this.editRecurrenceEnd.value="numberoftimes",this.numberoftimes_input.value=t.options.count.toString()):t.options.until!==void 0&&t.options.until!==null?(this.editRecurrenceEnd.value="untildate",this.untildate_input.value=D(t.options.until).format("YYYY-MM-DD")):this.editRecurrenceEnd.value="forever",this.editRecurrenceEndChanged(null),this.editRecurrenceFrequencyChanged(null)}hide(){e.core.domHandler.removeElement(this.editPage.id)}editRecurrenceFrequencyChanged(t){this.daySelectionArea.style.display="none",this.weekSelectionArea.style.display="none",this.monthSelectionArea.style.display="none",this.yearSelectionArea.style.display="none",this.editRecurrenceFrequency.value=="day"&&(this.daySelectionArea.style.display="block"),this.editRecurrenceFrequency.value=="week"&&(this.weekSelectionArea.style.display="block"),this.editRecurrenceFrequency.value=="month"&&(this.monthSelectionArea.style.display="block"),this.editRecurrenceFrequency.value=="year"&&(this.yearSelectionArea.style.display="block")}editRecurrenceEndChanged(t){this.untildate_input.style.display="none",this.numberoftimes_input.parentElement.parentElement.style.display="none",this.untildate_input_title.style.display="none",this.numberoftimes_input_title.style.display="none",this.editRecurrenceEnd.value=="numberoftimes"&&(this.numberoftimes_input.parentElement.parentElement.style.display="block",this.numberoftimes_input_title.style.display="block"),this.editRecurrenceEnd.value=="untildate"&&(this.untildate_input.style.display="block",this.untildate_input_title.style.display="block")}editRecurrenceOk(t){if(t=new RRule,this.editRecurrenceFrequency.value=="year")t.options.freq=e.RRuleFrequencies.Year,t.options.interval=this.yearInterval.valueAsNumber;else if(this.editRecurrenceFrequency.value=="month"){if(t.options.freq=e.RRuleFrequencies.Month,t.options.interval=this.monthInterval.valueAsNumber,this.editRecurrenceMonthType.value!="date")if(this.editRecurrenceMonthType.value=="weekday"){var r=Math.floor(this.calendarEvent.startDateTime.getDate()/7)+1;t.options.bynweekday=[],t.options.bynweekday.push(r),t.options.bynweekday.push(this.calendarEvent.startDateTime.getDay()-1)}else throw"not date or weekday"}else this.editRecurrenceFrequency.value=="week"?(t.options.freq=e.RRuleFrequencies.Week,t.options.byweekday=[],t.options.interval=this.weekInterval.valueAsNumber,this.weekDays.options[0].selected&&t.options.byweekday.push(e.RRuleWeekDay.Monday),this.weekDays.options[1].selected&&t.options.byweekday.push(e.RRuleWeekDay.Tuesday),this.weekDays.options[2].selected&&t.options.byweekday.push(e.RRuleWeekDay.Wednesday),this.weekDays.options[3].selected&&t.options.byweekday.push(e.RRuleWeekDay.Thursday),this.weekDays.options[4].selected&&t.options.byweekday.push(e.RRuleWeekDay.Friday),this.weekDays.options[5].selected&&t.options.byweekday.push(e.RRuleWeekDay.Saturday),this.weekDays.options[6].selected&&t.options.byweekday.push(e.RRuleWeekDay.Sunday)):this.editRecurrenceFrequency.value=="day"&&(t.options.freq=e.RRuleFrequencies.Day,t.options.interval=this.dayInterval.valueAsNumber);t.options.count=void 0,t.options.until=void 0,this.editRecurrenceEnd.value=="untildate"?t.options.until=new Date(this.untildate_input.value):this.editRecurrenceEnd.value=="numberoftimes"&&(t.options.count=+this.numberoftimes_input.value),this.calendarEvent.rruleToSave=t,this.calendarEvent.isRecurring=this.editRecurrenceFrequency.value!=="none",this.hide(),history.back()}editRecurrenceCancel(t){this.hide(),history.back()}}e.EditRecurrenceControl=J;class Me{constructor(){this.pageHtml=`<div id="editRecurrenceMenu" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div id="editRecurrenceOnlyOne" class="base menuItem">{#Only edit this event#}</div>    <div id="editRecurrenceAll" class="base menuItem">{#Edit the whole series#}</div>    <!--<div id="editRecurrenceFuture" class="base menuItem">{#Edit this and future events#}</div>-->    <div id="editRecurrenceCancel" class="base menuItem">{#Cancel#}</div></div></div></div><div id="noEditMenu" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div class="base menuItemInfo">{#Sorry, this event can't be edited#}</div>    <div id="noEditOk" class="base menuItem">{#Ok#}</div></div></div></div><div id="deleteConfirmPopup" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div class="base menuItem" style="text-align:center">{#Delete?#}</div>    <div>        <button id="deleteConfirmCancel" class="topBarButton" style="width:50%"><img src="images/cross.svg" class="topBarImage"/><span>{#Cancel#}</span></button>        <button id="deleteConfirmOk" class="topBarButton" style="width:50%"><img src="images/check.svg" class="topBarImage"/><span>{#Ok#}</span></button>    </div></div></div></div><div id="deleteRecurrenceMenu" class="outer" style="display: none" > <div class="middle" > <div class="inner menu" >    <div id="deleteRecurrenceOnlyOne" class="base menuItem">{#Only delete this event#}</div>    <div id="deleteRecurrenceAll" class="base menuItem">{#Delete the whole series#}</div>    <!--<div id="deleteRecurrenceFuture" class="base menuItem">{#Delete this and future events#}</div>-->    <div id="deleteRecurrenceCancel" class="base menuItem">{#Cancel#}</div></div></div></div><div id="viewEventTopBar" class="topBar">    <button id="viewEventBack" class="topBarButton" style="width:39%">        _insertBackButtonImage        <span id="viewEventBackText" style="color: _buttonImageColor">{#Back#}</span>    </button>    <!--<button id="viewEventMove" class="topBarButton" style="width:?%"><img src="images/clock.svg" class="topBarImage"/><span id="viewEventMoveText">{#Move#}</span></button>-->    <button id="viewEventDelete" class="topBarButton" style="width:23%">        _insertTrashButtonImage    </button>    <button id="viewEventEdit" class="topBarButton" style="width:38%">        _insertPencilButtonImage        <span id="viewEventEditText" style="color: _buttonImageColor">{#Edit#}</span>    </button></div><div class="pageContent" id="viewEventArea" style="float:left">    <div id="viewEventTitle" class="topBarTitleX" style="width:100%"></div>    <div class="pagePadding pageTopPadding" style="padding-left:20px;padding-right:20px;">        <div class="editEventPopupContent" id="editEventPopupContent">            <br>            <br>            <div>                <div class="miniTitle">{#When#}</div>                <div class="pageContentText" id="viewEventTime1"></div>                <div class="pageContentText" id="viewEventTime2"></div>                <br>            </div>            <div id="viewEventBoxWhere">                <div class="miniTitle" id="viewEventTitleWhere">{#Where#}</div>                <div class="pageContentText" id="viewEventLocation"></div>                <br>            </div>            <div id="viewEventBoxDetails">                <div class="miniTitle" id="viewEventTitleDetails">{#Details#}</div>                <div class="pageContentText" id="viewEventDetails" style="white-space: pre-wrap;"></div>                <br>            </div>            <div>                <div class="miniTitle">{#Calendar#}</div>                <div class="pageContentText" id="viewEventCalendar"></div>                <br>            </div>            <div id="viewEventBoxReminders">                <div class="miniTitle">{#Reminders#}</div>                <div class="pageContentText" id="viewEventReminders"></div>                <br>            </div>            <div id="viewEventBoxInvited">                <div class="miniTitle">{#Invited#}</div>                <div class="pageContentText" id="viewEventInvited"></div>                <br>            </div>        </div>    </div></div><br/><br/>`}init(t){this.calendarEvent=t}reshow(){this.show()}show(){e.core.domHandler.hideCanvas(),e.core.calendarDataProxy.analyticsPage("View event page");var t=e.core.domHandler.insertImages(this.pageHtml,e.core.helper.getEventTextColor(this.calendarEvent,e.core.getCalendar(this.calendarEvent.calendarId)));this.viewPage=e.core.domHandler.pageHtmlFormatHelper("viewEvent",t),e.core.domHandler.resizeDomElements(e.core.helper.getEventColor2(this.calendarEvent)),e.core.domHandler.resizeDomElements(e.core.helper.getEventColor2(this.calendarEvent)),t=(e.core.settings.titleWidth/e.core.ratio-24)/2,document.getElementById("viewEventBack").style.padding=t+"px",document.getElementById("viewEventEdit").style.padding=t+"px",document.getElementById("viewEventDelete").style.padding=t+"px",document.getElementById("viewEventArea").style.top="54px",e.core.showBackButtons()?e.core.domHandler.addClickEvent("viewEventBack",this.viewEventBack,this):(e.core.domHandler.removeElement("viewEventBack"),document.getElementById("viewEventEdit").style.width="50%",document.getElementById("viewEventDelete").style.width="50%"),e.core.calendarEventHandler.canEditEvent(this.calendarEvent)?(e.core.domHandler.addClickEvent("viewEventEdit",this.viewEventEdit,this),e.core.domHandler.addClickEvent("viewEventDelete",this.viewEventDelete,this)):(e.core.domHandler.removeElement("viewEventEdit"),e.core.domHandler.removeElement("viewEventDelete"),e.core.showBackButtons()&&(document.getElementById("viewEventBack").style.width="100%")),t=document.createElement("a"),t.href="https://web.archive.org/web/20190808203716/http://maps.google.com/?q="+this.calendarEvent.location,t.className="blueLink",e.core.domHandler.addElement(t,"viewEventLocation"),this.viewPage.style.display="block",document.getElementById("viewEventTitle").textContent=this.calendarEvent.summary,document.getElementById("viewEventTitle").style.color=e.core.helper.getEventTextColor(this.calendarEvent,e.core.getCalendar(this.calendarEvent.calendarId)),t.textContent=this.calendarEvent.location,document.getElementById("viewEventTime1").textContent=e.core.helper.GetDateTimeLine1(this.calendarEvent.startDateTime,this.calendarEvent.endDateTime),document.getElementById("viewEventTime2").textContent=e.core.helper.GetDateTimeLine2(this.calendarEvent.startDateTime,this.calendarEvent.endDateTime),document.getElementById("viewEventDetails").textContent=this.calendarEvent.description,document.getElementById("viewEventCalendar").textContent=e.core.getCalendar(this.calendarEvent.calendarId).name,(this.calendarEvent.location==null||this.calendarEvent.location.length===0)&&(document.getElementById("viewEventBoxWhere").hidden=!0),(this.calendarEvent.description==null||this.calendarEvent.description.length===0)&&(document.getElementById("viewEventBoxDetails").hidden=!0),document.getElementById("viewEventReminders").textContent=this.remindersToString(),(this.calendarEvent.reminders==null||this.calendarEvent.reminders.length===0)&&(document.getElementById("viewEventBoxReminders").hidden=!0),(this.calendarEvent.invited==null||this.calendarEvent.invited.length===0)&&(document.getElementById("viewEventBoxInvited").hidden=!0),this.resize()}resize(){var t;t=this.verifySize("Back",!1),t=this.verifySize("Edit",t),t=this.verifySize("Back",t),this.verifySize("Edit",t)}remindersToString(){if(this.calendarEvent.reminders==null||this.calendarEvent.reminders.length==0)return"None";var t,r="";for(t=0;t<this.calendarEvent.reminders.length;t++)r+=this.reminderToString(this.calendarEvent.reminders[t]),t<this.calendarEvent.reminders.length-1&&(r+=", ");return r}reminderToString(t){return t.minutes==60?"1 hour":t.minutes==90?"1.5 hours":t.minutes==120?"2 hours":t.minutes==180?"3 hours":t.minutes==360?"6 hours":t.minutes==720?"12 hours":t.minutes==1440?"24 hours":t.minutes==2880?"2 days":t.minutes==10080?"1 week":t.minutes+" minutes"}verifySize(t,r){if(document.getElementById("viewEvent"+t)){var l=document.getElementById("viewEvent"+t),s=document.getElementById("viewEvent"+t+"Text"),o=l.offsetWidth,o=o-(l.offsetHeight-10),l=e.core.domHandler.getTextLength(s.textContent,s.style.fontSize);return o<l+18||r?(document.getElementById("viewEvent"+t+"Text").style.display="none",!0):(document.getElementById("viewEvent"+t+"Text").style.display="inline",!1)}}hide(){e.core.appStateHandler.viewEventControlIsShowing=!1,e.core.domHandler.showCanvas(),e.core.domHandler.removeElement(this.viewPage.id)}viewEventBack(t){e.core.appStateHandler.back()}viewEventDelete(t){e.core.calendarEventHandler.canEditEvent(this.calendarEvent)&&(this.calendarEvent.isRecurring&&this.calendarEvent.recurringEventId?this.showDeleteRecurrenceMenu():this.showDeleteConfirm())}deleteEvent(){e.core.appStateHandler.back(),e.core.appStateHandler.deleteEvent(this.calendarEvent,e.EventEditType.DontKnow)}viewEventEdit(t){e.core.calendarEventHandler.canEditEvent(this.calendarEvent)&&(this.calendarEvent.isRecurring&&this.calendarEvent.recurringEventId?e.core.calendarDataProxy.canEditRecurring(this.calendarEvent)?this.showEditRecurrenceMenu():this.showNoEditMenu():(e.core.appStateHandler.back(),e.core.appStateHandler.editEvent(this.calendarEvent,e.EventEditType.DontKnow)))}showNoEditMenu(){document.getElementById("noEditMenu").style.display="table",e.core.domHandler.addClickEvent("noEditOk",this.hideNoEditMenu,this)}hideNoEditMenu(){document.getElementById("noEditMenu").style.display="none"}showDeleteConfirm(){document.getElementById("deleteConfirmPopup").style.display="table",e.core.domHandler.addClickEvent("deleteConfirmOk",this.deleteEvent,this),e.core.domHandler.addClickEvent("deleteConfirmCancel",this.hideDeleteConfirm,this)}showEditRecurrenceMenu(){document.getElementById("editRecurrenceMenu").style.display="table",e.core.domHandler.addClickEvent("editRecurrenceOnlyOne",this.editRecurrenceOnlyOne,this),e.core.domHandler.addClickEvent("editRecurrenceAll",this.editRecurrenceAll,this),e.core.domHandler.addClickEvent("editRecurrenceCancel",this.hideEditRecurrenceMenu,this)}editRecurrenceOnlyOne(){this.hideEditRecurrenceMenu(),e.core.appStateHandler.back(),e.core.appStateHandler.editEvent(this.calendarEvent,e.EventEditType.ThisOnly)}editRecurrenceAll(){this.hideEditRecurrenceMenu(),e.core.appStateHandler.back(),e.core.appStateHandler.editEvent(this.calendarEvent,e.EventEditType.AllInSeries)}editRecurrenceFuture(){this.hideEditRecurrenceMenu(),e.core.appStateHandler.back(),e.core.appStateHandler.editEvent(this.calendarEvent,e.EventEditType.ThisAndFuture)}hideEditRecurrenceMenu(){document.getElementById("editRecurrenceMenu").style.display="none"}hideDeleteConfirm(){document.getElementById("deleteConfirmPopup").style.display="none"}showDeleteRecurrenceMenu(){document.getElementById("deleteRecurrenceMenu").style.display="table",e.core.domHandler.addClickEvent("deleteRecurrenceOnlyOne",this.deleteRecurrenceOnlyOne,this),e.core.domHandler.addClickEvent("deleteRecurrenceAll",this.deleteRecurrenceAll,this),e.core.domHandler.addClickEvent("deleteRecurrenceCancel",this.hideDeleteRecurrenceMenu,this)}deleteRecurrenceOnlyOne(){this.hideDeleteRecurrenceMenu(),e.core.appStateHandler.back(),e.core.appStateHandler.deleteEvent(this.calendarEvent,e.EventEditType.ThisOnly)}deleteRecurrenceAll(){this.hideDeleteRecurrenceMenu(),e.core.appStateHandler.back(),e.core.appStateHandler.deleteEvent(this.calendarEvent,e.EventEditType.AllInSeries)}deleteRecurrenceFuture(){this.hideDeleteRecurrenceMenu(),e.core.appStateHandler.back(),e.core.appStateHandler.deleteEvent(this.calendarEvent,e.EventEditType.ThisAndFuture)}hideDeleteRecurrenceMenu(){document.getElementById("deleteRecurrenceMenu").style.display="none"}viewEventMove(t){this.hide(),e.core.calendarEventHandler.canEditEvent(this.calendarEvent)&&e.core.appStateHandler.startMoveCalendarEventObject(this.calendarEvent,e.core.domHandler.screenWidth/2,e.core.domHandler.screenHeight/2,e.EventEditType.DontKnow)}}e.ViewEventControl=Me;class St{constructor(){this.monthesShort=new e.Hashtable,this.monthesLong=new e.Hashtable,this.weekdayShort=new e.Hashtable,this.weekdayLong=new e.Hashtable}colorToRGBA(t,r){var s=parseInt(t.substr(1),16);return"rgba("+(s>>16&255)+","+(s>>8&255)+","+(s&255)+","+r+")"}GetDateTimeLine1(t,r){var s=D(t),o=D(r);return this.IsSameDay(s,o)?s.format("dddd")+", "+s.format("LL"):s.hours()==0&&s.minutes()?s.format("dddd")+", "+s.format("LL")+" - ":s.format("dddd")+", "+s.format("LLL")+" - "}GetDateTimeLine2(t,r){var s=D(t),o=D(r);return this.IsSameDay(s,o)?s.hours()==0&&s.minutes()==0&&(o.hours()==23&&o.minutes()==59||o.hours()==0&&o.minutes()==0)?"":s.format("LT")+" - "+o.format("LT"):s.hours()==0&&s.minutes()?o.format("dddd")+", "+o.format("LL"):o.format("dddd")+", "+o.format("LLL")}IsSameDay(t,r){return t.format("L")==r.clone().subtract(1,"minutes").format("L")}GetDateWithWeekDay(t){return t=D(t),t.format("dddd")+", "+t.format("LL")}GetTime(t){return D(t).format("LT")}isNullOrEmpty(t){return!t||t.length===0}isAndroid(){return navigator.userAgent.match(/Android/i)}isBlackBerry(){return navigator.userAgent.match(/BlackBerry/i)}isiOS(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)}isOpera(){return navigator.userAgent.match(/Opera Mini/i)}isWindows(){return navigator.userAgent.match(/IEMobile/i)}isMobile(){return this.isAndroid()||this.isBlackBerry()||this.isiOS()||this.isOpera()||this.isWindows()}sortCalendars(){e.core.calendars.sort(function(l,c){return c.id==e.core.calendarPrimaryId?1:l.id==e.core.calendarPrimaryId?-1:c.canEditCalendarEvents&&!l.canEditCalendarEvents?1:l.canEditCalendarEvents&&!c.canEditCalendarEvents?-1:l.allEventsAreFullDay&&!c.allEventsAreFullDay?1:c.allEventsAreFullDay&&!l.allEventsAreFullDay?-1:l.countEvents-c.countEvents});for(var t=0,r=e.core.settings.theme.eventColors.length-1,s=0;s<e.core.calendars.length;s++)if(e.core.calendars[s].allEventsAreFullDay&&!e.core.calendars[s].canEditCalendarEvents?(e.core.calendars[s].colorId=r,r--):(e.core.calendars[s].colorId=t,t++),0>e.core.calendars[s].colorId&&(e.core.calendars[s].colorId=0),e.core.calendars[s].colorId>e.core.settings.theme.eventColors.length&&(e.core.calendars[s].colorId=e.core.settings.theme.eventColors.length-1),e.core.commonUserSettings.licenceColorPicker&&e.core.commonUserSettings.savedCalendarColors&&e.core.commonUserSettings.savedCalendarColors.containsKey(e.core.calendars[s].id)){var o=e.core.commonUserSettings.savedCalendarColors[e.core.calendars[s].id];-1<Number(o)&&100>Number(o)&&(e.core.calendars[s].colorId=o)}}replaceAll(t,r,s){return t.split(r).join(s)}canShowDatePicker(){return!!e.core.isCordovaApp}setCalendarColorId(t,r){var s=e.core.commonUserSettings.savedCalendarColors;e.core.commonUserSettings.licenceColorPicker&&s&&s.containsKey(t)?s[t]=r:s.add(t,r),e.core.commonUserSettings.savedCalendarColors=s}getEventColor2(t){return this.getEventColor(t,e.core.getCalendar(t.calendarId))}getEventTextColor(t,r){var s=e.core.settings.theme.eventTextColors[r.colorId%e.core.settings.theme.eventColors.length];return t&&t.androidColorNum!=null&&t.extraColorId==null&&(t.extraColorId=this.getColorIdFromAndroidNum(t.androidColorNum)),t&&t.extraColorId?e.core.settings.theme.eventTextColors[t.extraColorId%e.core.settings.theme.eventTextColors.length]:s}getCalendarColor(t){return e.core.settings.theme.eventColors[t.colorId%e.core.settings.theme.eventColors.length]}getEventColor(t,r){var s=e.core.settings.theme.eventColors[r.colorId%e.core.settings.theme.eventColors.length];return t&&t.androidColorNum!=null&&t.extraColorId==null&&(t.extraColorId=this.getColorIdFromAndroidNum(t.androidColorNum)),t&&t.extraColorId?e.core.settings.theme.eventColors[t.extraColorId%e.core.settings.theme.eventColors.length]:(s===""&&r.colorId===0&&(t==null?s=e.core.settings.theme.eventColorsForFirstCalendar[3]:(s=t.endZOP-t.startZOP,s=s<e.core.zopHandler.zopSizeOfHour-e.core.zopHandler.zopSizeOf5Minutes?e.core.settings.theme.eventColorsForFirstCalendar[4]:s<e.core.zopHandler.zopSizeOfHour+e.core.zopHandler.zopSizeOf5Minutes?e.core.settings.theme.eventColorsForFirstCalendar[3]:s<e.core.zopHandler.zopSizeOfDay-e.core.zopHandler.zopSizeOf5Minutes?e.core.settings.theme.eventColorsForFirstCalendar[2]:s<e.core.zopHandler.zopSizeOfDay+e.core.zopHandler.zopSizeOf5Minutes?e.core.settings.theme.eventColorsForFirstCalendar[1]:e.core.settings.theme.eventColorsForFirstCalendar[0])),s)}getAndroidNumFromColor(t){return t=this.hexToRgb(t),-16777216+(t[0]<<16)+(t[1]<<8)+t[2]}fillLeadingZeros(t,r){var s="000000000"+t;return s.substr(s.length-r)}getColorIdFromAndroidNum(t){t=+t;var r=t>>8&255,s=t&255;t="#"+this.fillLeadingZeros((t>>16&255).toString(16),2)+this.fillLeadingZeros(r.toString(16),2)+this.fillLeadingZeros(s.toString(16),2);for(var r=-1,s=1e5,o,l=0;l<e.core.settings.theme.eventColors.length;l++)o=this.getColorDistance(t,e.core.settings.theme.eventColors[l]),o<s&&(s=o,r=l);return r}getColorDistance(t,r){for(var s=0,o=0,l=this.hexToRgb(t),c=this.hexToRgb(r),p=-1,f=-1,g=-1,m=256,S=-1,M=-1,_=-1,j=256,B=0;B<l.length;B++)o+=(c[B]-l[B])/l.length,f<l[B]&&(f=l[B],p=B),m>l[B]&&(m=l[B],g=B),M<c[B]&&(M=c[B],S=B),j>c[B]&&(j=c[B],_=B);for(o/=2,B=0;B<l.length;B++)f=(l[B]+o-c[B])/50,s+=f*f*f*f;return s+=Math.abs(o/150),p!=S&&(s=1.25*s+.25),g!=_&&(s=1.1*s+.1),s}hexToRgb(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}addUserTimeZoneSetting(t){var r=e.core.commonUserSettings.getCachedTimeZoneDiffInMinutes();return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+r),t}removeUserTimeZoneSetting(t){var r=e.core.commonUserSettings.getCachedTimeZoneDiffInMinutes();return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()-r),t}getNumberFromString(t,r){return isNaN(+t)?r:+t}}e.Helper=St;class Mr{constructor(){this.canvasMenuContext=this.canvasMenu=this.canvasContext=this.canvas=void 0,this.screenLeftForDOM=this.screenTopForDOM=this.screenHeightForDOM=this.screenWidthForDOM=this.screenHeight=this.screenWidth=0,this.backButtonImage='        <span class="topBarImage" style="display: inline-block; fill: _buttonImageColor">            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" height="100%">                <path d="M20 8q0.828 0 1.414 0.586t0.586 1.414q0 0.844-0.594 1.422l-10.578 10.578h31.172q0.828 0 1.414 0.586t0.586 1.414-0.586 1.414-1.414 0.586h-31.172l10.578 10.578q0.594 0.578 0.594 1.422 0 0.828-0.586 1.414t-1.414 0.586q-0.844 0-1.422-0.578l-14-14q-0.578-0.609-0.578-1.422t0.578-1.422l14-14q0.594-0.578 1.422-0.578z" > </path>            </svg>        </span>',this.pencilButtonImage='        <span class="topBarImage" style="display: inline-block; fill: _buttonImageColor">            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="100%" viewBox="0 0 48 48">                <path d="M40.5 0c4.142 0 7.5 3.358 7.5 7.5 0 1.688-0.558 3.246-1.5 4.5l-3 3-10.5-10.5 3-3c1.254-0.942 2.811-1.5 4.5-1.5zM3 34.5l-3 13.5 13.5-3 27.75-27.75-10.5-10.5-27.75 27.75zM33.543 17.043l-21 21-2.585-2.585 21-21 2.585 2.585z"></path>            </svg>        </span>',this.trashButtonImage='        <span class="topBarImage" style="display: inline-block; fill: _buttonImageColor">            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="100%" viewBox="0 0 48 48">                <path d="M20 2h8q2.484 0 4.242 1.758t1.758 4.242v2h8q0.828 0 1.414 0.586t0.586 1.414-0.586 1.414-1.414 0.586h-2v24q0 2.484-1.758 4.242t-4.242 1.758h-20q-2.484 0-4.242-1.758t-1.758-4.242v-24h-2q-0.828 0-1.414-0.586t-0.586-1.414 0.586-1.414 1.414-0.586h8v-2q0-2.484 1.758-4.242t4.242-1.758zM36 38v-24h-24v24q0 0.828 0.586 1.414t1.414 0.586h20q0.828 0 1.414-0.586t0.586-1.414zM28 6h-8q-0.828 0-1.414 0.586t-0.586 1.414v2h12v-2q0-0.828-0.586-1.414t-1.414-0.586z"></path>            </svg>        </span>',this.alreadyFadedIn=!1,this.getTextLength=function(t,r){var s=document.getElementById("ruler");return s.style.fontSize=r,s.innerHTML=t,s.offsetWidth},this.tryCreateHtmlElements()}init(){e.core.mainMenuControl=new e.MainMenuControl,e.core.addButtonControl=new e.AddButtonControl,e.core.zopDrawArea.init(this.canvas,this.canvasContext)}getElement(t){return document.getElementById(t)}addElement(t,r){return this.getElement(t.id)?t:this.getElement(r).appendChild(t)}addDiv(t,r,s){if(this.getElement(t))return this.getElement(t);var o=document.createElement("div");return o.id=t,o.className=r,this.addElement(o,s)}showCanvas(){e.core.calendarDataProxy.analyticsPage("Main page"),this.addElement(this.canvas,document.body.id),this.resetDrawAreaSize_Delayed(),e.core.redraw(!0),window.setTimeout(function(){return e.core.redraw(!0)},100)}insertImages(t,r){var s=e.core.helper.replaceAll(t,"_insertBackButtonImage",this.backButtonImage),s=e.core.helper.replaceAll(s,"_insertPencilButtonImage",this.pencilButtonImage),s=e.core.helper.replaceAll(s,"_insertTrashButtonImage",this.trashButtonImage);return s=e.core.helper.replaceAll(s,"_buttonImageColor",r)}hideCanvas(){this.removeElement(this.canvas.id)}pageHtmlFormatHelper(t,r){for(var s=e.core.domHandler.addDiv(t,"page","pageRoot"),o=e.core.domHandler.addDiv(t+"inner","pageInner",t),l=0;l<e.core.translate.keys.length;l++)r=this.replaceMultiple(r,"{#"+e.core.translate.keys[l]+"#}",e.core.translate.get(e.core.translate.keys[l]));return o.innerHTML=r,s}replaceMultiple(t,r,s){return t.split(r).join(s)}removeElement(t){(t=this.getElement(t))&&t.parentNode&&t.parentNode.removeChild(t)}addEvent(t,r,s,o){s=s.bind(o),this.getElement(t).addEventListener(r,s,!1)}addClickEvent(t,r,s){this.addEvent(t,"click",r,s)}touchClickDown(t){}touchClickUp(t){}tryCreateHtmlElements(){this.canvas===void 0&&(this.canvas=document.createElement("canvas"),this.canvas.id="canvas",document.body.appendChild(this.canvas),this.canvasContext=this.canvas.getContext("2d")),this.canvasMenu===void 0&&(this.canvasMenu=document.createElement("canvas"),this.canvasMenu.id="canvasMenu",document.body.appendChild(this.canvasMenu),this.canvasMenuContext=this.canvasMenu.getContext("2d"))}resetDrawAreaSize_Delayed(){this.resetDrawAreaSize()}resetDrawAreaSize(){var t=document.querySelector('meta[name="viewport"]');t&&t.content.match(/width=device-width/)&&(t.content=t.content.replace(/width=[^,]+/,"width=1"),t.content=t.content.replace(/width=[^,]+/,"width="+window.innerWidth)),window.devicePixelRatio&&window.devicePixelRatio!==0&&e.core.ratio!==window.devicePixelRatio&&(e.core.ratio=window.devicePixelRatio),(this.screenWidthForDOM!==window.innerWidth||this.screenHeightForDOM!==window.innerHeight)&&(this.screenWidthForDOM=window.innerWidth,this.screenHeightForDOM=window.innerHeight);var t=window.msMatchMedia||window.MozMatchMedia||window.WebkitMatchMedia||window.matchMedia,r="onorientationchange"in window,s=void 0;typeof t<"u"&&window.matchMedia("(orientation: portrait)").matches?s=!0:typeof t<"u"&&window.matchMedia("(orientation: landscape)").matches?s=!1:r&&window.orientation==0||window.orientation==180?s=!0:(r&&window.orientation==0||window.orientation==180)&&(s=!1),s!=null?(s?(this.screenWidthForDOM!==Math.min(window.innerWidth,window.innerHeight)&&(this.screenWidthForDOM=Math.min(window.innerWidth,window.innerHeight)),this.screenHeightForDOM!==Math.max(window.innerWidth,window.innerHeight)&&(this.screenHeightForDOM=Math.max(window.innerWidth,window.innerHeight)),t=Math.min(screen.width,screen.height)):(this.screenWidthForDOM!==Math.max(window.innerWidth,window.innerHeight)&&(this.screenWidthForDOM=Math.max(window.innerWidth,window.innerHeight)),this.screenHeightForDOM!=Math.min(window.innerWidth,window.innerHeight)&&(this.screenHeightForDOM=Math.min(window.innerWidth,window.innerHeight)),t=Math.max(screen.width,screen.height)),t<.9*this.screenWidthForDOM&&e.core.domRatio!==t/this.screenWidthForDOM?e.core.domRatio=t/this.screenWidthForDOM:e.core.domRatio!==1&&(e.core.domRatio=1)):e.core.domRatio=1,t=document.getElementById("phone"),this.screenLeftForDOM=this.screenTopForDOM=0,this.screenWidthForDOM=Math.floor(this.screenWidthForDOM),this.screenHeightForDOM=Math.floor(this.screenHeightForDOM),t?(t.className="phone_js_resize",t.style.width=Math.floor(.55*window.innerHeight)+"px",this.screenWidthForDOM=Math.floor(.75*t.clientWidth)-2,this.screenHeightForDOM=Math.floor(.64*t.clientHeight),r=t.getBoundingClientRect(),s=r.left+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),this.screenTopForDOM=Math.floor(r.top+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)+(t.clientHeight-this.screenHeightForDOM)/2),this.screenLeftForDOM=Math.floor(s+(t.clientWidth-this.screenWidthForDOM)/2)+1,r=document.getElementById("bg"),r.className="bg_js_resize",r.style.top=Math.floor(.32*window.innerHeight+0)+"px",r.style.height=Math.floor(1.05*window.innerHeight+0)+"px",r=document.getElementById("logowrapper"),r.className="",r.style.height=Math.floor(.35*window.innerHeight+0)+"px",r=document.getElementById("phonewrapper"),r.className="",r.style.height=Math.floor(1.05*window.innerHeight+0)+"px",r=document.getElementById("logo"),r.className="logo",r.style.fontSize=.25*window.innerHeight+0+"px",r=document.getElementById("logosub"),r.className="logosub",r.style.fontSize=.05*window.innerHeight+0+"px",r.style.top=Math.floor(.05*-window.innerHeight+0)+"px",r=document.getElementById("pageRoot"),r.style.width=this.screenWidthForDOM+"px",r.style.height=this.screenHeightForDOM+"px",r.style.position="absolute",r.style.top=this.screenTopForDOM+"px",r.style.left=this.screenLeftForDOM+"px",e.core.settings.zoom=Math.max(.67,Math.min(1,Math.min(e.core.domHandler.screenWidthForDOM,e.core.domHandler.screenHeightForDOM)/300))):e.core.settings.zoom=1,this.tryCreateHtmlElements(),this.screenWidth=Math.round(this.screenWidthForDOM*e.core.ratio*e.core.domRatio),this.screenHeight=Math.round(this.screenHeightForDOM*e.core.ratio*e.core.domRatio),e.core.setSizeSettings(),this.canvas.style.width=this.screenWidthForDOM+"px",this.canvas.style.height=this.screenHeightForDOM+"px",this.canvas.style.position="absolute",this.canvas.style.top=this.screenTopForDOM+"px",this.canvas.style.left=this.screenLeftForDOM+"px",this.canvas.style.zIndex="2",this.canvas.width=this.screenWidth,this.canvas.height=this.screenHeight,e.core.settings.menuButtonBottom=.875*e.core.settings.titleWidth,this.canvasMenu.style.width=this.canvas.style.width,this.canvasMenu.style.height=this.canvas.style.height,this.canvasMenu.style.position=this.canvas.style.position,this.canvasMenu.style.zIndex="10",this.canvasMenu.width=this.canvas.width,this.canvasMenu.height=this.canvas.height,this.canvasMenu.style.display="none",this.canvasMenu.style.top=this.canvas.style.top,this.canvasMenu.style.left=this.canvas.style.left,t||window.scrollTo(0,0),e.core.zopDrawArea.resetDrawAreaSize(this.screenHeight,this.screenWidth),e.core.mainMenuControl.resetDrawAreaSize(this.screenHeight,this.screenWidth),e.core.calendarEventHandler.drawAreaResized(),e.core.mainMenuControl.drawAreaResized(),e.core.addButtonControl.drawAreaResized(),e.core.appStateHandler.viewEventControl.resize(),e.core.appStateHandler.sizesInitiated=!0,this.resizeDomElements(),e.core.preloadAllImages(),e.core.redraw(!0),this.fadeInIfWebPage()}fadeInIfWebPage(){this.alreadyFadedIn||(document.getElementById("phone")&&($(".innerX").animate({opacity:1},2e3),$("#canvas").animate({opacity:1},2e3)),this.alreadyFadedIn=!0)}resizeDomElements(t){t===void 0&&(t="");var r=Math.min(24,Math.max(11,Math.min(e.core.domHandler.screenWidthForDOM,e.core.domHandler.screenHeightForDOM)/19)),s=Math.min(16,Math.max(10,Math.min(e.core.domHandler.screenWidthForDOM,e.core.domHandler.screenHeightForDOM)/23)),o=2*r,l=r-11+2,c=Math.max(2*l,13),p=Math.floor(r/8),f,g=document.querySelectorAll(".pageInner");(t==null||4>t.length)&&(t=e.core.settings.theme.colorTitleBackground);for(var m=0;m<g.length;m++)g[m].style.backgroundColor=e.core.settings.theme.colorBackground;for(g=document.querySelectorAll(".pageContent"),m=0;m<g.length;m++)g[m].style.fontFamily='"'+e.core.settings.theme.textFont+'", arial, sans-serif',g[m].style.backgroundColor="rgba(125, 125, 125, 0.08)";for(g=document.querySelectorAll(".topBarTitleX"),m=0;m<g.length;m++)g[m].style.fontFamily='"'+e.core.settings.theme.titleBarFontBold+'", arial, sans-serif';for(g=document.querySelectorAll(".topBar, .topBarTitle, .topBarButton, .menuItem, .topBarTitleX, .shopItemButton"),m=0;m<g.length;m++)g[m].style.backgroundColor=t;for(g=document.querySelectorAll(".pageTopPadding"),m=0;m<g.length;m++)g[m].style.paddingTop=c+"px",g[m].style.paddingBottom=c+"px";for(g=document.querySelectorAll(".pageSecondTopPadding"),m=0;m<g.length;m++)g[m].style.marginTop="-"+c+"px",g[m].style.paddingTop=c+"px",g[m].style.paddingBottom=c+"px",g[m].style.borderTopColor=e.core.settings.theme.colorWhite,g[m].style.borderTopStyle="solid",g[m].style.borderTopWidth=l+"px";for(g=document.querySelectorAll(".inputBox"),m=0;m<g.length;m++)g[m].style.position="absolute",g[m].style.maxWidth="700px",g[m].style.marginBottom=c+"px",g[m].style.left=c+"px",g[m].style.overflow="hidden",g[m].style.right=c+"px",g[m].style.backgroundColor=e.core.settings.theme.colorBackground,g[m].parentElement.style.height=Math.max(3*c,g[m].offsetHeight+c)+"px",f=g[m].clientWidth;for(g=document.querySelectorAll(".noLeftRightMargin"),m=0;m<g.length;m++)g[m].style.right="0",g[m].style.left="0";for(g=document.querySelectorAll("#spaceForColors"),m=0;m<g.length;m++)g[m].style.maxWidth="700px",g[m].style.marginTop="0",g[m].style.marginBottom=c+"px",g[m].style.marginLeft=c+"px",g[m].style.marginRight=c+"px";for(g=document.querySelectorAll(".lessSpace"),m=0;m<g.length;m++)g[m].parentElement.style.height=g[m].offsetHeight+c+"px";for(g=document.querySelectorAll(".transparent"),m=0;m<g.length;m++)g[m].style.backgroundColor="transparent";for(g=document.querySelectorAll(".square"),m=0;m<g.length;m++)g[m].style.height=o+"px",g[m].style.width=o+"px",g[m].style.position="relative",g[m].style.cssFloat="right",g[m].style.right=c+"px",g[m].style.marginBottom=c+"px";for(g=document.querySelectorAll(".base"),m=0;m<g.length;m++)g[m].style.fontSize=r+"px",g[m].style.lineHeight=o+p+"px",g[m].style.height=o+"px",g[m].style.paddingLeft=l+"px",g[m].style.paddingRight=l+"px",g[m].style.outline="none",g[m].style.minHeight="0",g[m].style.fontFamily="Roboto",g[m].style.color=e.core.settings.theme.colorGrayText,g[m].style.whiteSpace="nowrap";for(g=document.querySelectorAll(".inputBase"),m=0;m<g.length;m++)g[m].style.backgroundColor="transparent",g[m].style.width=f-2*l+"px";for(g=document.querySelectorAll(".inputTab"),m=0;m<g.length;m++)g[m].style.backgroundColor=e.core.settings.theme.colorBackground,g[m].style.lineHeight="0",g[m].style.width=f/2-1*l+"px",g[m].style.display="inline-block",g[m].style.position="absolute",g[m].style.textAlign="center";for(g=document.querySelectorAll(".right"),m=0;m<g.length;m++)g[m].style.right="0";for(g=document.querySelectorAll(".menuItem"),m=0;m<g.length;m++)g[m].style.borderTopColor=e.core.settings.theme.colorWhite,g[m].style.color=e.core.settings.theme.colorTagText,g[m].style.height="",g[m].style.paddingTop=l+"px",g[m].style.paddingBottom=l+"px",g[m].style.whiteSpace="normal";for(g=document.querySelectorAll(".inputOneLiner"),m=0;m<g.length;m++)g[m].style.height=o+"px",this.addEvent(g[m].id,"keydown",this.overrideEnter,this);for(g=document.querySelectorAll(".inputTwoLiner"),m=0;m<g.length;m++)g[m].style.height=2*o+"px",g[m].style.lineHeight=1.2*r+"px",g[m].style.width=f-2*l+"px";if(g=document.querySelectorAll(".maybeBig"),!new e.Helper().isMobile())for(m=0;m<g.length;m++)g[m].style.height=6*o+"px",g[m].style.lineHeight=1.3*r+"px",g[m].style.width="100%",g[m].style.backgroundColor=e.core.settings.theme.colorBackground;for(g=document.querySelectorAll(".inputDate"),m=0;m<g.length;m++)g[m].style.left=c+"px",g[m].style.width=f-2*l+"px";for(g=document.querySelectorAll(".tableWithMargin"),m=0;m<g.length;m++)g[m].style.marginRight=c+"px";for(g=document.querySelectorAll(".inputCheckBox"),m=0;m<g.length;m++)g[m].style.width=o+"px",g[m].style.backgroundColor="transparent",e.core.commonUserSettings.theme=="3"?g[m].style.webkitAppearance="none":g[m].style.fontSize="0";if(g=document.querySelectorAll(".androidDown"),new e.Helper().isAndroid())for(m=0;m<g.length;m++)g[m].style.position="relative",g[m].style.top=Math.ceil(.8*l)+"px",g[m].style.left="0",g[m].style.paddingTop="0",g[m].style.paddingBottom="0",g[m].style.paddingLeft=l/2+"px",g[m].style.paddingRight=l/2+"px",g[m].style.width=f-l+"px",g[m].style.marginTop="0",g[m].style.marginBottom=l+"px",g[m].style.height="0",g[m].style.lineHeight=o-l+"px",g[m].style.height=o-r+"px",g[m].parentElement.style.height=o+p+"px";for(g=document.querySelectorAll(".dateFake"),m=0;m<g.length;m++)g[m].style.position="absolute",g[m].style.background=e.core.settings.theme.colorBackground,g[m].style.left="0",g[m].style.pointerEvents="none",g[m].style.top="0",g[m].style.right=3*c+"px",g[m].style.width="80%",g[m].style.overflow="hidden";for(g=document.querySelectorAll(".sizedTitle"),m=0;m<g.length;m++)g[m].style.position="relative",g[m].style.fontSize=s+"px",g[m].style.paddingLeft=c+"px",g[m].style.paddingRight=c+"px";for(g=document.querySelectorAll(".miniTitle, .shopItemTitle, .shopItemDescription"),m=0;m<g.length;m++)g[m].style.color=e.core.settings.theme.colorHorizontalTitle;for(g=document.querySelectorAll(".miniTitle"),m=0;m<g.length;m++)g[m].style.color=e.core.helper.colorToRGBA(e.core.settings.theme.colorHorizontalTitle,.5);for(g=document.querySelectorAll(".pageContentText"),m=0;m<g.length;m++)g[m].style.color=e.core.settings.theme.colorHorizontalTitle;for(g=document.querySelectorAll(".inputOption"),m=0;m<g.length;m++)g[m].style.paddingTop=l+"px",g[m].style.backgroundColor=e.core.settings.theme.colorBackground}overrideEnter(t){if(t.which==13&&t.target.type!="textarea"&&t.target.type!="button")return t.target.blur(),!1}getSelectOptions(t){for(var r="",s=0;s<t.options.length;s++)t.options[s].selected&&(r+=t.options[s].value);return r}selectWeekDays(t,r){for(var s=0;s<t.options.length;s++)t.options[s].selected=-1<r.indexOf(t.options[s].value)}addWeekDaysToSelectNode(t){for(var r,s=1;7>=s;s++)r=new Option(e.core.helper.weekdayLong.find(s),""+s,!1,!1),r.className="inputOption",t.appendChild(r)}addRemindersToSelectNode(t,r){var s=[],o=D(),l=o.clone().add("minutes",0);s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",1),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",5),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",10),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",15),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",20),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",25),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",30),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",45),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("hours",1),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("minutes",90),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("hours",2),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("hours",3),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("hours",6),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("hours",12),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("days",1),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("days",2),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0))),l=o.clone().add("days",7),s.push(new e.NumberStringPair(l.diff(o,"minutes"),l.from(o,!0)));for(var c=0;c<r.length;c++)l=o.clone().add("minutes",r[c].minutes),this.addSortedIfNotExists(s,new e.NumberStringPair(r[c].minutes,l.from(o,!0)));for(t.innerHTML="",o=0;o<s.length;o++){for(l=!1,c=0;c<r.length;c++)r[c].minutes==s[o].valueNumber&&(l=!0);c=new Option(s[o].valueString,""+s[o].valueNumber,!1,l),c.className="inputOption",t.appendChild(c)}}selectDuration(t,r,s){}addDurationsToSelectNode(t,r,s){var o=[];r=D(r);var l=r.clone().add("minutes",1),c=r.clone().add("minutes",15);for(o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",30),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",45),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",60),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",75),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",90),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",105),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",120),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("minutes",150),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("hours",3),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("hours",4),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("hours",6),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("hours",8),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("hours",12),o.push(new e.NumberStringPair(c.diff(r),c.from(r,!0))),c=r.clone().add("days",1),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",2),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",3),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",4),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",5),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",6),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",7),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",8),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",9),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",10),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",14),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("days",21),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("months",1),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("months",2),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("months",3),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("months",4),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("months",6),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=r.clone().add("months",12),o.push(new e.NumberStringPair(c.diff(l),c.from(r,!0))),c=D(s),this.addSortedIfNotExists(o,new e.NumberStringPair(c.diff(r),c.from(r,!0))),t.innerHTML="",l=0;l<o.length;l++)s=new Option(o[l].valueString,""+o[l].valueNumber,!1,o[l].valueNumber===c.diff(r)),s.className="inputOption",t.appendChild(s)}addSortedIfNotExists(t,r){for(var s=t.length,o=!1,l=0;l<s&&o==0;l++)r.valueNumber<t[l].valueNumber&&(t.splice(l,0,r),o=!0),r.valueNumber===t[l].valueNumber&&(o=!0);o===!1&&t.push(r)}}e.DomHandler=Mr;class Pr{constructor(){this.showMessage=!1,this.loadingCounter=0}showLoadingSpinnerIfNeeded(){if(0<this.loadingCounter){if(!e.core.calendarDataProxy.connectionOk()||2e4<e.core.getTimeStamp()-this.loadStartTime&&24e3>e.core.getTimeStamp()-this.loadStartTime)this.loadingCounter=0,this.showMessage=!0,this.messageStartTime=e.core.getTimeStamp();else if(e.core.drawArea&&e.core.zopDrawArea){var t=e.core.getTimeStamp()%1e3/1e3*2*Math.PI;e.core.drawArea.drawLoader(t)}}else 0>this.loadingCounter&&(this.loadingCounter=0);this.showMessage&&(5e3>e.core.getTimeStamp()-this.messageStartTime?(e.core.drawArea.drawFilledRectangle({x:0,y:0,width:e.core.zopDrawArea.zopAreaWidth,height:e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,fillStyle:e.core.settings.theme.colorRed,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawCenteredText(e.core.translate.get("Connection failed"),0,(e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-e.core.settings.menuTextHeight)/2,e.core.zopDrawArea.zopAreaWidth,e.core.settings.menuTextHeight,e.core.settings.theme.colorWhite,!1,!1),e.core.redraw(!0)):this.showMessage=!1)}isLoading(){return 0<this.loadingCounter}startLoading(){this.showMessage=!1,e.core.eventHandler.closeAllPagesAndMenus(),0>this.loadingCounter?this.loadingCounter=1:this.loadingCounter++,e.core&&(this.loadStartTime=e.core.getTimeStamp(),e.core.redraw(!0))}stopLoadingWithError(){this.showMessage=!0,this.stopLoading()}stopLoading(){this.loadingCounter=0,e.core.redraw(!0)}}e.LoadingHandler=Pr;class br{constructor(){this.isEditingEvent=0,this.isCreatingNewEvent=0,this.isChoosingDateTimeForEvent=!1,this.isAutoZooming=0,this.isAutoScrolling=0,this.isManuallyZooming=0,this.isManuaullyScrolling=0,this.isPopupEditRecurringMenuShowing=!1,this.isPopupMainMenuShowing=!1,this.isMainMenuBeingDragged=!1,this.isAddButtonBeingDragged=!1,this.isMainMenuShowing=!1,this.isPopupDissabled=0,this.sizesInitiated=!1,this.settingsControlIsShowing=!1,this.shopControlIsShowing=!1,this.calendarsControlIsShowing=!1,this.editEventControlIsShowing=!1,this.viewEventControlIsShowing=!1,this.isDraggingBottomMarker=!1,this.isDraggingTopMarker=!1,this.visibleControls=[],this.settingsControl=new e.SettingsControl,this.calendarsControl=new e.CalendarsControl,this.shopControl=new e.ShopControl,this.viewEventControl=new e.ViewEventControl,this.editEventControl=new e.EditEventControl,this.editRecurrenceControl=new e.EditRecurrenceControl}isMainWindowShowing(){return!this.isMainMenuShowing&&!this.editEventControlIsShowing&&!this.isChoosingDateTimeForEvent&&!this.isPopupEditRecurringMenuShowing&&!this.viewEventControlIsShowing}setChoosingDateTimeForEvent(t){(this.isChoosingDateTimeForEvent=t)?(this.isPopupDissabled++,e.core.zopDrawArea&&(e.core.dateTimeSelectionHandler.makeVisible(!0),e.core.redraw(!0))):(this.isPopupDissabled--,e.core.zopDrawArea&&(e.core.dateTimeSelectionHandler.makeVisible(!1),e.core.redraw(!0)))}viewEvent(t){e.core.loadingHandler.isLoading()||(this.viewEventControlIsShowing=!0,this.viewEventControl.init(t),this.addVisibleControl(this.viewEventControl))}editEvent(t,r){e.core.loadingHandler.isLoading()||(this.editEventControlIsShowing=!0,this.editEventControl.init(t,r),this.addVisibleControl(this.editEventControl))}deleteEvent(t,r){e.core.calendarDataProxy.deleteEvent(t,r,!1)}editRecurrence(t){this.editRecurrenceControl.init(t),this.addVisibleControl(this.editRecurrenceControl)}startMoveCalendarEventObject(t,r,s,o){}startAddCalendarEventObject(t,r){var s=new e.CalendarEventObject("","","",t,r,this.getDefaultCalendarId(),"-1");this.editEvent(s,e.EventEditType.New)}getDefaultCalendarId(){var t=e.core.commonUserSettings.calendarIdLastAddedTo;if(e.core.getCalendar(t).visibility===e.VisibilityType.Visible&&e.core.getCalendar(t).canEditCalendarEvents)return t;for(var t=void 0,r=0;r<e.core.calendars.length;r++)if(e.core.calendars[r].visibility===e.VisibilityType.Visible&&e.core.calendars[r].canEditCalendarEvents){t=e.core.calendars[r].id;break}return t==null||e.core.getCalendar(e.core.calendarPrimaryId).visibility===e.VisibilityType.Visible?e.core.calendarPrimaryId:t}addVisibleControl(t){this.visibleControls[this.visibleControls.length-1]!==t&&(history.pushState({depth:this.visibleControls.length},""),this.visibleControls.push(t),t.show())}back(){var t=e.core.getTimeStamp();return this.previousBackTime&&t-500<this.previousBackTime?(this.previousBackTime=t,!1):(this.previousBackTime=t,this.visibleControls&&0<this.visibleControls.length?(this.visibleControls[this.visibleControls.length-1].hide(),this.visibleControls.pop(),0<this.visibleControls.length&&this.visibleControls[this.visibleControls.length-1].reshow(),!0):(navigator&&navigator.app&&navigator.app.exitApp(),!1))}safeBack(t){return this.visibleControls&&0<this.visibleControls.length&&this.visibleControls[this.visibleControls.length-1]===t?this.back():!1}mainButtonPressed(){if(!e.core.loadingHandler.isLoading()){var t=e.core.zopHandler.dateToZOP(new Date);e.core.zopHandler.topZOP<t&&e.core.zopHandler.bottomZOP>t?this.showMainMenu(!0):e.core.zopHandler.showInitialBounds(!0)}}showMainMenu(t){e.core.loadingHandler.isLoading()||(e.core.appStateHandler.isMainWindowShowing()?(e.core.appStateHandler.isMainMenuShowing=!0,this.addVisibleControl(e.core.mainMenuControl),t&&e.core.mainMenuControl.startOpenAnimation(),window.setTimeout(function(){return e.core.redraw(!0)},100),window.setTimeout(function(){return e.core.redraw(!0)},200)):this.back())}viewCalendars(){this.calendarsControlIsShowing=!0,this.addVisibleControl(this.calendarsControl)}viewShop(){this.shopControlIsShowing=!0,this.addVisibleControl(this.shopControl)}viewSettings(){this.settingsControlIsShowing=!0,this.addVisibleControl(this.settingsControl)}viewAbout(){}}e.AppStateHandler=br;class Hr{constructor(){this.visibleHorizontalDateObjects=[],this.visibleTitleBarDateObjects=[],this.inVisibleTitle4Objects=[],this.visibleLowestLevelObjects=[],this.selectedObjects=[],this.innerMarginTop2=this.innerMarginTop=this.extraTextHeight=this.extraTextHeight2=this.horizontalTitleExtraTextHeight=this.textHeight=this.textHeight2=this.horizontalTitleTextHeight=0,this.useDividerLine=!1,this.averageObjectPixelHeight=this.nowZOP=this.hourWidth2=this.hourWidth=0,this.showExtraTextToRight=this.showExtraTextBelow=!1,this.averageObjectPixelHeight2=0,this.showExtraTextToRight2=this.showExtraTextBelow2=!1,this.horizontalTitleHeight=0,this.rootCalendarDateObjects=[],this.weekCalendarDateObjects=[],this.counter=0,this.selectedCalendarDateObject=void 0,this.showMonthSpecialDetails=!1,this.lowestLevelCalendarDateObjectType=void 0,this.commonDateTimes=[],this.weekNumbersVisible=[],this.populateDetails_helper=this.populateDetails_helper.bind(this),this.reset()}reset(){this.rootCalendarDateObjects=[],this.weekCalendarDateObjects=[],this.rootCalendarDateObjects.push(new e.CalendarDateObject(e.CalendarDateObjectType.Title,e.core.settings.absoluteMinDate,e.core.settings.absoluteMaxDate));var t=e.core.zopHandler.dateToZOP(e.core.settings.absoluteMinDate),r=e.core.zopHandler.dateToZOP(e.core.settings.absoluteMaxDate);e.core.zopHandler.setAbsoluteMinMax(t,r)}clearWeekInfo(){this.weekCalendarDateObjects=[]}selectCalendarDateObjectAt(t,r,s){if(r<e.core.zopHandler.topPixel||r>e.core.zopHandler.bottomPixel)this.selectedCalendarDateObject=void 0;else return r=e.core.zopHandler.getZOPFromPixel(r),(s=this.getHitCalendarDateObjectAmong(t,r,this.visibleLowestLevelObjects,e.core.settings.titleWidth))||(s=this.getHitCalendarDateObjectAmong(t,r,this.visibleTitleBarDateObjects,0)),s||(s=this.getHitCalendarDateObjectAmong(t,r,this.visibleHorizontalDateObjects,0)),this.selectedCalendarDateObject=s}getClosestDetailAt(t,r){if(!(t<e.core.zopHandler.topPixel||t>e.core.zopHandler.bottomPixel)){t=t-t%r+Math.round(r/2);var l=t-r,o=l+2*r,s=e.core.zopHandler.getZOPFromPixel(t),l=e.core.zopHandler.getZOPFromPixel(l),c=e.core.zopHandler.getZOPFromPixel(o),o=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,s,this.visibleLowestLevelObjects,e.core.settings.titleWidth),l=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,l,this.visibleLowestLevelObjects,e.core.settings.titleWidth),c=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,c,this.visibleLowestLevelObjects,e.core.settings.titleWidth);if(o&&l&&c)return l!==c?c:(this.verifyDetailsArePopulatedFor(o),o=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,s,o.details,e.core.settings.titleWidth))}}convertCommonTimesToDates(t){if(t!=this.lastCommonTimesStartDate){this.lastCommonTimesStartDate=t,this.commonDateTimes=[];var r;for(r=0;r<e.core.calendarEventHandler.commonTimeKeys.length;r++){var o=e.core.calendarEventHandler.commonTimeKeys[r].timeKey,s=parseInt(o.substr(0,o.indexOf("-"))),o=parseInt(o.substr(o.indexOf("-")+1)),l=new Date(t.getTime());l.setHours(s,o),this.commonDateTimes.push(l)}}}getCalendarDateObject(t,r,s){this.verifyDetailsArePopulatedFor(s);for(var o=0;o<s.details.length;o++){var l=s.details[o];if(l.startZOP<t&&l.endZOP>t)return l.calendarDateObjectType===r?l:this.getCalendarDateObject(t,r,l)}}getClosestFakeDetailAt(t,r,s){if(this.lowestLevelCalendarDateObjectType==e.CalendarDateObjectType.Month&&!this.showMonthSpecialDetails)return this.getHitWeekAt(e.core.zopHandler.rightPixel-1,t,!1);if(this.lowestLevelCalendarDateObjectType==e.CalendarDateObjectType.Day){if(t<e.core.zopHandler.topPixel||t>e.core.zopHandler.bottomPixel)return;t=t-t%r+Math.round(r/2);var l=t-r,p=l+2*r,o=e.core.zopHandler.getZOPFromPixel(t),l=e.core.zopHandler.getZOPFromPixel(l),c=e.core.zopHandler.getZOPFromPixel(p),p=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,o,this.visibleLowestLevelObjects,e.core.settings.titleWidth),f=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,l,this.visibleLowestLevelObjects,e.core.settings.titleWidth),g=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,c,this.visibleLowestLevelObjects,e.core.settings.titleWidth);if(!p||!f||!g)return;if(f!==g&&s)return g;for(s=e.core.zopHandler.getDateFromZOP(l),o=e.core.zopHandler.getDateFromZOP(c),this.convertCommonTimesToDates(p.startDateTime),p=0;p<this.commonDateTimes.length;p++)if(this.commonDateTimes[p]>=s&&this.commonDateTimes[p]<o)return new e.CalendarDateObject(e.CalendarDateObjectType.Hour,this.commonDateTimes[p]);return this.getClosestDetailAt(t,r)}if(!(t<e.core.zopHandler.topPixel||t>e.core.zopHandler.bottomPixel)&&(t=t-t%r+Math.round(r/2),l=t-r,p=l+2*r,o=e.core.zopHandler.getZOPFromPixel(t),l=e.core.zopHandler.getZOPFromPixel(l),c=e.core.zopHandler.getZOPFromPixel(p),p=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,o,this.visibleLowestLevelObjects,e.core.settings.titleWidth),f=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,l,this.visibleLowestLevelObjects,e.core.settings.titleWidth),g=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,c,this.visibleLowestLevelObjects,e.core.settings.titleWidth),p&&f&&g))return f!==g&&s?g:(this.verifyDetailsArePopulatedFor(p),p=this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,o,p.details,e.core.settings.titleWidth))}getLowestLevelCalendarDateObjectAt(t){return t=e.core.zopHandler.getZOPFromPixel(t),this.getHitCalendarDateObjectAmong(e.core.settings.titleWidth+1,t,this.visibleLowestLevelObjects,e.core.settings.titleWidth)}getHitCalendarDateObjectAmong(t,r,s,o){var l=s.length,c;if(t>o)for(t=0;t<l;t++)o=s[t],r>=o.startZOP&&r<=o.endZOP&&(c===void 0||c.calendarDateObjectType>o.calendarDateObjectType)&&(c=o);return c}clearSelect(){this.selectedObjects=[]}selectCalendarDateObject(t){t&&this.selectedObjects.push(t)}getHitWeekAt(t,r,s){if(0<this.weekNumbersVisible.length){var o=e.core.zopHandler.getZOPFromPixel(r),l=e.core.zopHandler.getZOPFromPixelDiff(e.core.settings.weekCircleDiameter)/2;for(r=0;r<this.weekCalendarDateObjects.length;r++)if(s){if(-1<this.weekNumbersVisible.indexOf(this.weekCalendarDateObjects[r].shortText)){var c=Math.max(this.weekCalendarDateObjects[r].startZOP,e.core.zopHandler.topZOP+l);if(o>=c-l&&o<=c+l)return this.weekCalendarDateObjects[r]}}else if(o>=this.weekCalendarDateObjects[r].startZOP&&o<=this.weekCalendarDateObjects[r].endZOP&&t>e.core.settings.titleWidth)return this.weekCalendarDateObjects[r]}}gotoCalendarDateObjectAt(t,r){var s=this.selectCalendarDateObjectAt(t,r,!0);if(s&&s.calendarDateObjectType==this.lowestLevelCalendarDateObjectType&&this.showMonthSpecialDetails){var o=Math.max(e.core.zopHandler.getPixelFromZOP(s.startZOP),e.core.zopHandler.topPixel);if(r>o+this.horizontalTitleHeight){s=e.core.zopHandler.getZOPFromPixel(r-25*e.core.ratio),o=e.core.zopHandler.getZOPFromPixel(r+25*e.core.ratio),e.core.drawAreaEffects.startAutoZoom(s,o,!1,function(){});return}}if(s&&s.calendarDateObjectType==this.lowestLevelCalendarDateObjectType&&this.horizontalDateObjectType){var l=this.getHitCalendarDateObjectAmong(t,e.core.zopHandler.getZOPFromPixel(r),this.visibleHorizontalDateObjects,0),o=Math.max(e.core.zopHandler.getPixelFromZOP(l.startZOP),e.core.zopHandler.topPixel);r<o+this.horizontalTitleHeight&&(s=l)}this.gotoCalendarDateObject(s,r)}gotoCalendarDateObject(t,r){if(this.selectCalendarDateObject(t),t!==void 0)if(this.clearSelect=this.clearSelect.bind(this),this.verifyDetailsArePopulatedFor(t),-1<this.rootCalendarDateObjects.indexOf(t)){var s=e.core.zopHandler.getZOPFromPixel(r)-(t.endZOP-t.startZOP)/2,o=s+(t.endZOP-t.startZOP);e.core.drawAreaEffects.startAutoZoom(s,o,!1,this.clearSelect)}else o=t.startZOP+(t.endZOP-t.startZOP),e.core.drawAreaEffects.startAutoZoom(t.startZOP,o,!1,this.clearSelect)}paintMarker(t){var r=-e.core.settings.titleWidth*2;t=e.core.zopHandler.dateToZOP(t);var s=e.core.commonUserSettings.theme!="3";e.core.zopDrawArea.drawHorizontalLineThick(r+2*e.core.settings.tagHeight,t,e.core.zopHandler.rightPixel-r-e.core.settings.tagHeight,e.core.settings.theme.colorMarker,2*e.core.ratio,s),e.core.zopDrawArea.drawFilledCircle(r+2*e.core.settings.tagHeight,t,6*e.core.ratio,e.core.settings.theme.colorMarker,s)}verifyWeGotEnoughWeekZOPs(){if(60<(e.core.zopHandler.bottomZOP-e.core.zopHandler.topZOP)/e.core.zopHandler.zopSizeOfWeek||200<this.weekCalendarDateObjects.length)0<this.weekCalendarDateObjects.length&&(this.weekCalendarDateObjects=[]);else{var t=e.core.zopHandler.bottomZOP;for(0<this.weekCalendarDateObjects.length&&(t=this.weekCalendarDateObjects[0].startZOP);t>e.core.zopHandler.topZOP;){var s=this.getStartOfWeek(e.core.zopHandler.getDateFromZOP(t));e.core.zopHandler.dateToZOP(s.toDate()),s.add(-1,"week");var r=this.getWeekNrForDate(s),t=e.core.zopHandler.dateToZOP(s.toDate()),s=new e.CalendarDateObject(e.CalendarDateObjectType.Week,new Date(s.toDate().getTime()));s.shortText=""+r,s.longText="Week "+r,s.weekIsOdd=r%2==1,s.weekIsOddDubble=r%4==1,this.weekCalendarDateObjects.unshift(s)}for(0<this.weekCalendarDateObjects.length&&(t=this.weekCalendarDateObjects[this.weekCalendarDateObjects.length-1].endZOP);t<e.core.zopHandler.bottomZOP;)t=this.getStartOfWeek(e.core.zopHandler.getDateFromZOP(t)),e.core.zopHandler.dateToZOP(t.toDate()),r=this.getWeekNrForDate(t),s=new e.CalendarDateObject(e.CalendarDateObjectType.Week,new Date(t.toDate().getTime())),t.add(1,"week"),t=e.core.zopHandler.dateToZOP(t.toDate()),s.shortText=""+r,s.longText="Week "+r,s.weekIsOdd=r%2==1,s.weekIsOddDubble=r%4==1,this.weekCalendarDateObjects.push(s)}}getWeekNrForDate(t){var r=t.dayOfYear(),s=(t.clone().dayOfYear(1).isoWeekday()+1-e.core.commonUserSettings.firstDayOfWeek)%7+1;return 1>s&&(s+=7),r=Math.floor((r+s+5)/7),4<s&&--r,r==0?r=53:r==53&&this.getWeekNrForDate(t.clone().add("weeks",1))==2&&(r=1),r}getStartOfWeek(t){return t=D(t).startOf("day"),t.isoWeekday()!=e.core.commonUserSettings.firstDayOfWeek&&(t=t.isoWeekday(e.core.commonUserSettings.firstDayOfWeek)),t.isoWeekday()<e.core.commonUserSettings.firstDayOfWeek&&(t=t.add("days",-7)),t}paintWeeksBackground(){this.verifyWeGotEnoughWeekZOPs();var t=Math.min(255,Math.round(255-(27-(e.core.zopHandler.bottomZOP-e.core.zopHandler.topZOP)/e.core.zopHandler.zopSizeOfWeek)));for(e.core.commonUserSettings.theme=="3"&&(t=Math.floor(15+(255-t)/4)),this.oddWeekColor="rgb("+t+", "+(t+10)+", "+(t+20)+")",t=0;t<this.weekCalendarDateObjects.length;t++)if(this.weekCalendarDateObjects[t].endZOP>e.core.zopHandler.topZOP&&this.weekCalendarDateObjects[t].startZOP<e.core.zopHandler.bottomZOP)if(e.core.commonUserSettings.grayDays===""||e.core.commonUserSettings.grayDays==="1234567"){if(this.weekCalendarDateObjects[t].weekIsOdd!=this.currentWeekIsOdd){var r=Math.max(e.core.zopHandler.getPixelFromZOP(this.weekCalendarDateObjects[t].startZOP),e.core.zopHandler.topPixel),s=Math.min(e.core.zopHandler.getPixelFromZOP(this.weekCalendarDateObjects[t].endZOP),e.core.zopHandler.bottomPixel);e.core.drawArea.drawFilledRectangle({x:this.fakeLeft+e.core.settings.titleWidth,y:r,width:e.core.zopHandler.rightPixel-this.fakeLeft,height:s-r,fillStyle:this.oddWeekColor,hasShadow:!1,rounded:!1,strokeStyle:void 0})}}else for(var r=e.core.zopHandler.getPixelFromZOP(this.weekCalendarDateObjects[t].startZOP),s=e.core.zopHandler.getPixelFromZOP(this.weekCalendarDateObjects[t].endZOP),s=(s-r)/7,o=1;7>=o;o++){var l=o+e.core.commonUserSettings.firstDayOfWeek-1;7<l&&(l-=7),-1<e.core.commonUserSettings.grayDays.indexOf(""+l)&&(l=Math.max(r+s*(o-1),e.core.zopHandler.topPixel),e.core.drawArea.drawFilledRectangle({x:this.fakeLeft+e.core.settings.titleWidth,y:l,width:e.core.zopHandler.rightPixel-this.fakeLeft,height:Math.min(r+s*o+1,e.core.zopHandler.bottomPixel)-l,fillStyle:this.oddWeekColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}))}}paintWeekNumbers(){if(e.core.settings.allowWeekNumber&&e.core.commonUserSettings.showWeekNumbers){var t=(e.core.zopHandler.bottomZOP-e.core.zopHandler.topZOP)/e.core.zopHandler.zopSizeOfWeek;if(this.weekNumbersVisible=[],!(60<t)){for(var r=0;r<this.weekCalendarDateObjects.length;r++)if(!(!(this.weekCalendarDateObjects[r].endZOP>e.core.zopHandler.topZOP&&this.weekCalendarDateObjects[r].startZOP<e.core.zopHandler.bottomZOP)||15<t&&!this.weekCalendarDateObjects[r].weekIsOdd||30<t&&!this.weekCalendarDateObjects[r].weekIsOddDubble)){this.weekNumbersVisible.push(this.weekCalendarDateObjects[r].shortText);var s=e.core.zopHandler.getPixelFromZOP(this.weekCalendarDateObjects[r].startZOP);s<e.core.zopHandler.topPixel+e.core.settings.weekCircleDiameter/2+2&&(s=Math.min(e.core.zopHandler.topPixel+e.core.settings.weekCircleDiameter/2+2,s+e.core.zopHandler.getPixelSizeOfWeek()-e.core.settings.weekCircleDiameter-2)),e.core.zopDrawArea.drawFilledCircle2(e.core.zopHandler.rightPixel+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-e.core.settings.weekCircleDiameter/2-e.core.settings.margin,s,e.core.settings.weekCircleDiameter/2+1*e.core.ratio,e.core.settings.theme.colorWeekNumberShadow,!1),e.core.zopDrawArea.drawFilledCircle2(e.core.zopHandler.rightPixel+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-e.core.settings.weekCircleDiameter/2-e.core.settings.margin,s,e.core.settings.weekCircleDiameter/2,e.core.settings.theme.colorWeekNumberCircle,!1),e.core.drawArea.drawCenteredText(this.weekCalendarDateObjects[r].shortText,e.core.zopHandler.rightPixel-e.core.settings.weekCircleDiameter+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-e.core.settings.margin-.5,s-e.core.settings.tagTextHeight/1.6,e.core.settings.weekCircleDiameter,e.core.settings.tagTextHeight,e.core.settings.theme.colorWeekNumberText,!1,!0)}}}}paintCalendarDateObjects(){var t;this.counter=0,this.visibleHorizontalDateObjects=[],this.visibleTitleBarDateObjects=[],this.inVisibleTitle4Objects=[],this.visibleLowestLevelObjects=[],e.core.zopDrawArea.clearTextDivs(),this.decideCalendarDateObjectTypesToShowAtDifferentLevels(),this.decideFontSizes(),this.currentWeekIsOdd=(D(new Date).week()-1)%2==1,this.fakeLeft=e.core.zopHandler.leftPixel+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,this.visibleTitleBarDateObjects=this.decideVisibleObjects(this.titleBarDateObjectType,[]),this.horizontalDateObjectType?(this.visibleHorizontalDateObjects=this.decideVisibleObjects(this.horizontalDateObjectType,this.visibleTitleBarDateObjects),this.visibleLowestLevelObjects=this.decideVisibleObjects(this.lowestLevelCalendarDateObjectType,this.visibleHorizontalDateObjects)):this.visibleLowestLevelObjects=this.decideVisibleObjects(this.lowestLevelCalendarDateObjectType,this.visibleTitleBarDateObjects),e.core.zopDrawArea.startTextDelayedDraw(),this.paintWeeksBackground(),e.core.zopDrawArea.canvasContext.globalAlpha=Math.max(0,-e.core.mainMenuControl.transparency),t=e.core.addButtonControl.getTitleExtraData();var r=(e.core.settings.titleWidth-e.core.settings.title0FontSize)/2;if(t?e.core.zopDrawArea.drawVerticalTitle(e.core.zopHandler.topZOP,e.core.zopHandler.bottomZOP,this.fakeLeft+r,t,e.core.settings.title0FontSize,e.core.settings.theme.colorTitleText,e.core.settings.margin,!0,!0):this.paintVisibleTitleObjects(this.visibleTitleBarDateObjects,this.fakeLeft,r,!1,e.core.settings.title0FontSize,!0),e.core.zopDrawArea.canvasContext.globalAlpha=1,this.horizontalDateObjectType)this.paintVisibleHorizontalTitles();else if(this.paintVisibleLowestObjects(),this.showMonthSpecialDetails==1)for(r=this.horizontalTitleHeight,t=0;t<this.visibleLowestLevelObjects.length;t++)this.paintMonthSpecialDetails(this.visibleLowestLevelObjects[t],r);e.core.zopDrawArea.endTextDelayedDraw(),this.counter=this.counter}decideCalendarDateObjectTypesToShowAtDifferentLevels(){this.lowestLevelCalendarDateObjectType=e.CalendarDateObjectType.Year,this.title4CalendarDateObjectType=void 0,this.titleBarDateObjectType=e.CalendarDateObjectType.Title,this.horizontalDateObjectType=void 0,this.showMonthSpecialDetails=e.core.zopHandler.getPixelSizeOfYear()>=4*e.core.settings.minDateHeight,e.core.zopHandler.getPixelSizeOfMonth()>=e.core.settings.minDateHeight&&(this.lowestLevelCalendarDateObjectType=e.CalendarDateObjectType.Month,this.titleBarDateObjectType=e.CalendarDateObjectType.Year,this.horizontalDateObjectType=void 0,this.showMonthSpecialDetails=e.core.zopHandler.getPixelSizeOfMonth()>=7*e.core.settings.minDateHeight),e.core.zopHandler.getPixelSizeOfDay()>=e.core.settings.minDateHeight&&(this.lowestLevelCalendarDateObjectType=e.CalendarDateObjectType.Day,this.titleBarDateObjectType=e.CalendarDateObjectType.Month,this.horizontalDateObjectType=void 0,this.showMonthSpecialDetails=e.core.zopHandler.getPixelSizeOfDay()>=6*e.core.settings.minDateHeight),e.core.zopHandler.getPixelSizeOfHour()>=e.core.settings.minDateHeight&&(this.lowestLevelCalendarDateObjectType=e.CalendarDateObjectType.Hour,this.titleBarDateObjectType=e.CalendarDateObjectType.Month,this.horizontalDateObjectType=e.CalendarDateObjectType.Day,this.showMonthSpecialDetails=e.core.zopHandler.getPixelSizeOfHour()>=6*e.core.settings.minDateHeight),e.core.zopHandler.getPixelSizeOf5Minutes()>=e.core.settings.minDateHeight&&(this.lowestLevelCalendarDateObjectType=e.CalendarDateObjectType.Minutes5,this.title4CalendarDateObjectType=e.CalendarDateObjectType.Hour,this.titleBarDateObjectType=e.CalendarDateObjectType.Month,this.horizontalDateObjectType=e.CalendarDateObjectType.Day,this.showMonthSpecialDetails=e.core.zopHandler.getPixelSizeOf5Minutes()>=6*e.core.settings.minDateHeight)}decideFontSizes(){this.averageObjectPixelHeight=0,this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Year&&(this.averageObjectPixelHeight=e.core.zopHandler.getPixelSizeOfYear(),this.averageObjectPixelHeight2=e.core.zopHandler.getPixelSizeOfMonth()),this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Month&&(this.averageObjectPixelHeight=e.core.zopHandler.getPixelSizeOfMonth(),this.averageObjectPixelHeight2=e.core.zopHandler.getPixelSizeOfDay()),this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Day&&(this.averageObjectPixelHeight=e.core.zopHandler.getPixelSizeOfDay(),this.averageObjectPixelHeight2=e.core.zopHandler.getPixelSizeOfHour()),this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Hour&&(this.averageObjectPixelHeight=e.core.zopHandler.getPixelSizeOfHour(),this.averageObjectPixelHeight2=e.core.zopHandler.getPixelSizeOf5Minutes()),this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Minutes5&&(this.averageObjectPixelHeight=e.core.zopHandler.getPixelSizeOf5Minutes(),this.averageObjectPixelHeight2=this.averageObjectPixelHeight/10),this.smallDividerColor=e.core.settings.theme.colorBigDateDividerStr+Math.min(1,1.5*this.averageObjectPixelHeight/e.core.zopDrawArea.zopAreaHeight)+")",this.bigDividerColor=e.core.settings.theme.colorBigDateDividerStr+"1 )",this.innerMarginTop=e.core.settings.innerTopMaxMargin;for(var t=0;2>t;t++)this.textHeight=Math.round(Math.min(this.averageObjectPixelHeight-2*this.innerMarginTop,e.core.settings.dateBigTextSize)),this.horizontalTitleTextHeight=e.core.settings.dateBigTextSize,this.extraTextHeight=Math.round(.6*this.textHeight),this.horizontalTitleExtraTextHeight=Math.round(.6*this.horizontalTitleTextHeight),this.innerMarginTop=Math.max(0,Math.min(this.innerMarginTop,(this.averageObjectPixelHeight-this.textHeight-this.extraTextHeight)/2-2));for(this.innerMarginTop2=this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Month?e.core.settings.innerTopMaxMargin:0,t=0;2>t;t++)this.textHeight2=Math.round(Math.min(e.core.settings.minDateHeight-2*this.innerMarginTop2,e.core.settings.dateBigTextSize)),this.textHeight2=Math.round(Math.min(this.textHeight2,1.1*this.averageObjectPixelHeight2)),this.extraTextHeight2=Math.round(Math.min(.6*this.textHeight2,e.core.settings.dateBigTextSize)),this.innerMarginTop2=Math.max(0,Math.min(this.innerMarginTop2,(this.averageObjectPixelHeight2-this.textHeight2-this.extraTextHeight2)/2-2));this.showExtraTextBelow=this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Day&&this.textHeight>=e.core.settings.dateBigTextSize,this.showExtraTextBelow2=this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Month&&this.textHeight2>=e.core.settings.dateBigTextSize,this.showExtraTextToRight=this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Hour||this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Minutes5,this.showExtraTextToRight2=this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Day||this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Minutes5,this.useDividerLine=this.averageObjectPixelHeight>25*e.core.ratio,this.hourWidth=Math.round(e.core.zopDrawArea.measureTextWidth("22",this.textHeight,!1,!1)),this.hourWidth2=Math.round(e.core.zopDrawArea.measureTextWidth("22",this.textHeight2,!1,!1)),this.horizontalTitleHeight=this.horizontalTitleTextHeight+(this.lowestLevelCalendarDateObjectType==e.CalendarDateObjectType.Month?0:this.horizontalTitleExtraTextHeight)+e.core.settings.innerTopMaxMargin+e.core.settings.margin}decideVisibleObjects(t,r){if(r.length===0){if(t===e.CalendarDateObjectType.Title)return this.rootCalendarDateObjects;if(t===e.CalendarDateObjectType.Year)return this.getVisibleChildCalendarDateObjects(this.rootCalendarDateObjects);if(t===e.CalendarDateObjectType.Month)return this.getVisibleChildCalendarDateObjects(this.getVisibleChildCalendarDateObjects(this.rootCalendarDateObjects))}else if(t==e.CalendarDateObjectType.Minutes5)return this.getVisibleChildCalendarDateObjects(this.getVisibleChildCalendarDateObjects(r));return this.getVisibleChildCalendarDateObjects(r)}paintVisibleTitleObjects(t,r,s,o,l,c){var p=t.length;for(let f=0;f<p;f++){const g=t[f];if(this.drawHorizontalLine(g,e.core.zopHandler.topZOP),this.title4CalendarDateObjectType!=g.calendarDateObjectType){let m=g.longText;o&&(m=m+" ("+g.parentText+")"),e.core.zopDrawArea.drawVerticalTitle(g.startZOP,g.endZOP,r+s,m,l,e.core.settings.theme.colorTitleText,e.core.settings.margin,!0,c)}}}drawHorizontalLine(t,r){var s=e.core.zopHandler.leftPixel+e.core.settings.titleWidth+1*e.core.ratio+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged;t.endZOP<r||t.calendarDateObjectType<this.lowestLevelCalendarDateObjectType||(t.calendarDateObjectType==this.lowestLevelCalendarDateObjectType?this.useDividerLine&&e.core.zopDrawArea.drawHorizontalLine(s,t.endZOP,e.core.zopHandler.rightPixel-s,this.smallDividerColor,!1):t.calendarDateObjectType==this.horizontalDateObjectType?this.useDividerLine&&e.core.zopDrawArea.drawHorizontalLine(s,t.endZOP,e.core.zopHandler.rightPixel-s,this.bigDividerColor,!1):e.core.zopHandler.getPixelFromZOP(t.endZOP)<=e.core.settings.menuButtonBottom?e.core.zopDrawArea.drawHorizontalLine(s,t.endZOP,e.core.zopHandler.rightPixel,this.bigDividerColor,!1):e.core.zopDrawArea.drawHorizontalLine(e.core.zopHandler.leftPixel,t.endZOP,e.core.zopHandler.rightPixel,this.bigDividerColor,!1))}verifyDetailsArePopulatedFor(t){t.detailsArePopulated||this.populateDetails(t)}prepareThouroughRedraw(t){t==null&&(t=this.rootCalendarDateObjects[0]);for(var r=t.details.length,s=0;s<r;s++)t.possibleEventTagsAtThisZoomLevel=[],this.prepareThouroughRedraw(t.details[s])}getVisibleChildCalendarDateObjects(t){var r,s,o,l=t.length,c,p,f=[];for(r=0;r<l;r++)for(c=t[r],this.verifyDetailsArePopulatedFor(c),o=c.details.length,s=0;s<o;s++)p=c.details[s],e.core.zopHandler.isObjectBelowExtendedScreen(p.startZOP)?s=o+1:e.core.zopHandler.isObjectAboveExtendedScreen(p.endZOP)||f.push(p);return f}paintVisibleLowestObjects(){var t,r=this.visibleLowestLevelObjects.length,s;for(t=0;t<r;t++)s=this.visibleLowestLevelObjects[t],this.paintObject(s,this.showMonthSpecialDetails,e.core.zopHandler.topPixel,0);return!0}paintVisibleHorizontalTitles(){var t,r=this.visibleHorizontalDateObjects.length,s;for(t=0;t<r;t++)s=this.visibleHorizontalDateObjects[t],this.paintObject(s,!0,e.core.zopHandler.topPixel,0);var o=this.horizontalTitleHeight;for(t=0;t<r;t++)s=this.visibleHorizontalDateObjects[t],this.paintDaySpecialDetails(s,o);return!0}populateDetails(t){this.populateDetails_helper(t)}populateDetails_helper(t){t.details=[];for(var r=new Date(t.startDateTime.getTime());r<t.endDateTime;){var s;if(t.calendarDateObjectType===e.CalendarDateObjectType.Title&&(s=new e.CalendarDateObject(e.CalendarDateObjectType.Year,new Date(r.getTime())),r.setFullYear(r.getFullYear()+1)),t.calendarDateObjectType===e.CalendarDateObjectType.Year)s=new e.CalendarDateObject(e.CalendarDateObjectType.Month,new Date(r.getTime())),r.setMonth(r.getMonth()+1);else if(t.calendarDateObjectType===e.CalendarDateObjectType.Month)s=new e.CalendarDateObject(e.CalendarDateObjectType.Day,new Date(r.getTime())),r.setDate(r.getDate()+1);else if(t.calendarDateObjectType===e.CalendarDateObjectType.Day)s=new e.CalendarDateObject(e.CalendarDateObjectType.Hour,new Date(r.getTime())),r=this.addHours(r,1);else if(t.calendarDateObjectType===e.CalendarDateObjectType.Hour)s=new e.CalendarDateObject(e.CalendarDateObjectType.Minutes5,new Date(r.getTime())),r=this.addMinutes(r,5);else if(t.calendarDateObjectType===e.CalendarDateObjectType.Minutes5)break;s!=null&&(t.details.push(s),e.core.calendarEventHandler.copyEventsFromParent(t,s))}t.detailsArePopulated=!0,e.core.redraw(!1)}addMinutes(t,r){return new Date(t.getTime()+6e4*r)}addHours(t,r){return new Date(t.getTime()+36e5*r)}paintObject(t,r,s,o){if(this.counter+=1,!e.core.zopHandler.isObjectBelowScreen(t.startZOP)&&!e.core.zopHandler.isObjectAboveScreen(t.endZOP)){var l=this.fakeLeft+(e.core.settings.titleWidth+e.core.settings.innerLeftMargin),c=Math.max(0,(r?this.horizontalTitleTextHeight:this.textHeight)-o),p=Math.max(0,(r?this.horizontalTitleExtraTextHeight:this.extraTextHeight)-o);o=this.innerMarginTop+o;var f=r?e.core.settings.innerTopMaxMargin:o,g=e.core.zopHandler.getPixelFromZOP(t.startZOP)+f;if(g<s+f){if(g=Math.min(s+f,e.core.zopHandler.getPixelFromZOP(t.endZOP)-c-p-o),r)this.topDateBottom=g+c+(this.lowestLevelCalendarDateObjectType===e.CalendarDateObjectType.Month?0:p)+e.core.settings.innerTopMaxMargin+e.core.settings.margin;else if(g<s&&this.horizontalDateObjectType)if(g+this.horizontalTitleHeight>s)o=Math.max(0,e.core.settings.minDateHeight-(g+c+p-s)),c=Math.max(0,(r?this.horizontalTitleTextHeight:this.textHeight)-o),p=Math.max(0,(r?this.horizontalTitleExtraTextHeight:this.extraTextHeight)-o),g+=o;else return}this.drawHorizontalLine(t,e.core.zopHandler.getZOPFromPixel(s)),s=e.core.zopDrawArea.drawCalendarDateObjectName(l,g,0,t.shortText,c,t.isRed,t.ampm!==void 0&&t.ampm!==null,r),this.showExtraTextBelow||r&&t.shortText2?e.core.zopDrawArea.drawCalendarDateObjectName(l+0,g,c,t.shortText2,p,t.isRed,!1,r):this.showExtraTextToRight&&!t.ampm&&t.shortText2?e.core.zopDrawArea.drawCalendarDateObjectName(l+0+this.hourWidth,g,2,t.shortText2,p,t.isRed,!1,r):t.ampm&&!t.shortText2?e.core.zopDrawArea.drawCalendarDateObjectName(l+0+s,g,2,t.ampm,p,t.isRed,!1,r):t.ampm&&t.shortText2&&(e.core.zopDrawArea.drawCalendarDateObjectName(l+1+s,g,2,t.shortText2,p,t.isRed,!1,r),e.core.zopDrawArea.drawCalendarDateObjectName(l+1+s,g,p+(12>p?1:0),t.ampm,.8*p,t.isRed,!1,r))}}paintMonthSpecialDetails(t,r){this.verifyDetailsArePopulatedFor(t);var s,o=e.core.zopHandler.getPixelFromZOP(t.startZOP),l=Math.max(o+r,this.topDateBottom);this.useDividerLine=!1,this.textHeight=this.textHeight2,this.extraTextHeight=this.extraTextHeight2,this.hourWidth=this.hourWidth2,this.averageObjectPixelHeight=this.averageObjectPixelHeight2,this.showExtraTextBelow=this.showExtraTextBelow2,this.showExtraTextToRight=this.showExtraTextToRight2;var c,p=Math.floor((l-o)/this.averageObjectPixelHeight2);for(s=p;s<t.details.length-1;s+=1)this.textHeight=this.textHeight2,this.extraTextHeight=this.extraTextHeight2,this.innerMarginTop=this.innerMarginTop2,c=s%2==0?0:1.5*(e.core.settings.minDateHeight-Math.max(0,2*this.averageObjectPixelHeight2-e.core.settings.minDateHeight)),s===p&&(c+=((l-o)/this.averageObjectPixelHeight2-p)*e.core.settings.minDateHeight*1.5),this.paintObject(t.details[s],!1,e.core.zopHandler.topPixel,c)}paintDaySpecialDetails(t,r){this.verifyDetailsArePopulatedFor(t);var s;s=e.core.zopHandler.getPixelFromZOP(Math.max(t.startZOP,this.visibleLowestLevelObjects[0].startZOP));var o=Math.max(s+r,this.topDateBottom),l=0,c=this.visibleLowestLevelObjects.length;for(s=0;s<this.visibleLowestLevelObjects.length;s++)l===0&&this.visibleLowestLevelObjects[s].startZOP>t.startZOP&&(l=s),s<c&&this.visibleLowestLevelObjects[s].startZOP>=t.endZOP&&(c=s);for(s=l;s<c;s+=1)this.paintObject(this.visibleLowestLevelObjects[s],!1,o,0)}}e.CalendarDateHandler=Hr;class kr{constructor(){this.rootCalendarDateObjects=[],this.visibleEventTagWrappers=[],this.visibleFullEventWrappers=[],this.visibleTagEventGroups=[],this.visibleBadges=[],this.lowestLevelCalendarDateObjectType=void 0,this.eventsFarRight=0,this.eventsFarLeft=0,this.absoluteMaxZOP=0,this.absoluteMinZOP=0,this.bottomZOP=0,this.topZOP=0,this.minFullEventZOPSize=0,this.counter=0,this.tagSurfaces=[],this.recalc=!0,this.commonTimeKeys=[],this.commonTimeKeysHelper=[],this.rootCalendarDateObjects.push(new e.CalendarDateObject(e.CalendarDateObjectType.Title,e.core.settings.absoluteMinDate,e.core.settings.absoluteMaxDate)),this.absoluteMinZOP=e.core.zopHandler.dateToZOP(e.core.settings.absoluteMinDate),this.absoluteMaxZOP=e.core.zopHandler.dateToZOP(e.core.settings.absoluteMaxDate),e.core.zopHandler.setAbsoluteMinMax(this.absoluteMinZOP,this.absoluteMaxZOP)}canEditEvent(t){return t=this.getOwningCalendar(t),t===void 0?!1:t.canEditCalendarEvents}isFullDayEvent(t){return D(t.startDateTime).minutes()===0&&D(t.startDateTime).hours()===0&&D(t.endDateTime).minutes()===0&&D(t.endDateTime).hours()===0}getOwningCalendar(t){return e.core.getCalendar(t.calendarId)}gradeCalendarEvents(t){for(var r=0;r<t.length;r++)this.gradeCalendarEvent(t[r])}gradeCalendarEvent(t){t.grade=100*(t.endZOP-t.startZOP)+this.sumLettersInString(t.summary),t.isGraded=!0}sumLettersInString(t){var r=0,s=t.toLowerCase();for(t=0;t<s.length;t++)r+=s.charCodeAt(t)-96;return r}drawAreaResized(){}dataLoadReady(){this.somethingChanged()}somethingChanged(){this.zoomLevel=this.getNewZoomLevelString(),this.prepareDataForPaint()}getNewZoomLevelString(){return e.core.calendarDateHandler.visibleLowestLevelObjects&&0<e.core.calendarDateHandler.visibleLowestLevelObjects.length?""+e.core.calendarDateHandler.visibleLowestLevelObjects[0].startZOP+e.core.calendarDateHandler.visibleLowestLevelObjects.length:"x"}paintCalendarEvents(){this.eventsFarLeft=Math.floor(e.core.settings.eventsFarLeft+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged),this.eventsFarRight=Math.ceil(e.core.zopHandler.rightPixel+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged),(e.core.hardRedraw||this.recalc||this.getNewZoomLevelString()!==this.zoomLevel)&&this.somethingChanged(),this.recalc=!this.recalc,this.calculateAllWidths(),this.visibleBadges=[],this.paintVisibleFullEventWrappers(),this.paintVisibleEventTags(),this.prepareBadges(),this.paintBadges()}prepareDataForPaint(){this.visibleTagEventGroups=[],this.visibleFullEventWrappers=[],this.visibleEventTagWrappers=[],this.minFullEventZOPSize=Math.ceil(e.core.zopHandler.getZOPFromPixel(e.core.settings.tagHeight+2)-e.core.zopHandler.getZOPFromPixel(0)+1e-5),this.topZOP=e.core.zopHandler.extendedTopZOP,this.bottomZOP=e.core.zopHandler.extendedBottomZOP;var t=new e.TagSurface;t.parentCollidingFullEventWrapper=void 0,t.minZOP=this.topZOP,t.maxZOP=this.bottomZOP,this.tagSurfaces=[],this.tagSurfaces.push(t),this.selectVisibleFullEventsIn(),this.selectVisibleTags()}paintSelectedCalendarEvent(t){for(t=0;t<this.visibleFullEventWrappers.length;t++);}selectVisibleTags(){var t,r,s,o;for(this.tagSurfaces.sort(function(l,c){return l.minZOP-c.minZOP}),t=0;t<this.tagSurfaces.length;t++)r=this.tagSurfaces[t],this.selectVisibleEventTagsIn(r.minZOP,r.maxZOP,!1,!1,r.parentCollidingFullEventWrapper);for(t=0;t<this.visibleEventTagWrappers.length;t++)for(s=this.visibleEventTagWrappers[t],r=t+1;r<this.visibleEventTagWrappers.length;r++)o=this.visibleEventTagWrappers[r],this.DoEventsCollide(s.calendarEvent,o.calendarEvent)&&(s.calendarEvent.grade>o.calendarEvent.grade?o.visible=!1:s.visible=!1)}prepareBadges(){for(var t,r,s,o,l=0,c=0,p=0;p<this.tagDatasToPaint.length;p++){var f=this.tagDatasToPaint[p];f.visible===!1&&(this.tagDatasToPaint.splice(p,1),p--)}for(p=0;p<this.tagDatasToPaint.length;p++){var g=!1,f=this.tagDatasToPaint[p],m=new e.Badge;o=f.calendarEventTagWrapper.calendarEvent,m.textColor=e.core.settings.theme.badgeColorIsTagTextColor?e.core.helper.getEventTextColor(o,e.core.getCalendar(o.calendarId)):e.core.helper.getEventColor(o,e.core.getCalendar(o.calendarId)),m.topZOPForAllEvents=o.startZOP,m.bottomZOPForAllEvents=o.endZOP;var S=0;for(r=p===this.tagDatasToPaint.length-1?this.bottomZOP:Math.min(o.endZOP/2+this.tagDatasToPaint[p+1].calendarEventTagWrapper.calendarEvent.startZOP/2,o.endZOP+e.core.zopHandler.getZOPFromPixelDiff(2*e.core.settings.tagTextHeight)),t=p===0?o.startZOP-e.core.zopHandler.getZOPFromPixelDiff(2*e.core.settings.tagTextHeight):Math.max(o.startZOP/2+this.tagDatasToPaint[p-1].calendarEventTagWrapper.calendarEvent.endZOP/2,o.startZOP-e.core.zopHandler.getZOPFromPixelDiff(2*e.core.settings.tagTextHeight));g===!1&&l<e.core.calendarDateHandler.visibleLowestLevelObjects.length;){for(s=e.core.calendarDateHandler.visibleLowestLevelObjects[l];c<s.calendarEvents.length;){if(o=s.calendarEvents[c],o.startZOP>r){g=!0;break}c++,this.doesEventStartWithinCalendarDateObject(o,s)===!0&&this.findFullEventWrapperForEvent(o)===void 0&&o.startZOP>t&&(S++,m.topZOPForAllEvents=Math.min(m.topZOPForAllEvents,o.startZOP),m.bottomZOPForAllEvents=Math.max(m.bottomZOPForAllEvents,o.endZOP))}g===!1&&(c=0,l++)}m.count=S,m.isPartial=f.isPartial,m.height=f.height,m.topPixel=f.topPixel,0<this.visibleBadges.length&&(t=this.visibleBadges[this.visibleBadges.length-1].topPixel+this.visibleBadges[this.visibleBadges.length-1].height+e.core.settings.margin+10>=m.topPixel,this.visibleBadges[this.visibleBadges.length-1].isPartial&&!m.isPartial&&(m.partialBadgeAbove=this.visibleBadges[this.visibleBadges.length-1],this.visibleBadges[this.visibleBadges.length-1].closeToBellow=t,m.closeToAbove=t),!this.visibleBadges[this.visibleBadges.length-1].isPartial&&m.isPartial&&(this.visibleBadges[this.visibleBadges.length-1].partialBadgeBellow=m,this.visibleBadges[this.visibleBadges.length-1].closeToBellow=t,m.closeToAbove=t)),this.visibleBadges.push(m)}}paintBadges(){for(var t=0;t<this.visibleBadges.length;t++){var r=this.visibleBadges[t],l=0,s=0,o=r.topPixel,l=l+r.count;1<l&&(s=r.height),!r.isPartial&&r.partialBadgeAbove&&.9>r.partialBadgeAbove.height/e.core.settings.tagHeight&&(l=r.partialBadgeAbove.closeToBellow&&r.partialBadgeAbove.closeToAbove?l+Math.ceil(r.partialBadgeAbove.count/2):r.partialBadgeAbove.closeToBellow&&!r.partialBadgeAbove.closeToAbove?l+r.partialBadgeAbove.count:l+0,1<l&&(s=Math.max(e.core.settings.tagHeight-r.partialBadgeAbove.height,s))),!r.isPartial&&r.partialBadgeBellow&&.9>r.partialBadgeBellow.height/e.core.settings.tagHeight&&(l=r.partialBadgeBellow.closeToAbove&&r.partialBadgeBellow.closeToBellow?l+Math.floor(r.partialBadgeBellow.count/2):r.partialBadgeBellow.closeToAbove&&!r.partialBadgeBellow.closeToBellow?l+r.partialBadgeBellow.count:l+0,1<l&&e.core.settings.tagHeight-r.partialBadgeBellow.height>s&&(s=e.core.settings.tagHeight-r.partialBadgeBellow.height,o=o+e.core.settings.tagHeight-s));var c=l+"";1<l&&e.core.zopDrawArea.drawBadge(e.core.settings.badgesLeft+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,o,s,e.core.settings.eventsFarLeft+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged-3*e.core.ratio,c,s/e.core.settings.tagHeight,r.textColor)}}selectBiggestFullEventAndMakeVisibleOld(t,r,s,o,l){var c,p,f,g,m;for(c=0;c<e.core.calendarDateHandler.visibleLowestLevelObjects.length;c++)for(m=e.core.calendarDateHandler.visibleLowestLevelObjects[c],p=0;p<m.possibleFullEvents.length;p++)g=m.possibleFullEvents[p],g.endZOP-g.startZOP>=this.minFullEventZOPSize&&!this.IsEventInCollisionList(l,g)&&g.startZOP<=r&&(!s||g.startZOP>=t)&&g.endZOP>=t&&(!o||g.endZOP<=r)&&((f===void 0||g.grade>f.grade)&&(f=g),p=m.possibleFullEvents.length);if(f!==void 0)return t=this.findFullEventWrapperForEvent(f),t===void 0&&(t=new e.CalendarFullEventWrapper(f),this.visibleFullEventWrappers.push(t)),this.AddTagSurface(t),t}selectBiggestFullEventAndMakeVisible(){var t,r,s,o,l;for(t=0;t<e.core.calendarDateHandler.visibleLowestLevelObjects.length;t++)for(l=e.core.calendarDateHandler.visibleLowestLevelObjects[t],r=0;r<l.possibleFullEvents.length;r++)o=l.possibleFullEvents[r],o.endZOP-o.startZOP>=this.minFullEventZOPSize&&this.findFullEventWrapperForEvent(o)===void 0&&this.calendarEventIsOnExtendedScreen(o)&&(s===void 0||o.grade>s.grade)&&(s=o);if(s!==void 0)return t=new e.CalendarFullEventWrapper(s),this.AddTagSurface(t),this.AddVisibleFullEventWrapper(t),t}AddVisibleFullEventWrapper(t){var r,s,o;for(r=this.visibleFullEventWrappers.length-1;0<=r;r--){var l=this.visibleFullEventWrappers[r];if(this.DoEventsCollide(t.calendarEvent,l.calendarEvent)){if(o=!1,t.parentCollidingFullEventWrappers!==void 0)for(s=0;s<t.parentCollidingFullEventWrappers.length;s++)this.IsEventInCollisionList(t.parentCollidingFullEventWrappers[s],l.calendarEvent)&&(o=!0);o===!1&&(l.childCollidingFullEventWrappers.push(t),t.parentCollidingFullEventWrappers.push(l))}}this.visibleFullEventWrappers.push(t)}DoEventsCollide(t,r){return t.startZOP<=r.endZOP&&t.endZOP>=r.startZOP}AddTagSurface(t){var r=new e.TagSurface;for(r.parentCollidingFullEventWrapper=t,r.minZOP=t.calendarEvent.startZOP,r.maxZOP=t.calendarEvent.endZOP,t=0;t<this.tagSurfaces.length;t++)this.SubtractSpaceFromSurface(this.tagSurfaces[t],r.minZOP,r.maxZOP);this.tagSurfaces.push(r)}SubtractSpaceFromSurface(t,r,s){if(t.minZOP>=r&&t.maxZOP<=s)t.maxZOP=t.minZOP-1;else if(t.minZOP>=r&&t.minZOP<s&&t.maxZOP>s)t.minZOP=s+1;else if(t.minZOP<r&&t.maxZOP>s){var o=new e.TagSurface;o.parentCollidingFullEventWrapper=t.parentCollidingFullEventWrapper,o.minZOP=s+1,o.maxZOP=t.maxZOP,this.tagSurfaces.push(o),t.maxZOP=r-1}else t.maxZOP>=r&&t.minZOP<=r&&t.maxZOP<=s&&(t.maxZOP=r-1)}IsEventInCollisionList(t,r){var s;if(t===void 0)return!1;if(t.calendarEvent===r)return!0;for(s=0;s<t.parentCollidingFullEventWrappers.length;s++)if(t.parentCollidingFullEventWrappers[s].calendarEvent===r||this.IsEventInCollisionList(t.parentCollidingFullEventWrappers[s],r))return!0;return!1}calculateMinAndPrefWidth(t){t.preferredWidth=(this.eventsFarRight-this.eventsFarLeft)*(.2+this.minFullEventZOPSize/(t.calendarEvent.endZOP-t.calendarEvent.startZOP))}calculateWhere2CollidingEventsMeet(t,r,s){s.left=t===this.eventsFarLeft?t:Math.max(t,this.eventsFarLeft+(r-this.eventsFarLeft)*(this.eventsFarRight-this.eventsFarLeft)/(r-this.eventsFarLeft+s.preferredWidth))}selectVisibleFullEventsIn(){var t;do t=this.selectBiggestFullEventAndMakeVisible();while(t!==void 0)}selectVisibleEventTagsIn(t,r,s,o,l){var c,p;for(c=0;c<e.core.calendarDateHandler.visibleLowestLevelObjects.length;c++)p=e.core.calendarDateHandler.visibleLowestLevelObjects[c],p.calendarDateObjectType===e.core.calendarDateHandler.lowestLevelCalendarDateObjectType&&p.startZOP<=r&&p.endZOP>=t-(p.endZOP-p.startZOP)&&this.selectVisibleEventTagsFor(p,t,r,s,o,l)}paintVisibleFullEventWrappers(){for(let t=0;t<this.visibleFullEventWrappers.length;t++){const r=this.visibleFullEventWrappers[t],s=r.calendarEvent;let o=r.left;const l=r.right-o;if(e.core.settings.rightToLeft&&(o=Math.floor(this.eventsFarRight+this.eventsFarLeft-o-l),r.paintedLeft=o,r.paintedRight=o+l),r.left=o,r.right=o+l,l>0){const c=e.core.helper.getEventTextColor(s,e.core.getCalendar(s.calendarId));e.core.zopDrawArea.drawFullEvent(o,s.startZOP,s.endZOP,l,s.color,c,s.summary,s.isHovered,s.isDetail)}}}paintVisibleEventTags(){var t,r,s,o=0,l=0,c=1e4,p,f,g,m,S;for(this.tagDatasToPaint=[],t=0;t<this.visibleTagEventGroups.length;t++)if(s=this.visibleTagEventGroups[t],s.calendarDateObject.calendarDateObjectType===e.core.calendarDateHandler.lowestLevelCalendarDateObjectType){for(l=o=0,c=1e4,r=s.calendarEventTagWrappers.length-1;0<=r;r--)f=s.calendarEventTagWrappers[r],p=e.core.zopHandler.getFractionalPixelDistance(f.calendarEvent.startZOP-s.parentTopZOP)-e.core.settings.tagHeight*r,c=Math.min(c,s.availableSpace/s.countDetails*(f.position+1)-e.core.settings.tagHeight*r),c=Math.min(p,c),c=Math.max(c,0),c=Math.floor(c),f.wantedPixelShift=c;for(r=0;r<s.calendarEventTagWrappers.length;r++)if(f=s.calendarEventTagWrappers[r],g=f.calendarEvent,c=g.summary,p=e.core.helper.getEventColor(g,e.core.getCalendar(g.calendarId)),g=e.core.helper.getEventTextColor(g,e.core.getCalendar(g.calendarId)),f.wantedPixelShift>l&&(l=f.wantedPixelShift,l=Math.min(l,s.extraSpace)),S=f.right-f.left,m=f.left,e.core.settings.rightToLeft===!0&&(m=this.eventsFarLeft,f.paintedLeft=m,f.paintedRight=m+S),f.visible===!0){var M=new e.TagDataToPaint;M.calendarEventTagWrapper=f,M.visible=!0,M.left=m,M.zopHeight=f.calendarEvent.endZOP-f.calendarEvent.startZOP,M.topPixel=e.core.zopHandler.getPixelFromZOP(s.startZOP)+e.core.settings.tagHeight*r+o+l,M.width=S,M.color=p,M.textColor=g,f.partialHeight?(M.height=f.partialHeight,M.isPartial=!0,o=f.partialHeight-e.core.settings.tagHeight):(M.height=e.core.settings.tagHeight,M.isPartial=!1),M.text=c,this.tagDatasToPaint.push(M),f.topPixel=M.topPixel,f.bottomPixel=M.topPixel+M.height}}this.tagDatasToPaint.sort(function(j,B){return j.topPixel-B.topPixel});var _;for(t=0;t<this.tagDatasToPaint.length-1;t++)r=this.tagDatasToPaint[t],s=this.tagDatasToPaint[t+1],t+2<this.tagDatasToPaint.length&&(_=this.tagDatasToPaint[t+2]),this.checkForPixelOverlap(r,s),this.checkForPixelOverlap(r,_);for(t=this.tagDatasToPaint.length-1;0<=t;t--)_=Math.max(0,e.core.zopHandler.getPixelFromZOP(this.tagDatasToPaint[t].calendarEventTagWrapper.calendarEvent.startZOP)-this.tagDatasToPaint[t].topPixel),_=Math.min(Math.floor(this.tagDatasToPaint[t].height/2),_),0<_&&(_=this.getSpaceBellow(this.tagDatasToPaint[t].topPixel+this.tagDatasToPaint[t].height,this.tagDatasToPaint[t].left,this.tagDatasToPaint[t].left+this.tagDatasToPaint[t].width,_,this.tagDatasToPaint),0<_&&(this.tagDatasToPaint[t].topPixel+=_));for(t=0;t<this.tagDatasToPaint.length;t++)r=this.tagDatasToPaint[t],r.visible===!0&&e.core.zopDrawArea.drawTag(r.left,r.topPixel,r.width,r.color,r.textColor,r.height,r.text,r.height/e.core.settings.tagHeight)}getSpaceBellow(t,r,s,o,l){var c,p=o;for(c=0;c<this.visibleFullEventWrappers.length&&0<p;c++){var f=this.visibleFullEventWrappers[c];e.core.zopHandler.getPixelFromZOP(f.calendarEvent.endZOP)>t&&f.left<s&&(p=Math.min(p,e.core.zopHandler.getPixelFromZOP(f.calendarEvent.startZOP)-t))}for(c=0;c<l.length&&0<p;c++)f=l[c],f.topPixel+f.height>t&&f.left<s&&f.left+f.width>r&&(p=Math.min(p,f.topPixel-t));return Math.min(o,p)}checkForPixelOverlap(t,r){if(r!==void 0){var s=Math.round(t.topPixel+t.height-r.topPixel);2<s&&(t.zopHeight>=r.zopHeight?(r.isPartial=!0,r.calendarEventTagWrapper.isPartial=!0,r.topPixel+=s,r.height-=s,2>=r.height&&(r.visible=!1)):t.zopHeight<r.zopHeight&&(t.isPartial=!0,t.calendarEventTagWrapper.isPartial=!0,t.height-=s,2>=t.height&&(e.Visible=!1)))}}copyEventsFromParent(t,r){var s;if(t.calendarEvents!==void 0)for(s=0;s<t.calendarEvents.length;s++)this.addEventToCalendarDateObjectAndChildren(t.calendarEvents[s],r)}getTopTagAtThisZoomLevel(t){var r;for(r=0;r<t.possibleFullEvents.length;r++)if(this.findFullEventWrapperForEvent(t.possibleFullEvents[r])===void 0&&this.doesEventStartWithinCalendarDateObject(t.possibleFullEvents[r],t))return t.possibleFullEvents[r];return t.topNonFullEvent}doesEventStartWithinCalendarDateObject(t,r){return t.startZOP>=r.startZOP&&t.startZOP<r.endZOP}selectAndOrderPossibleEventTagsAtThisZoomLevel(t){var r=0,s;if(t.possibleEventTagsAtThisZoomLevel=[],this.verifyChildCalendarDateObjectsAreReadyForParentToBeShown(t),0<t.details.length)for(r=0;r<t.details.length;r++)(s=this.getTopTagAtThisZoomLevel(t.details[r]))&&this.addPossibleEventTagsAtThisZoomLevel(t,s,r,t.details[r]);else for(r=0;r<t.calendarEvents.length;r++)s=t.calendarEvents[r],this.findFullEventWrapperForEvent(s)===void 0&&this.doesEventStartWithinCalendarDateObject(s,t)&&(this.addPossibleEventTagsAtThisZoomLevel(t,s,r,t),t.possibleEventTagsAtThisZoomLevel.push(new e.PossibleEventTagsAtThisZoomLevel(s,t,t,r)));t.possibleEventTagsAtThisZoomLevel.sort(function(o,l){return l.calendarEvent.grade-o.calendarEvent.grade})}addPossibleEventTagsAtThisZoomLevel(t,r,s,o){t.possibleEventTagsAtThisZoomLevelMinZop=t.possibleEventTagsAtThisZoomLevelMinZop===void 0?r.startZOP:Math.min(t.possibleEventTagsAtThisZoomLevelMinZop,r.startZOP),t.possibleEventTagsAtThisZoomLevelMaxZop=t.possibleEventTagsAtThisZoomLevelMaxZop===void 0?r.endZOP:Math.max(t.possibleEventTagsAtThisZoomLevelMaxZop,r.endZOP),t.possibleEventTagsAtThisZoomLevel.push(new e.PossibleEventTagsAtThisZoomLevel(r,t,o,s))}removeCalendarEvent(t){var r;for(r=0;r<e.core.calendarDateHandler.rootCalendarDateObjects.length;r++)this.removeCalendarEventFromDateObjectandChildren(t,e.core.calendarDateHandler.rootCalendarDateObjects[r])}removeCalendarEventFromDateObjectandChildren(t,r){var s;for(r.isReadyForParentToBeShown=!1,s=0;s<r.possibleFullEvents.length;s++)if(r.possibleFullEvents[s]==t){r.possibleFullEvents.splice(s,1);break}for(s=0;s<r.calendarEvents.length;s++)if(r.calendarEvents[s]==t){r.calendarEvents.splice(s,1);break}if(r.topNonFullEvent=void 0,r.possibleEventTagsAtThisZoomLevel=[],r.possibleEventTagsAtThisZoomLevelMinZop=void 0,r.possibleEventTagsAtThisZoomLevelMaxZop=void 0,r.details)for(s=0;s<r.details.length;s++)this.removeCalendarEventFromDateObjectandChildren(t,r.details[s])}getCalendarEventsByIdAndRecurringId(t){var r,s,o=[];for(s=0;s<e.core.calendarDateHandler.rootCalendarDateObjects.length;s++){var l=e.core.calendarDateHandler.rootCalendarDateObjects[s];for(r=0;r<l.calendarEvents.length;r++)l.calendarEvents[r].recurringEventId!=t&&l.calendarEvents[r].id!=t||o.push(l.calendarEvents[r])}return o}reorderAllEvents(){var t;for(t=0;t<e.core.calendarDateHandler.rootCalendarDateObjects.length;t++)this.reorderAllEventsInDateObjectandChildren(e.core.calendarDateHandler.rootCalendarDateObjects[t])}reorderAllEventsInDateObjectandChildren(t){var r;if(t.isReadyForParentToBeShown=!1,t.topNonFullEvent=void 0,t.possibleEventTagsAtThisZoomLevel=[],t.possibleEventTagsAtThisZoomLevelMinZop=void 0,t.possibleEventTagsAtThisZoomLevelMaxZop=void 0,t.details)for(r=0;r<t.details.length;r++)this.reorderAllEventsInDateObjectandChildren(t.details[r])}clearAllEvents(){var t;for(t=0;t<e.core.calendarDateHandler.rootCalendarDateObjects.length;t++)this.clearAllEventsFromDateObjectandChildren(e.core.calendarDateHandler.rootCalendarDateObjects[t]);this.visibleEventTagWrappers=[],this.visibleTagEventGroups=[]}clearAllEventsFromDateObjectandChildren(t){var r;if(t.isReadyForParentToBeShown=!1,t.possibleFullEvents=[],t.calendarEvents=[],t.topNonFullEvent=void 0,t.possibleEventTagsAtThisZoomLevel=[],t.possibleEventTagsAtThisZoomLevelMinZop=void 0,t.possibleEventTagsAtThisZoomLevelMaxZop=void 0,t.details)for(r=0;r<t.details.length;r++)this.clearAllEventsFromDateObjectandChildren(t.details[r])}addEventToCalendar(t){var r;for(r=0;r<e.core.calendarDateHandler.rootCalendarDateObjects.length;r++)this.addEventToCalendarDateObjectAndChildren(t,e.core.calendarDateHandler.rootCalendarDateObjects[r]);this.addCommonTimeKey(t.startDateTime,2)}addCommonTimeKey(t,r){var s=t.getHours()+"-"+t.getMinutes(),o=this.commonTimeKeysHelper.indexOf(s);o==-1?(this.commonTimeKeys.push({timeKey:s,counter:1}),this.commonTimeKeysHelper.push(s)):this.commonTimeKeys[o].counter++}findCommonTimes(){var t,r=new Date;for(r.setHours(0,0,0,0),t=0;24>t;t++)r.setHours(t,0,0,0),this.addCommonTimeKey(r,6),r.setHours(t,5,0,0),this.addCommonTimeKey(r,1),r.setHours(t,10,0,0),this.addCommonTimeKey(r,6),r.setHours(t,15,0,0),this.addCommonTimeKey(r,2),r.setHours(t,20,0,0),this.addCommonTimeKey(r,1),r.setHours(t,25,0,0),this.addCommonTimeKey(r,1),r.setHours(t,30,0,0),this.addCommonTimeKey(r,4),r.setHours(t,35,0,0),this.addCommonTimeKey(r,1),r.setHours(t,40,0,0),this.addCommonTimeKey(r,1),r.setHours(t,45,0,0),this.addCommonTimeKey(r,2),r.setHours(t,50,0,0),this.addCommonTimeKey(r,1),r.setHours(t,55,0,0),this.addCommonTimeKey(r,1);this.commonTimeKeys.sort(function(s,o){return o.counter-s.counter})}addEventToCalendarDateObjectAndChildren(t,r){var s;if(t.endZOP>=r.startZOP&&t.startZOP<r.endZOP&&(r.calendarEvents.push(t),t.endZOP-t.startZOP>(r.endZOP-r.startZOP)/32&&r.possibleFullEvents.push(t),r.isReadyForParentToBeShown=!1,r.details))for(s=0;s<r.details.length;s++)this.addEventToCalendarDateObjectAndChildren(t,r.details[s])}getOrCreateEventTagWrapperFor(t){var r=this.findEventTagWrappersForEvent(t);return r===void 0&&(r=new e.CalendarEventTagWrapper(t),r.calendarEvent=t,this.visibleEventTagWrappers.push(r)),r}findFullEventWrapperForEvent(t){var r;for(r=0;r<this.visibleFullEventWrappers.length;r++)if(this.visibleFullEventWrappers[r].calendarEvent==t)return this.visibleFullEventWrappers[r]}findEventTagWrappersForEvent(t){var r;for(r=0;r<this.visibleEventTagWrappers.length;r++)if(this.visibleEventTagWrappers[r].calendarEvent==t)return this.visibleEventTagWrappers[r]}verifyChildCalendarDateObjectsAreReadyForParentToBeShown(t){e.core.calendarDateHandler.verifyDetailsArePopulatedFor(t);var r=t.details.length,s,o;for(s=0;s<r;s++)o=t.details[s],this.verifyCalendarDateObjectIsReadyForParentToBeShown(o)}verifyCalendarDateObjectIsReadyForParentToBeShown(t){if(t.isReadyForParentToBeShown!==!0){var r;for(t.possibleFullEvents.sort(function(s,o){return o.grade-s.grade}),t.topNonFullEvent=void 0,r=0;r<t.calendarEvents.length;r++)t.possibleFullEvents.indexOf(t.calendarEvents[r])===-1&&(t.topNonFullEvent===void 0||t.topNonFullEvent.grade<t.calendarEvents[r].grade)&&(t.topNonFullEvent=t.calendarEvents[r]);t.isReadyForParentToBeShown=!0}}selectVisibleEventTagsFor(t,r,s,o,l,c){e.core.debugCounter++,o=!0,this.verifyChildCalendarDateObjectsAreReadyForParentToBeShown(t),this.selectAndOrderPossibleEventTagsAtThisZoomLevel(t);var U=void 0,j=0,p,f=0,g=0,m=0,S,M,_=!1,j=Math.max(r,Math.min(t.startZOP,t.possibleEventTagsAtThisZoomLevelMinZop));for(S=Math.min(s,Math.max(t.endZOP,t.possibleEventTagsAtThisZoomLevelMaxZop)),p=0;p<t.possibleEventTagsAtThisZoomLevel.length;p++)U=t.possibleEventTagsAtThisZoomLevel[p].calendarEvent,(o&&U.startZOP>=r||!o&&U.endZOP>=r)&&(l&&U.endZOP<=s||!l&&U.startZOP<=s)&&(j=Math.min(j,U.startZOP),S=Math.max(S,U.endZOP)),t.possibleEventTagsAtThisZoomLevel[p].calendarEvent.endZOP>=r&&t.possibleEventTagsAtThisZoomLevel[p].calendarEvent.startZOP<=r&&c!==void 0&&(g=this.getOrCreateEventTagWrapperFor(t.possibleEventTagsAtThisZoomLevel[p].calendarEvent),c.childCollidingEventTagWrappers.push(g),g.parentCollidingFullEventWrappers.push(c));var B=Math.ceil(e.core.zopHandler.getFractionalPixelDistance(S-j)-.5),Ce=Math.ceil(B/e.core.settings.tagHeight),Qe=Math.floor(B/e.core.settings.tagHeight),Ze=B-Qe*e.core.settings.tagHeight,X=new e.CalendarEventTagGroup(t,B),U=t.startZOP>=r&&t.endZOP<=s,Ca=0;if(X.startZOP=j,X.countDetails=t.details.length,U===!1&&(Ca=this.getPositionSubtractionForEventTags(t,r),X.countDetails=this.countDetailsForPartialCalendarDateObject(t,r,s)),0<Ce){for(X.calendarDateObject=t,X.parentTopZOP=j,X.parentBottomZOP=S,this.visibleTagEventGroups.push(X),t.possibleEventTagsAtThisZoomLevel&&(m=t.possibleEventTagsAtThisZoomLevel.length-1),p=0;p<Ce;p++){for(U=void 0,j=0;f<=m&&U===void 0;)(o&&t.possibleEventTagsAtThisZoomLevel[f].calendarEvent.startZOP>=r||!o&&t.possibleEventTagsAtThisZoomLevel[f].calendarEvent.endZOP>=r)&&(l&&t.possibleEventTagsAtThisZoomLevel[f].calendarEvent.endZOP<=s||!l&&t.possibleEventTagsAtThisZoomLevel[f].calendarEvent.startZOP<=s)&&this.calendarEventIsOnExtendedScreen(t.possibleEventTagsAtThisZoomLevel[f].calendarEvent)&&(U=t.possibleEventTagsAtThisZoomLevel[f].calendarEvent,j=t.possibleEventTagsAtThisZoomLevel[f].position),f+=1;if(U===void 0&&p===0&&t.topNonFullEvent&&(o&&t.topNonFullEvent.startZOP>=r||!o&&t.topNonFullEvent.endZOP>=r)&&(l&&t.topNonFullEvent.endZOP<=s||!l&&t.topNonFullEvent.startZOP<=s)&&this.calendarEventIsOnExtendedScreen(t.topNonFullEvent)&&(U=t.topNonFullEvent,j=100),U){for(_=!1,g=0;g<X.calendarEventTagWrappers.length;g++)S=X.calendarEventTagWrappers[g].calendarEvent.startZOP,M=X.calendarEventTagWrappers[g].calendarEvent.endZOP,(U.startZOP>=S&&U.startZOP<=M||U.endZOP>=S&&U.endZOP<=M)&&(_=!0);_?--p:(g=this.getOrCreateEventTagWrapperFor(U),g.calendarEvent=U,g.position=j-Ca,g.left=this.eventsFarLeft,g.right=this.eventsFarRight,X.calendarEventTagWrappers.push(g),c!==void 0&&(c.childCollidingEventTagWrappers.push(g),g.parentCollidingFullEventWrappers.push(c)))}}X.calendarEventTagWrappers.length>Qe?(X.calendarEventTagWrappers[X.calendarEventTagWrappers.length-1].partialHeight=Ze,X.calendarEventTagWrappers[X.calendarEventTagWrappers.length-1].isPartial=!0):X.extraSpace=B-X.calendarEventTagWrappers.length*e.core.settings.tagHeight,X.calendarEventTagWrappers.sort(function(is,os){return is.position-os.position})}}calendarEventIsOnExtendedScreen(t){return t.startZOP<=this.bottomZOP&&t.endZOP>=this.topZOP}getPositionSubtractionForEventTags(t,r){var s;for(s=0;s<t.details.length&&!(t.details[s].startZOP>=r);s++);return s}countDetailsForPartialCalendarDateObject(t,r,s){var o,l=0;for(o=0;o<t.details.length;o++)t.details[o].startZOP>=r&&t.details[o].endZOP<=s&&(l+=1);return l}calculateAllWidths(){var t,r,s,o,l;for(t=0;t<this.visibleFullEventWrappers.length;t++){for(s=this.visibleFullEventWrappers[t],r=0;r<s.childCollidingEventTagWrappers.length;r++)s.childCollidingEventTagWrappers[r].left=void 0,s.childCollidingEventTagWrappers[r].right=void 0;s.widthPercent=0,s.widthPercentWhenTagsExist=0,s.left=void 0,s.right=void 0,s.preferredWidth=void 0,s.paintedLeft=void 0,s.paintedRight=void 0}for(t=0;t<this.visibleFullEventWrappers.length;t++)if(s=this.visibleFullEventWrappers[t],r=s.childCollidingEventTagWrappers!==void 0&&0<s.childCollidingEventTagWrappers.length){for(r=l=0;r<s.childCollidingEventTagWrappers.length;r++)o=s.childCollidingEventTagWrappers[r],o=this.calculateOutOfScopeFactor(o.calendarEvent),l=Math.max(l,o);for(l=this.calculateTagWidthsHelper(s,this.topZOP,this.bottomZOP,l),r=0;r<s.childCollidingEventTagWrappers.length;r++)s.childCollidingEventTagWrappers[r].right=this.eventsFarRight,l>=this.eventsFarRight?s.childCollidingEventTagWrappers[r].visible=!1:(s.childCollidingEventTagWrappers[r].left===void 0||s.childCollidingEventTagWrappers[r].left<l)&&(s.childCollidingEventTagWrappers[r].left=l)}for(t=0;t<this.visibleFullEventWrappers.length;t++){if(s=this.visibleFullEventWrappers[t],l=this.eventsFarLeft,o=this.eventsFarRight,s.childCollidingEventTagWrappers!==void 0)for(r=0;r<s.childCollidingEventTagWrappers.length;r++)s.childCollidingEventTagWrappers[r].visible&&(o=Math.min(s.childCollidingEventTagWrappers[r].left,o));this.calculateWidthsHelper(s,l,o,this.topZOP,this.bottomZOP),s.left===void 0&&(s.left=this.eventsFarLeft),s.right===void 0&&(s.right=this.eventsFarRight)}for(t=0;t<this.visibleEventTagWrappers.length;t++){if(l=this.eventsFarLeft,o=this.visibleEventTagWrappers[t],o.parentCollidingFullEventWrappers!==void 0)for(r=0;r<o.parentCollidingFullEventWrappers.length;r++)l=Math.max(l,o.parentCollidingFullEventWrappers[r].right);o.left=l}}calculateOutOfScopeFactor(t){var r=1,s=(e.core.zopHandler.bottomZOP-e.core.zopHandler.topZOP)/10;return t.endZOP<e.core.zopHandler.topZOP-s?r=(t.endZOP-this.topZOP)/(e.core.zopHandler.topZOP-s-this.topZOP):t.startZOP>e.core.zopHandler.bottomZOP+s&&(r=(t.startZOP-this.bottomZOP)/(e.core.zopHandler.bottomZOP+s-this.bottomZOP)),r}calculateTagWidthsHelper(t,r,s,o){r=this.eventsFarRight-this.eventsFarLeft;var l,c;s=this.eventsFarLeft;var p,f,g=0,m=0,S=1,M;for(t=this.GetFullEventWrapperCollisionPaths(t),f=0;f<t.length;f++){for(l=t[f],p=0;p<l.length;p++)c=l[p],M=this.calculateOutOfScopeFactor(c.calendarEvent),g+=(c.calendarEvent.endZOP-c.calendarEvent.startZOP)*M;for(g+=this.minFullEventZOPSize*o*o,p=0;p<l.length;p++)c=l[p],M=this.calculateOutOfScopeFactor(c.calendarEvent),this.calculateFullEventWrapperWidthPercent(c,g,S,M),S=Math.max(0,Math.min(1,(c.calendarEvent.endZOP-c.calendarEvent.startZOP)/(this.minFullEventZOPSize/1.2)-1.2)),m+=c.widthPercent;for(p=Math.max(.1,(g-this.minFullEventZOPSize)/g)*S*o*o,m+=p,p=0;p<l.length;p++)c=l[p],c=Math.floor(c.widthPercent/m*r),c<e.core.settings.tagHeight&&(r+=e.core.settings.tagHeight-c,c=e.core.settings.tagHeight),s+=c}return s>this.eventsFarRight-3&&(s=this.eventsFarRight),s}calculateFullEventWrapperMaxWidth(t){return Math.max((this.eventsFarRight-this.eventsFarLeft)*Math.min(1,2*(this.bottomZOP-this.topZOP)/(t.calendarEvent.endZOP-t.calendarEvent.startZOP)),e.core.settings.tagHeight+e.core.settings.tagColorWidth+1)}calculateWidthsHelper(t,r,s,o,l){o=s-r;var c,p,f,g,m,S=l=0,M=1;for(t=this.GetFullEventWrapperCollisionPaths(t),m=0;m<t.length;m++){for(c=t[m],g=0;g<c.length;g++)p=c[g],f=this.calculateOutOfScopeFactor(p.calendarEvent),l+=(p.calendarEvent.endZOP-p.calendarEvent.startZOP)*f;for(g=0;g<c.length;g++)p=c[g],f=this.calculateOutOfScopeFactor(p.calendarEvent),this.calculateFullEventWrapperWidthPercent(p,l,M,f),M=Math.max(.05,Math.min(1,(p.calendarEvent.endZOP-p.calendarEvent.startZOP)/this.minFullEventZOPSize-.95)),S+=p.widthPercent;for(g=0;g<c.length;g++){p=c[g],(p.left===void 0||p.left>r)&&this.SetLeftForFullEventWrapper(p,r),f=p.widthPercent/S*o;var _=this.calculateFullEventWrapperMaxWidth(p);_<f&&(o+=2*(f-_),f=_),f<e.core.settings.tagHeight&&(o+=e.core.settings.tagHeight-f,f=e.core.settings.tagHeight),r+=f,(p.right===void 0||p.right>r)&&this.SetRightForFullEventWrapper(p,Math.floor(r))}0<c.length&&c[c.length-1].right>s-3&&(c[c.length-1].right=s)}}calculateFullEventWrapperWidthPercent(t,r,s,o){t.widthPercent=Math.max(.16,(r-(t.calendarEvent.endZOP-t.calendarEvent.startZOP))/r)*s*o}GetFullEventWrapperCollisionPaths(t){var r,s,o=[];if(t.parentCollidingFullEventWrappers===void 0||t.parentCollidingFullEventWrappers.length===0)return[[t]];for(r=0;r<t.parentCollidingFullEventWrappers.length;r++){var l=this.GetFullEventWrapperCollisionPaths(t.parentCollidingFullEventWrappers[r]);for(s=0;s<l.length;s++)l[s].push(t),o.push(l[s])}return o}SetRightForFullEventWrapper(t,r){var s;if((t.right===void 0||t.right>r)&&(t.right=r,t.childCollidingFullEventWrappers!==void 0))for(s=0;s<t.childCollidingFullEventWrappers.length;s++)this.SetLeftForFullEventWrapper(t.childCollidingFullEventWrappers[s],r)}SetLeftForFullEventWrapper(t,r){var s;if(t.left!==r&&(t.left=r,t.parentCollidingFullEventWrappers!==void 0))for(s=0;s<t.parentCollidingFullEventWrappers.length;s++)this.SetRightForFullEventWrapper(t.parentCollidingFullEventWrappers[s],r)}SetLeftForEventTagWrapper(t,r){var s;if(t.left!==r&&(t.left=r,t.parentCollidingFullEventWrappers!==void 0))for(s=0;s<t.parentCollidingFullEventWrappers.length;s++)this.SetRightForFullEventWrapper(t.parentCollidingFullEventWrappers[s],r)}gotoBadgeAt(t,r){if(t>=e.core.settings.badgesLeft&&t<=e.core.settings.eventsFarLeft){for(var s=0;s<this.visibleBadges.length;s++)if(r>=this.visibleBadges[s].topPixel&&r<=this.visibleBadges[s].topPixel+e.core.settings.tagHeight){if(this.visibleBadges[s].count==0)break;var o=this.visibleBadges[s].bottomZOPForAllEvents-this.visibleBadges[s].topZOPForAllEvents;return e.core.drawAreaEffects.startAutoZoom(this.visibleBadges[s].topZOPForAllEvents-o,this.visibleBadges[s].bottomZOPForAllEvents+o,!1,function(){}),!0}}return!1}selectCalendarEventObjectAt(t,r){var s,o,l=e.core.zopHandler.getZOPFromPixel(r);for(this.selectedCalendarEvent=void 0,s=0;s<this.visibleFullEventWrappers.length;s++)o=this.visibleFullEventWrappers[s],l>=o.calendarEvent.startZOP&&l<=o.calendarEvent.endZOP&&t>=o.paintedLeft&&t<=o.paintedRight&&(this.selectedCalendarEvent=this.visibleFullEventWrappers[s].calendarEvent);for(s=0;s<this.visibleEventTagWrappers.length;s++)o=this.visibleEventTagWrappers[s],r>=o.topPixel&&r<=o.bottomPixel&&t>=o.paintedLeft&&t<=o.paintedRight&&(this.selectedCalendarEvent=this.visibleEventTagWrappers[s].calendarEvent);return this.selectedCalendarEvent}}e.CalendarEventHandler=kr;class Ar{constructor(){this.markerLeft=0,this.markerWidth=0,this.markerHeight=0,this.margin=0,this.topPanelHeight=0,this.topPanelTop=0,this.topPanelWidth=0,this.topPanelLeft=0,this.textColor=this.markerColor="",this.bottomMarkerY=0,this.topMarkerY=0,this.draggingBottomMarkerOffset=0,this.draggingTopMarkerOffset=0,this.startDragBottomY=void 0,this.startDragTopY=void 0,this.startDragBottomDateTime=void 0,this.startDragTopDateTime=void 0,this.originalBottomDateTime=void 0,this.originalTopDateTime=void 0,this.bottomText="",this.topText="",this.precision=4,this.buttonHeight=0,this.buttonWidth=0,this.cancelButtonLeft=0,this.cancelButtonTop=0,this.okButtonLeft=0,this.okButtonTop=0,this.pageHtml='<div id="dateTimeSelectionTopBar" class="topBar" style="position:relative; z-index:1000">    <button id="dateTimeSelectionCancel" class="topBarButton" style="width:50%; z-index:1000"><img src="images/cross.svg" class="topBarImage"/><span>{#Cancel#}</span></button>    <button id="dateTimeSelectionOk" class="topBarButton" style="width:50%; z-index:1000"><img src="images/check.svg" class="topBarImage"/><span>{#Ok#}</span></button></div>'}init(){this.topPanelHeight=e.core.settings.titleWidth}paint(){this.calendarEventObject!==void 0&&e.core.appStateHandler.isChoosingDateTimeForEvent===!0&&(this.topPanelLeft=e.core.zopDrawArea.screenLeft,this.topPanelWidth=e.core.domHandler.screenWidth,this.topPanelTop=e.core.zopDrawArea.screenTop,this.topPanelHeight=this.getSpaceTakenAtTop(),this.margin=this.topPanelHeight/6,this.markerHeight=2*e.core.settings.tagHeight,this.markerWidth=2*e.core.settings.titleWidth,this.markerLeft=e.core.zopDrawArea.screenLeft+e.core.domHandler.screenWidth-this.markerWidth,this.markerColor=e.core.settings.theme.colorDark,this.textColor=e.core.settings.theme.colorLight,this.calendarEventObject&&this.paintMarkers())}startEditing(t,r,s){this.callback=s,this.editType=r,this.calendarEventObject=t,this.originalTopDateTime=t.startDateTime,this.originalBottomDateTime=t.endDateTime,this.topText="START",this.bottomText="END",r=6*(t.endZOP-t.startZOP),e.core.drawAreaEffects.startAutoZoom(t.startZOP-r,t.endZOP+r,!1,function(){})}paintMarkers(){this.topMarkerY=e.core.zopHandler.getPixelFromZOP(this.calendarEventObject.startZOP),this.bottomMarkerY=e.core.zopHandler.getPixelFromZOP(this.calendarEventObject.endZOP),e.core.appStateHandler.isDraggingTopMarker?(this.paintMarker(this.bottomText,this.bottomMarkerY,!1),this.paintMarker(this.topText,this.topMarkerY,!0)):(this.paintMarker(this.topText,this.topMarkerY,!0),this.paintMarker(this.bottomText,this.bottomMarkerY,!1))}makeNiceTimeToShow(t){return t.getMonth()+" "+t.getDate()+" "+t.getHours()+" "+t.getMinutes()}makeVisible(t){if(t){this.buttonDiv=e.core.domHandler.addDiv("dateTimeSelectionbuttons","","controlsRoot"),this.buttonDiv.innerHTML=this.pageHtml,t=(e.core.settings.titleWidth/e.core.ratio-24)/2;var r=document.getElementById("dateTimeSelectionOk"),s=document.getElementById("dateTimeSelectionCancel");r.style.padding=t+"px",s.style.padding=t+"px",r.style.backgroundColor=e.core.settings.theme.colorDark,s.style.backgroundColor=e.core.settings.theme.colorDark,e.core.domHandler.addClickEvent("dateTimeSelectionOk",this.saveChanges,this),e.core.domHandler.addClickEvent("dateTimeSelectionCancel",this.cancelChanges,this)}else e.core.domHandler.removeElement(this.buttonDiv.id)}getSpaceTakenAtTop(){return e.core.settings.titleWidth}getSpaceTakenAtBottom(){return e.core.settings.titleWidth}paintButton(t,r,s,o,l){e.core.drawArea.drawFilledRectangle({x:r,y:s,width:o,height:l,fillStyle:e.core.settings.theme.colorDark,hasShadow:!1,rounded:!1,strokeStyle:void 0}),l-=6,e.core.drawArea.setFont(l,!1,!1,!1);var c=e.core.zopDrawArea.measureTextWidth(t,l,!1,!0),c=(o-c)/2;e.core.zopDrawArea.drawText(t,r+c,s,-3,l,e.core.settings.theme.colorLight,e.core.settings.theme.colorDark,!1,o-c,!1,!1)}paintMarker(t,r,s){s?(e.core.zopDrawArea.drawHorizontalLineThick(e.core.settings.eventsFarLeft-1,e.core.zopHandler.getZOPFromPixel(r-1),this.markerLeft+this.markerWidth,this.markerColor,3,!0),r-=this.markerHeight):e.core.zopDrawArea.drawHorizontalLineThick(e.core.settings.eventsFarLeft-1,e.core.zopHandler.getZOPFromPixel(r+1),this.markerLeft+this.markerWidth,this.markerColor,3,!0),e.core.drawArea.drawFilledRectangle({x:this.markerLeft,y:r,widht:this.markerWidth,height:this.markerHeight,fillStyle:this.markerColor,hasShadow:!0,rounded:!1,strokeStyle:void 0}),s=this.markerHeight/6;var o=this.markerLeft+this.markerWidth-4*s,l=r+(this.markerHeight-3*s)/2-1;e.core.drawArea.drawFilledRectangle({x:o+1*s,y:l+0*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+1*s,y:l+1*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+1*s,y:l+2*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+1*s,y:l+3*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+2*s,y:l+0*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+2*s,y:l+1*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+2*s,y:l+2*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:o+2*s,y:l+3*s,widht:2,height:2,fillStyle:this.textColor,hasShadow:!1,rounded:!1,strokeStyle:void 0}),s=this.markerHeight/2-4,e.core.zopDrawArea.drawText(t,this.markerLeft+5,r+this.markerHeight/2-s/2,0,s,this.textColor,this.markerColor,!1,this.markerWidth-5,!1,!1)}click(t,r){return!1}saveChanges(t){e.core.appStateHandler.setChoosingDateTimeForEvent(!1),this.callback?this.callback():e.core.calendarDataProxy.editExistingEvent(this.calendarEventObject,this.editType)}cancelChanges(t){e.core.appStateHandler.setChoosingDateTimeForEvent(!1),this.calendarEventObject.startDateTime=this.originalTopDateTime,this.calendarEventObject.endDateTime=this.originalBottomDateTime,e.core.zopHandler.updateStartEndZOP(this.calendarEventObject),this.callback&&this.callback()}hitTopMarkerAt(t,r){return r>=this.topMarkerY-this.markerHeight&&r<=this.topMarkerY&&t>=this.markerLeft&&t<=this.markerLeft+this.markerWidth}hitBottomMarkerAt(t,r){return r>=this.bottomMarkerY&&r<=this.bottomMarkerY+this.markerHeight&&t>=this.markerLeft&&t<=this.markerLeft+this.markerWidth}startDraggingTopMarker(t){this.draggingTopMarkerOffset=t,e.core.appStateHandler.isDraggingTopMarker=!0,this.startDragTopDateTime=this.calendarEventObject.startDateTime,e.core.appStateHandler.isDraggingBottomMarker||(this.startDragBottomDateTime=this.calendarEventObject.endDateTime)}startDraggingBottomMarker(t){this.draggingBottomMarkerOffset=t,e.core.appStateHandler.isDraggingBottomMarker=!0,this.startDragBottomDateTime=this.calendarEventObject.endDateTime}continueDraggingTopMarker(t){t-=this.draggingTopMarkerOffset,this.topMarkerY=e.core.zopHandler.getPixelFromZOP(e.core.zopHandler.dateToZOP(this.startDragTopDateTime))+t,(t=e.core.calendarDateHandler.getClosestFakeDetailAt(this.topMarkerY,this.precision,!0))&&(this.calendarEventObject.startDateTime=t.startDateTime,this.calendarEventObject.startZOP=t.startZOP,this.topText=t.shortText,t.shortText2&&(this.topText+=" "+t.shortText2)),!e.core.appStateHandler.isDraggingBottomMarker&&(t=this.startDragBottomDateTime.getTime()-this.startDragTopDateTime.getTime(),this.calendarEventObject.endDateTime=new Date(this.calendarEventObject.startDateTime.getTime()+t),e.core.zopHandler.updateStartEndZOP(this.calendarEventObject),this.bottomMarkerY=e.core.zopHandler.getPixelFromZOP(this.calendarEventObject.endZOP),t=e.core.calendarDateHandler.getClosestFakeDetailAt(this.bottomMarkerY,1,!0))&&(this.calendarEventObject.endDateTime=t.startDateTime,this.calendarEventObject.endZOP=t.startZOP,this.bottomText=t.shortText,t.shortText2&&(this.bottomText+=" "+t.shortText2))}continueDraggingBottomMarker(t){t-=this.draggingBottomMarkerOffset,this.bottomMarkerY=e.core.zopHandler.getPixelFromZOP(e.core.zopHandler.dateToZOP(this.startDragBottomDateTime))+t,this.bottomMarkerY=Math.max(this.bottomMarkerY,this.topMarkerY+this.precision+1),(t=e.core.calendarDateHandler.getClosestFakeDetailAt(this.bottomMarkerY,this.precision,!0))&&(this.calendarEventObject.endDateTime=t.startDateTime,this.calendarEventObject.endZOP=t.startZOP,this.bottomText=t.shortText,t.shortText2&&(this.bottomText+=" "+t.shortText2))}endDraggingTopMarker(){e.core.appStateHandler.isDraggingTopMarker=!1}endDraggingBottomMarker(){e.core.appStateHandler.isDraggingBottomMarker=!1}}e.DateTimeSelectionHandler=Ar;class Br{constructor(){this.touches=[],this.mouseWasDraged=this.mouseRightDown=this.mouseLeftDown=!1,this.canBeAClick=!0,this.touchOneFingerStarted=this.startedInTitleArea=!1,this.touchOneFingerStartY=this.touchOneFingerStartX=0,this.toucohEnabledDevice=this.touchTwoFingerStarted=!1,this.touchSlop=8,this.elementsWithMouseEvents=[],this.timeForLastScrollEvent=this.fingerLastDraggingBottomMarker=this.fingerLastDraggingTopMarker=0}addBatchEventsTo(t){this.removeBatchElementsFrom(t),this.touchEnd=this.touchEnd.bind(this),t.addEventListener("touchend",this.touchEnd,!1),this.touchMove=this.touchMove.bind(this),t.addEventListener("touchmove",this.touchMove,!1),this.touchStart=this.touchStart.bind(this),t.addEventListener("touchstart",this.touchStart,!1),this.touchLeave=this.touchLeave.bind(this),t.addEventListener("touchleave",this.touchLeave,!1),e.core.isCordovaApp||this.addMouseEvents(t)}removeBatchElementsFrom(t){t.removeEventListener("touchend",this.touchEnd,!1),t.removeEventListener("touchmove",this.touchMove,!1),t.removeEventListener("touchstart",this.touchStart,!1),t.removeEventListener("touchleave",this.touchLeave,!1),e.core.isCordovaApp||this.removeMouseEvents(t)}addMouseEvents(t){this.elementsWithMouseEvents.push(t),this.mouseDown=this.mouseDown.bind(this),t.addEventListener("mousedown",this.mouseDown,!1),this.mouseMove=this.mouseMove.bind(this),t.addEventListener("mousemove",this.mouseMove,!1),this.mouseUp=this.mouseUp.bind(this),t.addEventListener("mouseup",this.mouseUp,!1),this.mouseLeave=this.mouseLeave.bind(this),t.addEventListener("mouseleave",this.mouseLeave,!1),this.mouseScroll=this.mouseScroll.bind(this),t.addEventListener("mousewheel",this.mouseScroll,!1),window.addEventListener("DOMMouseScroll",this.mouseScroll,!1)}removeMouseEvents(t){t.removeEventListener("mousedown",this.mouseDown,!1),t.removeEventListener("mousemove",this.mouseMove,!1),t.removeEventListener("mouseup",this.mouseUp,!1),t.removeEventListener("mouseleave",this.mouseLeave,!1),t.removeEventListener("mousewheel",this.mouseScroll,!1),window.removeEventListener("DOMMouseScroll",this.mouseScroll,!1)}reAddAllMouseEvents(){var t;for(t=0;t<this.elementsWithMouseEvents.length;t++)this.addMouseEvents(this.elementsWithMouseEvents[t])}removeAllMouseEvents(){var t;for(t=0;t<this.elementsWithMouseEvents.length;t++)this.removeMouseEvents(this.elementsWithMouseEvents[t])}closeAllPagesAndMenus(){if(e.core.appStateHandler.isChoosingDateTimeForEvent||e.core.appStateHandler.isMainMenuShowing||e.core.appStateHandler.isPopupMainMenuShowing||e.core.appStateHandler.isPopupEditRecurringMenuShowing||e.core.appStateHandler.viewEventControlIsShowing||e.core.appStateHandler.editEventControlIsShowing||e.core.appStateHandler.calendarsControlIsShowing||e.core.appStateHandler.shopControlIsShowing||e.core.appStateHandler.settingsControlIsShowing)for(;e.core.appStateHandler.back(););}click(t,r){let s=!1,o=e.core.domHandler.screenTopForDOM*e.core.ratio+e.core.zopDrawArea.zopAreaTop,l=e.core.domHandler.screenLeftForDOM*e.core.ratio+e.core.zopDrawArea.zopAreaLeft;if(e.core.appStateHandler.isChoosingDateTimeForEvent&&(s=e.core.dateTimeSelectionHandler.click(t,r)),!s)if(e.core.appStateHandler.isMainMenuShowing)e.core.mainMenuControl.click(t-l,r-o);else if(e.core.mainMenuControl.hitMenuButton(t-l,r-o))e.core.appStateHandler.isChoosingDateTimeForEvent||e.core.appStateHandler.mainButtonPressed();else if(e.core.calendarDateHandler.getHitWeekAt(t-l,r-o,!0))e.core.calendarDateHandler.gotoCalendarDateObject(s,r-o);else{let p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l,r-o);p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l,r-o+4)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l,r-o-4)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l+2,r-o)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l-2,r-o)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l,r-o+8)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l,r-o-8)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l+4,r-o)),p||(p=e.core.calendarEventHandler.selectCalendarEventObjectAt(t-l-4,r-o)),p?e.core.postRequest("setDetailPath",p.eventId.split(",").map(f=>parseInt(f))):e.core.calendarEventHandler.gotoBadgeAt(t-l,r-o)||e.core.calendarDateHandler.gotoCalendarDateObjectAt(t-l,r-o)}e.core.redraw(!0)}testIfStartDraggingMarker(t,r,s){e.core.dateTimeSelectionHandler.hitTopMarkerAt(t,r)?(e.core.dateTimeSelectionHandler.startDraggingTopMarker(r),e.core.redraw(!1),this.fingerLastDraggingTopMarker=s):e.core.dateTimeSelectionHandler.hitBottomMarkerAt(t,r)&&(e.core.dateTimeSelectionHandler.startDraggingBottomMarker(r),e.core.redraw(!1),this.fingerLastDraggingBottomMarker=s)}testIfContinueDraggingMarker(t,r){e.core.appStateHandler.isDraggingTopMarker&&r===this.fingerLastDraggingTopMarker?(e.core.dateTimeSelectionHandler.continueDraggingTopMarker(t),e.core.redraw(!1)):e.core.appStateHandler.isDraggingBottomMarker&&r===this.fingerLastDraggingBottomMarker&&(e.core.dateTimeSelectionHandler.continueDraggingBottomMarker(t),e.core.redraw(!1))}testIfEndDraggingMarker(){e.core.appStateHandler.isDraggingTopMarker?(e.core.dateTimeSelectionHandler.endDraggingTopMarker(),e.core.redraw(!1)):e.core.appStateHandler.isDraggingBottomMarker&&(e.core.dateTimeSelectionHandler.endDraggingBottomMarker(),e.core.redraw(!1))}touchStart(t){t.preventDefault(),this.canBeAClick=!0,e.core.drawAreaEffects.isScrollingOrZooming()&&(this.canBeAClick=!1),e.core.preloadAllImages(),e.core.drawAreaEffects.stopAllEffects(),e.core.touchEnabledDevice=!0,this.touches=t.touches,e.core.firstTouchMade=!0;let r=this.getTouchX(this.touches[0])*e.core.ratio*e.core.domRatio;var s=this.getTouchY(this.touches[0])*e.core.ratio*e.core.domRatio;return this.startedInTitleArea=e.core.mainMenuControl.startDragging(r,s),e.core.appStateHandler.isChoosingDateTimeForEvent&&(1<=this.touches.length&&(this.testIfEndDraggingMarker(),this.testIfStartDraggingMarker(r,s,0)),2<=this.touches.length&&this.testIfStartDraggingMarker(this.getTouchX(this.touches[1])*e.core.ratio*e.core.domRatio,this.getTouchY(this.touches[1])*e.core.ratio*e.core.domRatio,1)),this.touches.length===1&&(this.touchOneFingerStarted=!0,this.touchOneFingerStartX=this.getTouchX(this.touches[0]),this.touchOneFingerStartY=this.getTouchY(this.touches[0]),this.currentPressStartedTime=e.core.getTimeStamp(),this.longPressStartX=r,this.longPressStartY=s),2<=this.touches.length&&(this.touchOneFingerStarted=!1,this.touchTwoFingerStarted=!0,this.canBeAClick=!1),e.core.addButtonControl.startDragging(r,s)||e.core.appStateHandler.isDraggingTopMarker||e.core.appStateHandler.isDraggingBottomMarker||e.core.appStateHandler.isMainMenuShowing||e.core.appStateHandler.isPopupMainMenuShowing||e.core.appStateHandler.isPopupEditRecurringMenuShowing||(this.touches.length===1&&e.core.zopHandler.startScroll(s),2<=this.touches.length&&e.core.zopHandler.startZoom(s,this.getTouchY(this.touches[1])*e.core.ratio*e.core.domRatio)),this.timeWhenLastTouchEnded&&this.timeWhenLastTouchEnded+250>e.core.getTimeStamp()&&(this.canBeAClick=!1),e.core.redraw(!1),!1}getTouchX(t){return t.pageX-e.core.domHandler.screenLeftForDOM}getTouchY(t){return t.pageY-e.core.domHandler.screenTopForDOM}mouseDown(t){if(t.preventDefault(),e.core.firstTouchMade=!0,e.core.touchEnabledDevice){this.removeAllMouseEvents();return}e.core.drawAreaEffects.stopAllEffects(),e.core.preloadAllImages(),this.mouseWasDragged=0;const r=t.pageY*e.core.ratio*e.core.domRatio,s=t.pageX*e.core.ratio*e.core.domRatio,o=(t.pageY-e.core.domHandler.screenTopForDOM)*e.core.ratio*e.core.domRatio,l=(t.pageX-e.core.domHandler.screenLeftForDOM)*e.core.ratio*e.core.domRatio;if(this.startedInTitleArea=e.core.mainMenuControl.startDragging(l,o),t.button===0){if(this.canBeAClick=!0,this.mouseLeftDown=!0,this.longPressStartX=s,this.longPressStartY=r,this.currentPressStartedTime=e.core.getTimeStamp(),e.core.appStateHandler.isChoosingDateTimeForEvent&&this.testIfStartDraggingMarker(s,r,0),e.core.addButtonControl.startDragging(l,o))return;!e.core.appStateHandler.isDraggingTopMarker&&!e.core.appStateHandler.isDraggingBottomMarker&&!e.core.appStateHandler.isMainMenuShowing&&!e.core.appStateHandler.isPopupMainMenuShowing&&!e.core.appStateHandler.isPopupEditRecurringMenuShowing&&e.core.zopHandler.startScroll(r)}else!e.core.appStateHandler.isMainMenuShowing&&!e.core.appStateHandler.isPopupMainMenuShowing&&!e.core.appStateHandler.isPopupEditRecurringMenuShowing&&(this.mouseRightDown=!0,this.mouseZoomY=r-500,e.core.zopHandler.startZoom(this.mouseZoomY,r));return e.core.redraw(!1),!1}touchMove(t){t.preventDefault(),this.touches=t.touches;const r=this.getTouchY(this.touches[0])*e.core.ratio*e.core.domRatio;var s=this.getTouchX(this.touches[0])*e.core.ratio*e.core.domRatio,o;return this.touches.length>1&&(o=this.getTouchY(this.touches[1])*e.core.ratio*e.core.domRatio,this.getTouchX(this.touches[1])),e.core.appStateHandler.isChoosingDateTimeForEvent&&(this.touches.length>0&&this.testIfContinueDraggingMarker(r,0),this.touches.length>1&&this.testIfContinueDraggingMarker(o,1)),this.currentPressStartedTime<Date.now()-550&&(this.canBeAClick=!1),this.touches.length===1&&this.touchOneFingerStarted&&Math.abs(this.touchOneFingerStartX-this.getTouchX(this.touches[0]))+Math.abs(this.touchOneFingerStartY-this.getTouchY(this.touches[0]))>this.touchSlop*e.core.ratio*e.core.domRatio*(this.startedInTitleArea?1.5:1)&&(this.canBeAClick=!1),!this.canBeAClick&&this.startedInTitleArea?e.core.mainMenuControl.continueDragging(s,r):e.core.appStateHandler.isAddButtonBeingDragged?e.core.addButtonControl.continueDragging(s,r):!e.core.appStateHandler.isDraggingTopMarker&&!e.core.appStateHandler.isDraggingBottomMarker&&!e.core.appStateHandler.isMainMenuShowing&&!e.core.appStateHandler.isPopupMainMenuShowing&&!e.core.appStateHandler.isPopupEditRecurringMenuShowing&&(this.touches.length===1&&this.touchOneFingerStarted?(this.canBeAClick||e.core.appStateHandler.isMainMenuShowing,e.core.zopHandler.continueScroll(r),e.core.drawAreaEffects.prepareAutoScroll(r)):this.touches.length>=2&&this.touchTwoFingerStarted&&e.core.zopHandler.continueZoom(r,o)),e.core.redraw(!1),!1}mouseMove(t){if(t.preventDefault(),e.core.touchEnabledDevice){this.removeAllMouseEvents();return}const r=t.pageY*e.core.ratio*e.core.domRatio,s=t.pageX*e.core.ratio*e.core.domRatio,o=(t.pageY-e.core.domHandler.screenTopForDOM)*e.core.ratio*e.core.domRatio,l=(t.pageX-e.core.domHandler.screenLeftForDOM)*e.core.ratio*e.core.domRatio;if(this.mouseLeftDown){if(this.longPressStartX!==s&&this.longPressStartY!==r&&(this.canBeAClick=!1),e.core.appStateHandler.isPopupEditRecurringMenuShowing)return;this.mouseWasDragged+=1,e.core.appStateHandler.isChoosingDateTimeForEvent&&this.testIfContinueDraggingMarker(r,0),!this.canBeAClick&&this.startedInTitleArea?e.core.mainMenuControl.continueDragging(l,o):e.core.appStateHandler.isAddButtonBeingDragged?e.core.addButtonControl.continueDragging(l,o):!e.core.appStateHandler.isDraggingTopMarker&&!e.core.appStateHandler.isDraggingBottomMarker&&!e.core.appStateHandler.isMainMenuShowing&&!e.core.appStateHandler.isPopupMainMenuShowing&&!e.core.appStateHandler.isAddButtonBeingDragged&&(e.core.zopHandler.continueScroll(r),e.core.drawAreaEffects.prepareAutoScroll(r)),e.core.redraw(!1)}this.mouseRightDown&&!e.core.appStateHandler.isMainMenuShowing&&!e.core.appStateHandler.isPopupMainMenuShowing&&!e.core.appStateHandler.isPopupEditRecurringMenuShowing&&(e.core.zopHandler.continueZoom(this.mouseZoomY,r),e.core.redraw(!1));let c=e.core.calendarEventHandler.selectCalendarEventObjectAt(l,o);return e.core.postRequest("setHoveringPath",(c==null?void 0:c.eventId.split(",").map(p=>parseInt(p)))??void 0),document.documentElement.style.cursor=c?"pointer":"default",!1}touchEnd(t){if(t.preventDefault(),!this.touchOneFingerStarted&&!this.touchTwoFingerStarted)return!1;var r=t.touches;return t=t.changedTouches,e.core.appStateHandler.isChoosingDateTimeForEvent&&this.testIfEndDraggingMarker(),this.currentPressStartedTime<e.core.getTimeStamp()-550&&(this.canBeAClick=!1),e.core.appStateHandler.isMainMenuBeingDragged?e.core.mainMenuControl.endDragging():e.core.appStateHandler.isAddButtonBeingDragged?e.core.addButtonControl.endDragging():!this.touchOneFingerStarted||t.length!==1||r!==void 0&&r.length!==0||(this.canBeAClick===!1?e.core.drawAreaEffects.startAutoScroll(this.getTouchY(t[0])*e.core.ratio*e.core.domRatio):this.click(t[0].pageX*e.core.ratio*e.core.domRatio,t[0].pageY*e.core.ratio*e.core.domRatio)),e.core.zopHandler.endScroll(),e.core.zopHandler.endZoom(),this.touchTwoFingerStarted=this.touchOneFingerStarted=this.canBeAClick=!1,this.timeWhenLastTouchEnded=e.core.getTimeStamp(),e.core.redraw(!1),!1}mouseUp(t){return t.preventDefault(),e.core.touchEnabledDevice?this.removeAllMouseEvents():(e.core.appStateHandler.isMainMenuBeingDragged?(this.mouseLeftDown=!1,e.core.mainMenuControl.endDragging()):e.core.appStateHandler.isAddButtonBeingDragged?(this.mouseLeftDown=!1,e.core.addButtonControl.endDragging()):this.mouseLeftDown&&(this.mouseLeftDown=!1),e.core.appStateHandler.isDraggingTopMarker||e.core.appStateHandler.isDraggingBottomMarker||(e.core.zopHandler.endScroll(),this.mouseWasDragged>3||this.currentPressStartedTime<e.core.getTimeStamp()-650?(this.mouseWasDragged=0,e.core.drawAreaEffects.prepareAutoScroll(t.pageY*e.core.ratio*e.core.domRatio,200),e.core.drawAreaEffects.startAutoScroll(t.pageY*e.core.ratio*e.core.domRatio)):this.click(t.pageX*e.core.ratio*e.core.domRatio,t.pageY*e.core.ratio*e.core.domRatio),e.core.appStateHandler.isChoosingDateTimeForEvent&&this.testIfEndDraggingMarker())),this.mouseRightDown&&!e.core.appStateHandler.isMainMenuShowing&&!e.core.appStateHandler.isPopupMainMenuShowing&&!e.core.appStateHandler.isPopupEditRecurringMenuShowing&&(this.mouseRightDown=!1,e.core.zopHandler.endZoom()),this.canBeAClick=!1,e.core.redraw(!1),!1}mouseScroll(t){t.preventDefault();const r=(t.pageY-e.core.domHandler.screenTopForDOM)*e.core.ratio*e.core.domRatio;if((t.pageX-e.core.domHandler.screenLeftForDOM)*e.core.ratio*e.core.domRatio,!t.ctrlKey){e.core.drawAreaEffects.stopAllEffects(),t.deltaY,e.core.zopHandler.startScroll(r),e.core.zopHandler.continueScroll(r-t.deltaY),e.core.redraw(!1);return}var s=-t.deltaY;this.timeForLastScrollEvent=e.core.getTimeStamp();var o=e.core.zopHandler.topZOP,l=e.core.zopHandler.bottomZOP;e.core.drawAreaEffects.azRunning&&(o=(e.core.drawAreaEffects.azGoalTopZOP+o)/2,l=(e.core.drawAreaEffects.azGoalBottomZOP+l)/2),t=e.core.zopHandler.getZOPFromPixel((t.pageY-(e.core.domHandler.screenTopForDOM*e.core.ratio+e.core.zopDrawArea.zopAreaTop))*e.core.ratio*e.core.domRatio);const c=(t-l)/(o-l);return s*=.01*(l-o),o=o+s*(1-c),l=l-s*c,e.core.drawAreaEffects.stopAllEffects(),e.core.zopHandler.setZoom(o,l,e.core.zopHandler.topPixel,e.core.zopHandler.bottomPixel),!1}mouseLeave(t){e.core.touchEnabledDevice===!0?this.removeAllMouseEvents():(e.core.appStateHandler.isAddButtonBeingDragged=!1,(t.pageX*e.core.ratio*e.core.domRatio>e.core.domHandler.screenWidth||t.pageY*e.core.ratio*e.core.domRatio>e.core.domHandler.screenHeight)&&(this.mouseLeftDown&&(this.mouseLeftDown=!1,e.core.zopHandler.endScroll(),e.core.drawAreaEffects.stopAllEffects()),this.mouseRightDown&&(this.mouseRightDown=!1,e.core.zopHandler.endZoom()),e.core.appStateHandler.isMainMenuBeingDragged?(this.mouseLeftDown=!1,e.core.mainMenuControl.endDragging()):e.core.appStateHandler.isAddButtonBeingDragged&&(this.mouseLeftDown=!1,e.core.addButtonControl.endDragging())),e.core.redraw(!1))}touchLeave(t){e.core.appStateHandler.isAddButtonBeingDragged=!1,e.core.zopHandler.endScroll(),e.core.drawAreaEffects.stopAllEffects(),e.core.zopHandler.endZoom(),e.core.redraw(!1)}}e.EventHandler=Br;class zr{constructor(){this.currentDelta=0,this.currentZoom=1,this.absoluteMinZoom=.05,this.absoluteMaxZoom=9e3,this.zopSizeOf5Minutes=0,this.zopSizeOfHour=0,this.zopSizeOfDay=0,this.zopSizeOfWeek=0,this.zopSizeOfMonth=0,this.zopSizeOfYear=0,this.originalZOP2=0,this.originalZOP=0,this.currentYPixel2=0,this.currentYPixel=0,this.originalYPixel2=0,this.originalYPixel=0,this.originalZoom=0,this.originalDelta=0,this.absoluteMaxZOP=0,this.absoluteMinZOP=0,this.maxScrollSpeed=3,this.rightPixel=0,this.leftPixel=0,this.bottomPixel=0,this.topPixel=0,this.extendedBottomZOP=0,this.extendedTopZOP=0,this.bottomZOP=0,this.topZOP=0,this.scrolling=!1}setAbsoluteMinMax(t,r){this.absoluteMinZOP=t,this.absoluteMaxZOP=r,this.zopSizeOfYear=this.dateToZOP(new Date(2005,0,1,0,0,0))-this.dateToZOP(new Date(2004,0,1,0,0,0)),this.zopSizeOfMonth=this.dateToZOP(new Date(2005,2,1,0,0,0))-this.dateToZOP(new Date(2005,1,1,0,0,0)),this.zopSizeOfWeek=this.dateToZOP(new Date(2005,2,8,0,0,0))-this.dateToZOP(new Date(2005,2,1,0,0,0)),this.zopSizeOfDay=this.dateToZOP(new Date(2005,1,2,0,0,0))-this.dateToZOP(new Date(2005,1,1,0,0,0)),this.zopSizeOfHour=this.dateToZOP(new Date(2005,1,1,2,0,0))-this.dateToZOP(new Date(2005,1,1,1,0,0)),this.zopSizeOf5Minutes=this.dateToZOP(new Date(2005,1,1,2,10,0))-this.dateToZOP(new Date(2005,1,1,2,5,0))}initSize(t,r,s,o){this.topPixel=t,this.bottomPixel=r,this.leftPixel=s,this.rightPixel=o}getZoom(){return this.currentZoom}setZoom(t,r,s,o){this.currentZoom=(r-t)/(o-s),this.currentZoom===0&&(this.currentZoom=1e3),this.validateZoomValues(),this.currentDelta=t-(s-this.topPixel)*this.currentZoom,this.setZOPBounds(this.getZOPFromPixel2(this.topPixel,this.currentZoom,this.currentDelta),this.bottomZOP=this.getZOPFromPixel2(this.bottomPixel,this.currentZoom,this.currentDelta))}setZOPBounds(t,r){this.topZOP=t,this.bottomZOP=r;var s=this.bottomZOP-this.topZOP;this.extendedTopZOP=this.topZOP-s,this.extendedBottomZOP=this.bottomZOP+s}isObjectAboveScreen(t){return t<this.topZOP}isObjectBelowScreen(t){return t>this.bottomZOP}isObjectAboveExtendedScreen(t){return t<this.extendedTopZOP}isObjectBelowExtendedScreen(t){return t>this.extendedBottomZOP}startScroll(t){this.originalDelta=this.currentDelta,this.currentYPixel=this.originalYPixel=t,this.scrolling=!0}continueScroll(t){if(this.scrolling){e.core.getTimeStamp(),this.originalYPixel!=t&&e.core.getTimeStamp();var r=this.getZOPFromPixel2(this.originalYPixel,this.currentZoom,this.originalDelta);t=this.getZOPFromPixel2(t,this.currentZoom,this.originalDelta),this.currentDelta=this.originalDelta-(t-r),this.setZOPBounds(this.getZOPFromPixel2(this.topPixel,this.currentZoom,this.currentDelta),this.bottomZOP=this.getZOPFromPixel2(this.bottomPixel,this.currentZoom,this.currentDelta)),this.validateZoomValues()}}endScroll(){this.scrolling=!1}startZoom(t,r){if(this.originalDelta=this.currentDelta,this.originalZoom=this.currentZoom,this.originalYPixel=t,this.originalYPixel2=r,this.originalYPixel>this.originalYPixel2){var s=this.originalYPixel;this.originalYPixel=this.originalYPixel2,this.originalYPixel2=s}50>this.originalYPixel2-this.originalYPixel&&(this.originalYPixel2=this.originalYPixel+50),this.originalZOP=this.getZOPFromPixel2(this.originalYPixel,this.originalZoom,this.originalDelta),this.originalZOP2=this.getZOPFromPixel2(this.originalYPixel2,this.originalZoom,this.originalDelta)}continueZoom(t,r){if(this.currentYPixel=t,this.currentYPixel2=r,this.currentYPixel>this.currentYPixel2){var s=this.currentYPixel;this.currentYPixel=this.currentYPixel2,this.currentYPixel2=s}this.currentYPixel2-this.currentYPixel>50&&(this.setZoom(this.originalZOP,this.originalZOP2,this.currentYPixel,this.currentYPixel2),this.validateZoomValues())}endZoom(){}showInitialBounds(t){var r=e.core.calendarDataProxy&&e.core.calendarDataProxy.demoVideoSpecial&&500<this.currentZoom,o=this.dateToZOP(new Date),l=e.core.calendarDateHandler.getCalendarDateObject(o,e.CalendarDateObjectType.Day,e.core.calendarDateHandler.rootCalendarDateObjects[0]);if(5>l.calendarEvents.length&&(l=e.core.calendarDateHandler.getCalendarDateObject(o,e.CalendarDateObjectType.Month,e.core.calendarDateHandler.rootCalendarDateObjects[0])),4>l.calendarEvents.length&&(l=e.core.calendarDateHandler.getCalendarDateObject(o,e.CalendarDateObjectType.Year,e.core.calendarDateHandler.rootCalendarDateObjects[0])),l.calendarEvents.length===0)o=this.dateToZOP(D().add(-2,"days").toDate()),l=this.dateToZOP(D().add(8,"days").toDate());else var s=10*(l.endZOP-l.startZOP)/l.calendarEvents.length,l=o+.8*s,o=Math.max(o-.2*s,this.dateToZOP(D().add(-7,"days").toDate())),l=Math.min(l,this.dateToZOP(D().add(30,"days").toDate()));t?e.core.drawAreaEffects.startAutoZoom(o,l,r,function(){}):this.setZOPBounds(o,l),e.core.calendarDataProxy&&e.core.calendarDataProxy.analyticsValue("Value","Start","Initial Zoom",l-o)}validateZoomValues(){this.currentZoom<this.absoluteMinZoom&&(this.currentZoom=this.absoluteMinZoom,e.core.drawAreaEffects.stopAllEffects()),this.currentZoom>this.absoluteMaxZoom&&(this.currentZoom=this.absoluteMaxZoom,e.core.drawAreaEffects.stopAllEffects());var t=this.currentDelta,r=this.getZOPFromPixel2(this.bottomPixel,this.currentZoom,this.currentDelta),s=r-t;this.currentDelta<this.absoluteMinZOP&&(t=this.currentDelta=this.absoluteMinZOP,r=t+s,this.originalYPixel=this.currentYPixel,this.setZoom(t,r,this.topPixel,this.bottomPixel)),r>this.absoluteMaxZOP&&(r=this.absoluteMaxZOP,t=this.currentDelta=Math.max(this.absoluteMinZOP,r-s),this.originalYPixel=this.currentYPixel,this.originalYPixel2=this.currentYPixel2,this.setZoom(t,r,this.topPixel,this.bottomPixel))}getPixelFromZOP(t){return this.currentZoom===0?0:Math.floor((t-this.currentDelta)/this.currentZoom+this.topPixel)}get2PixelsFromZOPsForVErticalText(t,r){if(this.currentZoom===0)return new e.NumberPair(0,0);var o=(r-this.currentDelta)/this.currentZoom+this.topPixel,s=Math.floor(o-((t-this.currentDelta)/this.currentZoom+this.topPixel)),o=Math.floor(o);return new e.NumberPair(o-s,o)}getZOPFromPixel2(t,r,s){return(t-this.topPixel)*r+s}getZOPFromPixel(t){return this.getZOPFromPixel2(t,this.currentZoom,this.currentDelta)}getZOPFromPixelDiff(t){return this.getZOPFromPixel2(t,this.currentZoom,this.currentDelta)-this.getZOPFromPixel2(0,this.currentZoom,this.currentDelta)}getFractionalPixelDistance(t){return this.currentZoom===0?0:t/this.currentZoom}updateStartEndZOP(t){t.startZOP=this.dateToZOP(t.startDateTime),t.endZOP=this.dateToZOP(t.endDateTime)-1}dateToZOP(t){return(Number(t)-e.core.settings.globalMinDate)/6e4}getDateFromZOP(t){return new Date(6e4*t+e.core.settings.globalMinDate)}getPixelFromDate(t){return this.getPixelFromZOP(this.dateToZOP(t))}getDateFromPixel(t){return this.getDateFromZOP(this.getZOPFromPixel(t))}getZOPSizeOf(t){switch(t){case e.CalendarDateObjectType.Minutes5:return this.zopSizeOf5Minutes;case e.CalendarDateObjectType.Hour:return this.zopSizeOfHour;case e.CalendarDateObjectType.Day:return this.zopSizeOfDay;case e.CalendarDateObjectType.Week:return this.zopSizeOfWeek;case e.CalendarDateObjectType.Month:return this.zopSizeOfMonth;case e.CalendarDateObjectType.Year:return this.zopSizeOfYear;default:throw Error("Unhandled CalendarDateObjectType")}}getPixelSizeOf(t){switch(t){case e.CalendarDateObjectType.Minutes5:return this.getPixelSizeOf5Minutes();case e.CalendarDateObjectType.Hour:return this.getPixelSizeOfHour();case e.CalendarDateObjectType.Day:return this.getPixelSizeOfDay();case e.CalendarDateObjectType.Week:return this.getPixelSizeOfWeek();case e.CalendarDateObjectType.Month:return this.getPixelSizeOfMonth();case e.CalendarDateObjectType.Year:return this.getPixelSizeOfYear();default:throw Error("Unhandled CalendarDateObjectType")}}getPixelSizeOfYear(){return this.zopSizeOfYear/this.currentZoom}getPixelSizeOfMonth(){return this.zopSizeOfMonth/this.currentZoom}getPixelSizeOfWeek(){return this.zopSizeOfWeek/this.currentZoom}getPixelSizeOfDay(){return this.zopSizeOfDay/this.currentZoom}getPixelSizeOfHour(){return this.zopSizeOfHour/this.currentZoom}getPixelSizeOf5Minutes(){return this.zopSizeOf5Minutes/this.currentZoom}}e.ZopHandler=zr;class Ir{constructor(){this.cacheKeys=[],this.cacheObjects=[],this.nextCacheKeys=[],this.nextCacheObjects=[],this.lastIndex=-1}startNewRound(){this.lastIndex=-1,this.cacheKeys=this.nextCacheKeys,this.cacheObjects=this.nextCacheObjects,this.nextCacheKeys=[],this.nextCacheObjects=[]}emptyCache(){this.lastIndex=-1,this.cacheKeys=[],this.cacheObjects=[],this.nextCacheKeys=[],this.nextCacheObjects=[]}findObject(t){var r=this.lastIndex+1;if(1e4<this.cacheKeys.length)throw Error("Cache too big!");for(;this.cacheKeys[r]!==t&&r<this.cacheKeys.length;)r++;if(r<this.cacheKeys.length)return this.nextCacheKeys.push(this.cacheKeys[r]),this.nextCacheObjects.push(this.cacheObjects[r]),this.lastIndex=r,this.cacheObjects[r];if(0<this.lastIndex)return this.lastIndex=0,this.findObject(t)}addObject(t,r){this.nextCacheKeys.push(t),this.nextCacheObjects.push(r)}}e.SpeedCache=Ir;class Wr{constructor(){this.keys=[],this.values=[]}put(t,r){this.keys.push(t),this.values.push(r)}find(t){var r;for(r=0;r<this.keys.length;r++)if(this.keys[r]==t)return this.values[r]}}e.Hashtable=Wr;class _r{constructor(...t){var r,s,o,l;if(this.isGraded=!1,this.grade=0,this.isHovered=!1,this.isDetail=!1,t.length>1)this.summary=t[0],this.description=t[1],this.location=t[2],this.startDateTime=t[3],this.endDateTime=t[4],t[3].getHours()===0&&t[3].getMinutes()===0&&(this.endDateTime=(s=(r=e.core)==null?void 0:r.calendarDateHandler)==null?void 0:s.addMinutes(t[3],-1)),e.core.zopHandler.updateStartEndZOP(this),this.isGraded=!1,this.grade=0,this.calendarId=t[5],this.eventId=t[6],this.color="",this.isHovered=!1,this.isDetail=!1,this.mwNode=void 0;else{const{summary:c,description:p,location:f,startDate:g,endDate:m,calendarId:S,eventId:M,color:_,isHovered:j,isDetail:B,mwNode:Ce}=t[0];this.summary=c||"",this.description=p||"",this.location=f,this.startDateTime=g,this.endDateTime=m,m.getHours()===0&&m.getMinutes()===0&&(this.endDateTime=(l=(o=e.core)==null?void 0:o.calendarDateHandler)==null?void 0:l.addMinutes(m,-1)),e.core.zopHandler.updateStartEndZOP(this),this.isGraded=!1,this.grade=0,this.calendarId=S,this.eventId=M,this.color=_,this.isHovered=j,this.isDetail=B,this.mwNode=Ce}}}e.CalendarEventObject=_r;class Lr{constructor(t,r,s,o,l,c,p){this.id=t,this.name=r,this.colorId=o,this.visibility=l,this.canEditCalendar=c,this.canEditCalendarEvents=p,this.defaultReminders=s,this.allEventsAreFullDay=!0,this.countEvents=0}}e.CalendarObject=Lr;class Rr{constructor(t){this.minutes=+t}}e.Reminder=Rr;class Zr{constructor(t,r,s){this.details=[],this.possibleFullEvents=[],this.calendarEvents=[],this.calendarDateObjectType=t,this.detailsArePopulated=!0,this.isReadyForParentToBeShown=!1,this.startDateTime=r,this.endDateTime=new Date(this.startDateTime.getTime()),this.startZOP=e.core.zopHandler.dateToZOP(this.startDateTime),this.isRed=!1,t===e.CalendarDateObjectType.Minutes5&&(this.endDateTime.setMinutes(this.startDateTime.getMinutes()+5),e.core.commonUserSettings.use24hFormat?this.shortText=D(this.startDateTime).format("HH"):(this.shortText=D(this.startDateTime).format("h"),this.ampm=D(this.startDateTime).format("A")),this.shortText2=10>this.startDateTime.getMinutes()?"0"+this.startDateTime.getMinutes():""+this.startDateTime.getMinutes(),this.startDateTime.getHours(),this.startDateTime.getHours(),this.longText=this.shortText,this.detailsArePopulated=!0),t===e.CalendarDateObjectType.Hour&&(this.endDateTime.setHours(this.startDateTime.getHours()+1),e.core.commonUserSettings.use24hFormat?(this.shortText=D(this.startDateTime).format("HH"),this.shortText2=10>this.startDateTime.getMinutes()?"0"+this.startDateTime.getMinutes():""+this.startDateTime.getMinutes(),this.longText=this.shortText+":"+this.shortText2):(this.shortText=D(this.startDateTime).format("h"),this.shortText2=10>this.startDateTime.getMinutes()?"0"+this.startDateTime.getMinutes():""+this.startDateTime.getMinutes(),this.shortText2=="00"&&(this.shortText2=void 0),this.ampm=D(this.startDateTime).format("A"),this.longText=this.shortText+(this.shortText2?":"+this.shortText2:"")+" "+this.ampm),this.detailsArePopulated=!1),t===e.CalendarDateObjectType.Day&&(this.endDateTime.setDate(this.startDateTime.getDate()+1),this.shortText=this.startDateTime.getDate().toString(),this.shortText2=e.core.helper.weekdayShort.find(this.startDateTime.getDay()),this.shortText2==null&&(this.shortText2=D(this.startDateTime).format("ddd"),e.core.helper.weekdayShort.put(this.startDateTime.getDay(),this.shortText2),e.core.helper.weekdayShort.put(this.startDateTime.getDay()+7,this.shortText2)),this.longText=e.core.helper.weekdayLong.find(this.startDateTime.getDay()),this.longText==null&&(this.longText=D(this.startDateTime).format("dddd"),e.core.helper.weekdayLong.put(this.startDateTime.getDay(),this.longText),e.core.helper.weekdayLong.put(this.startDateTime.getDay()+7,this.longText)),this.longText=this.startDateTime.getDate()+" "+this.longText,this.detailsArePopulated=!1,this.startDateTime.getDay()===e.core.settings.redDay&&(this.isRed=!0)),t===e.CalendarDateObjectType.Week&&(this.endDateTime.setDate(this.endDateTime.getDate()+7),this.detailsArePopulated=!0,this.details=[{},{},{},{},{},{},{}]),t===e.CalendarDateObjectType.Month&&(this.endDateTime.setMonth(this.startDateTime.getMonth()+1),this.shortText=e.core.helper.monthesShort.find(this.startDateTime.getMonth()),this.shortText==null&&(this.shortText=D(this.startDateTime).format("MMM"),e.core.helper.monthesShort.put(this.startDateTime.getMonth(),this.shortText)),this.longText=e.core.helper.monthesLong.find(this.startDateTime.getTime()),this.longText==null&&(this.longText=D(this.startDateTime).format("MMMM YYYY"),e.core.helper.monthesLong.put(this.startDateTime.getTime(),this.longText)),this.parentText="",this.detailsArePopulated=!1),t===e.CalendarDateObjectType.Year&&(this.endDateTime.setFullYear(this.startDateTime.getFullYear()+1),this.shortText=""+this.startDateTime.getFullYear(),this.longText=""+this.startDateTime.getFullYear(),this.detailsArePopulated=!1),t===e.CalendarDateObjectType.Title&&(this.endDateTime=s,this.longText="",this.detailsArePopulated=!1),this.endZOP=e.core.zopHandler.dateToZOP(this.endDateTime)}}e.CalendarDateObject=Zr;class jr{constructor(t,r,s,o){this.calendarEvent=t,this.calendarDate=r,this.calendarDateDetail=s,this.position=o}}e.PossibleEventTagsAtThisZoomLevel=jr;class Nr{constructor(t,r){this.extraSpace=0,this.calendarEventTagWrappers=[],this.parentBottomZOP=this.parentTopZOP=0,this.calendarDateObject=t,this.availableSpace=r}}e.CalendarEventTagGroup=Nr;class Yr{constructor(t){this.wantedPixelShift=0,this.right=0,this.left=0,this.position=0,this.isPartial=!1,this.parentCollidingFullEventWrappers=[],this.visible=!0,this.calendarEvent=t}}e.CalendarEventTagWrapper=Yr;class wr{constructor(t){this.widthPercentWhenTagsExist=0,this.widthPercent=0,this.preferredWidth=void 0,this.right=void 0,this.left=void 0,this.collisionsHaveBeenChecked=!1,this.parentCollidingFullEventWrappers=[],this.childCollidingFullEventWrappers=[],this.childCollidingEventTagWrappers=[],this.calendarEvent=t}}e.CalendarFullEventWrapper=wr;class Ur{constructor(){this.closeToBellow=this.closeToAbove=!1}}e.Badge=Ur;class Gr{constructor(){this.left=this.maxZOP=this.minZOP=0}}e.OccupiedSpaceObject=Gr;class Xr{constructor(){this.parentCollidingFullEventWrapper=void 0,this.maxZOP=this.minZOP=0}}e.TagSurface=Xr;class qr{constructor(){}}e.TagDataToPaint=qr;class $r{constructor(t,r){this.value1=t,this.value2=r}}e.NumberPair=$r;class Kr{constructor(t,r){this.valueNumber=t,this.valueString=r}}e.NumberStringPair=Kr;class Jr{constructor(t){this.absoluteMinDate=D("1900-01-01 00:00:00").toDate(),this.absoluteMaxDate=D("2100-01-01 00:00:00").toDate(),this.globalMinDate=Number(D("1900-01-01 00:00:00").toDate()),this.margin=0,this.redDay=0,this.menuIconHeight=0,this.menuItemHeight=0,this.menuTextHeight=0,this.title2FontSize=0,this.title1FontSize=0,this.title0FontSize=0,this.weekCircleDiameter=0,this.innerTopMaxMargin=0,this.innerLeftMargin=0,this.titleWidth=0,this.dateBigTextSize=0,this.badgeTextHeight=0,this.tagTextHeight=0,this.tagColorWidth=0,this.minDateHeight=0,this.tagHeight=0,this.rightToLeft=!0,this.eventsFarLeft=0,this.useMiniBadges=!1,this.zoom=this.menuButtonBottom=this.badgesLeft=0,this.allowWeekNumber=!0,this.lineThickness=2,this.themes=new e.Dictionary,this.reloadThemesSettings(t)}reloadThemesSettings(t){this.themes.add("0",new va),t.licenceDarkTheme&&this.themes.add("3",new fa),t.licenceCandyTheme&&this.themes.add("4",new Ta),this.themes.containsKey(t.theme)||(t.theme="0"),this.theme=this.themes[t.theme]}reloadTheme(){this.themes.containsKey(e.core.commonUserSettings.theme)||(e.core.commonUserSettings.theme="0"),this.theme=this.themes[e.core.commonUserSettings.theme]}}e.Settings=Jr;class Qr{constructor(){this.themeName="OneView Calendar Original",this.colorBlack="#000000",this.colorTitleBackground=this.colorDark="#524864",this.colorTitleText="#EFEAE1",this.colorGrayText="#454545",this.colorHorizontalTitle=this.colorDarkText="#000000",this.colorBigDateDividerStr="rgba( 173, 176, 181, ",this.colorRedDayText="#C91E1E",this.colorDarkSoft="#999999",this.colorLightSoft="#BBBBBB",this.colorTag2=this.colorTag="#E50081",this.colorWhite=this.colorLight=this.colorBackground=this.colorTagText="#EFEAE1",this.colorRed="#524864",this.colorMarker="#4C88DB",this.colorBlue="#2890D1",this.colorAddButton="#3E5C87",this.colorDim="rgba(0; 0; 0; 0.5)",this.colorLightDim="rgba(125; 125; 125; 0.9)",this.colorToday=[225,210,220],this.color1="#333333",this.colorFadeOut="rgba(125, 125, 125, 0.5)",this.colorWeekNumberText=this.colorWeekNumberShadow="#EFEAE1",this.colorWeekNumberCircle="#524864",this.eventColors="#556783 #87547B #5A837C #785A7F #AF9165 #8B5956 #51717D #4D2242 #5E9172 #381C46 #A07466 #B9AD73 #29344D #936F8B #305242 #796E83 #594E45 #7A6B5B #538B8B #813F59 #7C978C #7A3C84 #64302F #785642 #3A3A3A #828282 #484848 #909090 #696969 #565656".split(" "),this.eventTextColors="#EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1 #EFEAE1".split(" "),this.eventColorsForFirstCalendar=["#916181","#916181","#916181","#916181","#916181"],this.eventsFarLeft=0,this.tagTextIsBold=!1,this.titleWidthFactor=50,this.triangleColorStr="rgba( 39, 49, 66, ",this.triangleTextNudgeX=2,this.triangleTextNudgeY=1,this.titleBarFont="Quicksand",this.titleBarFontSize=28,this.titleBarFontBold="Quicksand",this.textFontThin=this.textFontBold=this.textFont="Arial",this.badgeColorIsTagTextColor=!1,this.addButtonWidthFactor=.9}}e.OriginalColorTheme=Qr;class Or{constructor(){this.themeName="Vivid Material",this.colorBlack="#000000",this.colorDark="#01518E",this.colorBigDateDividerStr="rgba( 173, 176, 181, ",this.colorTitleBackground="#01518E",this.colorTitleText="#FFFFFF",this.colorGrayText="#454545",this.colorHorizontalTitle=this.colorDarkText="#000000",this.colorRedDayText="#C91E1E",this.colorDarkSoft="#999999",this.colorLightSoft="#BBBBBB",this.colorTag2=this.colorTag="#E50081",this.colorWhite=this.colorLight=this.colorBackground=this.colorTagText="#FFFFFF",this.colorRed="#01518E",this.colorMarker="#4C88DB",this.colorBlue="#2890D1",this.colorAddButton="#01518E",this.colorDim="rgba(0; 0; 0; 0.5)",this.colorLightDim="rgba(125; 125; 125; 0.9)",this.colorToday=[225,210,220],this.color1="#333333",this.colorFadeOut="rgba(125, 125, 125, 0.5)",this.colorWeekNumberShadow="#E9EAEC",this.colorWeekNumberText="#FFFFFF",this.colorWeekNumberCircle="#707070",this.eventColors="#016DD5 #E91E63 #009688 #FF9800 #9C27B0 #70A83C #F23E2B #965F30 #FF3886 #38C0AF #FFA938 #CC43E4 #85C848 #FF543E #BE7E46 #8E1C4E #11635B #A66E1B #830BCD #537200 #FF5513 #63452B #757575 #656565 #555555 #808080 #707070 #606060".split(" "),this.eventTextColors="#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" "),this.eventColorsForFirstCalendar=["#303F9F","#3949AB","#3F51B5","#5C6BC0","#7986CB"],this.eventsFarLeft=0,this.tagTextIsBold=!1,this.titleWidthFactor=50,this.triangleColorStr="rgba( 1, 81, 142, ",this.triangleTextNudgeY=this.triangleTextNudgeX=0,this.titleBarFont="RobotoL",this.titleBarFontSize=16,this.titleBarFontBold="RobotoB",this.textFont="Roboto",this.textFontBold="RobotoB",this.textFontThin="RobotoL",this.badgeColorIsTagTextColor=!1,this.addButtonWidthFactor=1.1}}e.MaterialColorTheme=Or;class va{constructor(){this.themeName="Free theme",this.colorBlack="#000000",this.colorDark="#233142",this.colorBigDateDividerStr="rgba( 173, 176, 181, ",this.colorTitleBackground="#ffffff",this.colorTitleText="#334155",this.colorGrayText="#454545",this.colorDarkText="#7B838E",this.colorHorizontalTitle="#4B5056",this.colorRedDayText="#4f46e6",this.colorDarkSoft="#999999",this.colorLightSoft="#BBBBBB",this.colorTag2="#E50081",this.colorTag="#E50081",this.colorWhite="#FFFFFF",this.colorLight="#FFFFFF",this.colorBackground="#FFFFFF",this.colorTagText="#FFFFFF",this.colorRed="#233142",this.colorMarker="#4338ca",this.colorBlue="#2890D1",this.colorAddButton="#233142",this.colorDim="rgba(0; 0; 0; 0.5)",this.colorLightDim="rgba(125; 125; 125; 0.9)",this.colorToday=[225,210,220],this.color1="#333333",this.colorFadeOut="rgba(125, 125, 125, 0.5)",this.colorWeekNumberShadow="#E9EAEC",this.colorWeekNumberText="#233142",this.colorWeekNumberCircle="#FFFFFF",this.eventColors="#3878DB #E12FB7 #22B297 #AD45C6 #FF9800 #EF4134 #2291BB #94006C #1ECD63 #620094 #FF6633 #F3C600 #173B91 #D65BBE #00793F #926DB5 #775234 #A5713A #00C1C4 #F4116D #5FBF98 #D905FF #C6110D #C24F05 #394E6B #967292 #7D9673 #454545 #757575 #A0A0A0".split(" "),this.eventTextColors="#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" "),this.eventColorsForFirstCalendar=["#303F9F","#3949AB","#3F51B5","#5C6BC0","#7986CB"],this.eventsFarLeft=0,this.tagTextIsBold=!1,this.titleWidthFactor=40,this.triangleColorStr="rgba( 1, 81, 142, ",this.triangleTextNudgeY=0,this.triangleTextNudgeX=0,this.titleBarFont="system-ui",this.titleBarFontSize=16,this.titleBarFontBold="system-ui",this.textFont="system-ui",this.textFontBold="system-ui",this.textFontThin="system-ui",this.badgeColorIsTagTextColor=!1,this.addButtonWidthFactor=1.1}}e.FreeTheme=va;class fa{constructor(){this.themeName="Dark theme",this.colorBlack="#000000",this.colorDark="#333333",this.colorBigDateDividerStr="rgba( 133, 136, 131, ",this.colorTitleBackground="#0e162a",this.colorTitleText="#95a2b8",this.colorGrayText="#808080",this.colorDarkText="#95a3b8",this.colorHorizontalTitle="#7C7C7C",this.colorRedDayText="#c7d2ff",this.colorDarkSoft="#999999",this.colorLightSoft="#BBBBBB",this.colorTag2=this.colorTag="#E50081",this.colorTagText="#FFFFFF",this.colorBackground="#0f162a",this.colorWhite=this.colorLight="#FFFFFF",this.colorRed="#333333",this.colorMarker="#e0e7ff",this.colorBlue="#2890D1",this.colorAddButton="#333333",this.colorDim="rgba(0; 0; 0; 0.5)",this.colorLightDim="rgba(125; 125; 125; 0.9)",this.colorToday=[225,210,220],this.color1="#333333",this.colorFadeOut="rgba(125, 125, 125, 0.5)",this.colorWeekNumberShadow="#2D2B2A",this.colorWeekNumberText="#A49C91",this.colorWeekNumberCircle="#191919",this.eventColors="#3878DB #E12FB7 #22B297 #AD45C6 #FF9800 #EF4134 #2291BB #94006C #1ECD63 #620094 #FF6633 #F3C600 #173B91 #D65BBE #00793F #926DB5 #775234 #926DB5 #00C1C4 #F4116D #5FBF98 #D905FF #C6110D #C24F05 #394E6B #967292 #7D9673 #454545 #757575 #A0A0A0".split(" "),this.eventTextColors="#FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF #FFFFFF".split(" "),this.eventColorsForFirstCalendar=["#303F9F","#3949AB","#3F51B5","#5C6BC0","#7986CB"],this.eventsFarLeft=0,this.tagTextIsBold=!1,this.titleWidthFactor=40,this.triangleColorStr="rgba( 1, 81, 142, ",this.triangleTextNudgeY=this.triangleTextNudgeX=0,this.titleBarFont="system-ui",this.titleBarFontSize=16,this.titleBarFontBold="system-ui",this.textFont="system-ui",this.textFontBold="system-ui",this.textFontThin="system-ui",this.badgeColorIsTagTextColor=!0,this.addButtonWidthFactor=1.1}}e.DarkTheme=fa;class Ta{constructor(){this.themeName="Candy theme",this.colorBlack="#000000",this.colorDark="#AA6990",this.colorBigDateDividerStr="rgba( 173, 176, 181, ",this.colorTitleBackground="#AA6990",this.colorTitleText="#FFFFFF",this.colorGrayText="#454545",this.colorDarkText="#7B838E",this.colorHorizontalTitle="#4B5056",this.colorRedDayText="#E26C8E",this.colorDarkSoft="#999999",this.colorLightSoft="#BBBBBB",this.colorTag2=this.colorTag="#E50081",this.colorWhite=this.colorLight=this.colorBackground=this.colorTagText="#FFFFFF",this.colorRed="#AA6990",this.colorMarker="#E26C8E",this.colorBlue="#2890D1",this.colorAddButton="#AA6990",this.colorDim="rgba(0; 0; 0; 0.5)",this.colorLightDim="rgba(125; 125; 125; 0.9)",this.colorToday=[225,210,220],this.color1="#333333",this.colorFadeOut="rgba(125, 125, 125, 0.5)",this.colorWeekNumberShadow="#E9EAEC",this.colorWeekNumberText="#233142",this.colorWeekNumberCircle="#FFFFFF",this.eventColors="#AFC9F1 #F3ACE2 #A7E0D5 #DEB5E8 #FFD699 #F9B3AE #A7D3E4 #D499C4 #A5EBC1 #C099D4 #FFC2AD #FAE899 #A2B1D3 #EFBDE5 #99C9B2 #D3C5E1 #C9BAAE #DBC6B0 #99E6E7 #FBA0C5 #BFE5D6 #F09BFF #E8A09E #E7B99B #B0B8C4 #D5C7D3 #CBD5C7 #999999 #BABABA #D9D9D9".split(" "),this.eventTextColors="#234A88 #8C1D71 #156E5E #6B2B7B #9E5E00 #942820 #155A74 #6F0051 #137F3D #4A006F #9E3F20 #816900 #112C6D #853876 #004B27 #4D3A60 #4A3320 #664624 #00787A #970B44 #326551 #87039E #950D0A #783103 #243244 #60495D #50604A #2C2C2C #4B4B4B #666666".split(" "),this.eventColorsForFirstCalendar=["#303F9F","#3949AB","#3F51B5","#5C6BC0","#7986CB"],this.eventsFarLeft=0,this.tagTextIsBold=!0,this.titleWidthFactor=50,this.triangleColorStr="rgba( 1, 81, 142, ",this.triangleTextNudgeY=this.triangleTextNudgeX=0,this.titleBarFont="RobotoL",this.titleBarFontSize=16,this.titleBarFontBold="RobotoB",this.textFont="Roboto",this.textFontBold="RobotoB",this.textFontThin="RobotoL",this.badgeColorIsTagTextColor=!0,this.addButtonWidthFactor=1.1}}e.CandyTheme=Ta;class Vr{constructor(t){this.calendars=[],this.debugtext="",this.touchEnabledDevice=!1,this.charCodeReload="reload",this.charCodeLogin="cloud-download",this.charCodeLogout="cloud-upload",this.charCodeCalendars="layers",this.charCodeShop="shop",this.charCodeAbout="help",this.charCodeHeart="heart",this.charCodeSend="send",this.charCodeFake="drop",this.charCodeLogo="logo",this.charCodeSettings="cog",this.charCodeBack="arrow-left",this.charCodeMoveBlack="clock",this.charCodeMove="clock",this.charCodeEdit="pencil",this.charCodeDelete="trash",this.charCodeOk="check",this.charCodeCancel="cross",this.charCodeView="eye",this.charCodeNew="circle-plus",this.charCodeMenu="menu",this.charCodeAdd="add",this.alreadyRedrawing=!1,this.pageLoaded=!1,this.readyToGo=!1,this.redrawCountdown=0,this.maxTime=0,this.totalRedraws=0,this.totalTime=0,this.fps=0,this.lastDrawTime=0,this.hardRedraw=!1,this.debugCounter=0,this.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(r){window.setTimeout(r,1e3/60)}}(),this.firstTouchMade=!1,this.loadedFiles=[],this.loadingHandler=new e.LoadingHandler,this.isCordovaApp=!1,this.ratio=window.devicePixelRatio,this.helper=new e.Helper,this.commonUserSettings=new e.CommonUserSettings,this.zopHandler=new e.ZopHandler,this.settings=new e.Settings(this.commonUserSettings),this.drawArea=new e.DrawArea,this.eventHandler=new e.EventHandler,this.domHandler=new e.DomHandler,this.zopDrawArea=new e.ZopDrawArea,this.appStateHandler=new e.AppStateHandler,this.dateTimeSelectionHandler=new e.DateTimeSelectionHandler,this.postRequest=t}init(){this.setSizeSettings(),this.domHandler.init(),this.dateTimeSelectionHandler.init(),this.commonUserSettings.updateAppWithLang(),this.debugTexts=[],this.redrawCore=this.redrawCore.bind(this),this.loadGraphics(),this.loadDataProxy()}loadDataProxy(){this.populateCalendars()}redraw(t){this.hardRedraw=t,this.redrawCountdown=1}startDrawLoop(){this.redrawCountdown=1,this.redrawCore()}redrawCore(){this.debugtextDiv?this.debugtextDiv.innerText!==this.debugtext&&(this.debugtextDiv.innerText=this.debugtext):this.debugtextDiv=document.getElementById("debugtext");var t;if(!this.alreadyRedrawing&&this.readyToGo===!0&&e.core.appStateHandler.sizesInitiated&&0<this.redrawCountdown){this.lastDrawTime=this.getTimeStamp(),t=this.drawAreaEffects.runEffects(),this.alreadyRedrawing=!0,this.appStateHandler.isMainMenuShowing&&this.mainMenuControl.setSizes(),this.zopDrawArea.clearDrawArea(),this.drawArea.startNewRound(),this.addButtonControl.isAnimationActive()&&(t=!0,this.addButtonControl.doAnimation()),this.calendarDateHandler&&(this.appStateHandler.isMainMenuShowing&&this.mainMenuControl.redraw(),this.calendarDateHandler.paintCalendarDateObjects(),this.calendarEventHandler.paintCalendarEvents()),this.calendarDateHandler.paintWeekNumbers(),this.dateTimeSelectionHandler&&this.appStateHandler&&this.appStateHandler.isChoosingDateTimeForEvent?this.dateTimeSelectionHandler.paint():this.calendarDateHandler.paintMarker(new Date),this.mainMenuControl.redrawMenuIcon(),this.addButtonControl.redrawAddButton();var r=this.getTimeStamp(),s=Math.round(r-this.lastDrawTime);this.totalTime+=s,this.totalRedraws+=1,this.maxTime<s+20&&(this.maxTime=Math.max(s,this.maxTime)),100<this.totalRedraws&&(this.totalRedraws=this.totalTime=0),this.loadingHandler&&this.loadingHandler.showLoadingSpinnerIfNeeded(),this.lastDrawTime=r,this.zopDrawArea.debugTexts(this.debugTexts),this.debugCounter=0,this.alreadyRedrawing=!1,t||!this.loadingHandler||this.loadingHandler.isLoading()||--this.redrawCountdown}this.requestAnimFrame.call(window,this.redrawCore)}getTimeStamp(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():new Date().getTime()}reopenApp(){e.core.helper.canShowDatePicker()&&(this.onSuccessX=this.onSuccessX.bind(this),this.onErrorX=this.onErrorX.bind(this),datePicker.updateThemeColor(this.settings.theme.colorTitleBackground,this.commonUserSettings.theme=="3",this.onSuccessX,this.onErrorX))}onSuccessX(t){datePicker.restartApp(function(){},function(){})}onErrorX(t){}reloadAllCalendarData(){this.calendarDateHandler.reset(),this.calendarDataProxy?this.calendarDataProxy.reload():this.loadDataProxy()}persistChangesToCalendars(){e.core.calendarDataProxy.saveSettings()}populateCalendars(){var t=this;e.core&&e.core.pageLoaded?(this.calendarDataProxy=new e.DemoCalendarDataProxy,this.loadingHandler.startLoading(),this.calendarDataProxy.populateCalendarEvents(function(){t.dataLoadReady()})):(this.populateCalendars=this.populateCalendars.bind(this),setTimeout(this.populateCalendars,100))}dataLoadReady(){this.firstTouchMade||e.core.zopHandler.showInitialBounds(!0),e.core.calendarEventHandler.dataLoadReady(),e.core.loadingHandler.stopLoading(),this.redraw(!0)}dynamicallyLoadFile(t,r,s){var o=this;-1<this.loadedFiles.indexOf(t)?s&&s():r=="js"?(r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",t),s&&(r.onload=function(){o.loadedFiles.push(t),s()}),document.getElementsByTagName("head")[0].appendChild(r)):r=="css"&&(r=document.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(r),this.loadedFiles.push(t))}getCalendar(t){var r;for(r=0;r<this.calendars.length;r++)if(this.calendars[r].id===t)return this.calendars[r];return new e.CalendarObject("NoneZ","None",[],1,e.VisibilityType.Hidden,!0,!0)}setSizeSettings(){var t=Math.max(6.67,Math.min(10,Math.min(e.core.domHandler.screenWidthForDOM,e.core.domHandler.screenHeightForDOM)/20));this.settings.allowWeekNumber=9<t,this.settings.titleWidth=Math.ceil(this.settings.theme.titleWidthFactor*this.ratio*this.settings.zoom),this.settings.innerLeftMargin=this.settings.titleWidth/5,this.settings.innerTopMaxMargin=this.settings.innerLeftMargin,this.settings.badgesLeft=Math.floor(9.6*t*this.ratio*this.settings.zoom),this.settings.eventsFarLeft=Math.floor(11.5*t*this.ratio*this.settings.zoom),10>t&&(this.settings.eventsFarLeft=this.settings.badgesLeft+6*this.ratio*this.settings.zoom),this.settings.useMiniBadges=10>t,this.settings.tagHeight=Math.floor(26*this.ratio*this.settings.zoom),this.zopHandler.absoluteMinZoom=.001*this.settings.tagHeight/this.ratio,this.zopHandler.absoluteMaxZoom=4e5/this.settings.tagHeight,this.settings.minDateHeight=this.settings.tagHeight+2,this.settings.tagColorWidth=0,this.settings.margin=Math.floor(4*this.ratio*this.settings.zoom),this.settings.tagTextHeight=Math.min(14*this.ratio*this.settings.zoom,Math.floor(this.settings.tagHeight-this.settings.margin-Math.floor(this.settings.tagHeight/4))),this.settings.weekCircleDiameter=1.6*this.settings.tagTextHeight,this.settings.badgeTextHeight=Math.min(11*this.ratio*this.settings.zoom,Math.floor(this.settings.titleWidth/2*.8)),this.settings.dateBigTextSize=Math.min(16*this.ratio*this.settings.zoom,Math.ceil((this.settings.tagTextHeight+this.settings.tagHeight)/2)),this.settings.title0FontSize=Math.min(16*this.ratio*this.settings.zoom,Math.floor(this.settings.titleWidth/2*1.1)),this.settings.title1FontSize=Math.min(16*this.ratio*this.settings.zoom,Math.floor(this.settings.titleWidth/2*.9)),this.settings.title2FontSize=Math.min(16*this.ratio*this.settings.zoom,Math.floor(this.settings.titleWidth/2*.8)),this.settings.menuTextHeight=this.settings.title0FontSize,this.settings.menuItemHeight=3*this.settings.title0FontSize,this.settings.lineThickness=2*this.ratio*this.settings.zoom,this.settings.menuIconHeight=16>this.settings.menuTextHeight?1.6*t:26>this.settings.menuTextHeight?2.4*t:34>this.settings.menuTextHeight?3.2*t:4.8*t}showBackButtons(){return!new e.Helper().isAndroid()||!e.core.isCordovaApp}loadGraphics(){this.drawAreaEffects=new e.DrawAreaEffects,this.calendarEventHandler=new e.CalendarEventHandler,this.calendarDateHandler=new e.CalendarDateHandler;var t="onorientationchange"in window?"orientationchange":"resize";this.domHandler.resetDrawAreaSize_Delayed=this.domHandler.resetDrawAreaSize_Delayed.bind(this.domHandler),window.addEventListener(t,this.domHandler.resetDrawAreaSize_Delayed,!1),new ResizeObserver(this.domHandler.resetDrawAreaSize_Delayed).observe(document.documentElement),this.zopHandler.showInitialBounds(!1),this.readyToGo=!0,this.redraw(!0),this.preloadAllImages(),this.pageLoaded=!0}preloadAllImages(){this.preloadImage(this.charCodeReload),this.preloadImage(this.charCodeLogin),this.preloadImage(this.charCodeLogout),this.preloadImage(this.charCodeCalendars),this.preloadImage(this.charCodeAbout),this.preloadImage(this.charCodeFake),this.preloadImage(this.charCodeSettings),this.preloadImage(this.charCodeNew),this.preloadImage(this.charCodeView),this.preloadImage(this.charCodeEdit),this.preloadImage(this.charCodeDelete),this.preloadImage(this.charCodeOk),this.preloadImage(this.charCodeCancel),this.preloadImage(this.charCodeMenu),this.preloadImage(this.charCodeAdd)}preloadImage(t){e.core.drawArea.drawIcon(t,-100,-100,16,16)}}e.Core=Vr;class es{constructor(t){this.languages=new e.Dictionary;var r;for(r=0;r<et.length;r++)this.languages.add(et[r],ba[r]);for(this.defaultLanguageIndex=0,this.currentLanguageIndex=et.indexOf(t),0>this.currentLanguageIndex&&(this.currentLanguageIndex=this.defaultLanguageIndex),this.keys=[],r=0;r<Ht.length;r++)this.keys.push(Ht[r][this.defaultLanguageIndex])}static languageExists(t){return 0<=et.indexOf(t)||0<=ba.indexOf(t)}get(t){var r=this.keys.indexOf(t);return 0>r?t:(r=Ht[r][this.currentLanguageIndex],r!=null&&r!=""?r:t)}}e.Translate=es;class ts{constructor(){this._keys=[],this._values=[]}setup(t,r){for(var s=0;s<t.length;s++)this.add(t[s],r[s])}syncArrays(){for(var t=0;t<this._values.length;t++)this._values[t]=this[this._keys[t]]}add(t,r){this[t]=r,this._keys.push(t),this._values.push(r)}remove(t){var r=this._keys.indexOf(t,0);this._keys.splice(r,1),this._values.splice(r,1),delete this[t]}keys(){return this._keys}values(){return this._values}containsKey(t){return!(typeof this[t]>"u")}toLookup(){return this}}e.Dictionary=ts;class as{constructor(t,r){this.cachedTags=[],this.cachedDates=[],this.cachedDates2=[],this.cachedBadges=[],this.badgeRowHeight=0,this.date2RowHeight=0,this.dateRowHeight=0,this.tagRowHeight=0,this.badgeTextHeight=0,this.date2TextHeight=0,this.dateTextHeight=0,this.tagTextHeight=0,this.previousFont="",this.canvas=t,this.canvasContext=r}setTagHeight(t){if(this.tagTextHeight!==t){this.tagTextHeight=t,this.tagRowHeight=this.tagTextHeight+2,this.cachedTags=[],this.canvasContext.clearRect(this.tagsLeft,this.tagsTop,this.tagsWidth,this.tagsHeight),t=Math.floor(this.canvas.height/this.tagRowHeight);var r;for(r=0;r<t;r++)this.cachedTags.push(new d)}}setDateHeights(t,r){if(this.dateTextHeight!==t||this.date2TextHeight!==r){this.dateTextHeight=t,this.dateRowHeight=this.dateTextHeight+2,this.date2TextHeight=r,this.date2RowHeight=this.date2TextHeight+2,this.cachedDates=[],this.canvasContext.clearRect(this.datesLeft,this.datesTop,this.datesWidth,this.datesHeight);var s=Math.floor(this.canvas.height/(this.dateRowHeight+this.date2RowHeight)),o;for(o=0;o<s;o++)this.cachedDates.push(new d);for(this.cachedDates2=[],this.canvasContext.clearRect(this.dates2Left,this.dates2Top,this.dates2Width,this.dates2Height),o=0;o<s;o++)this.cachedDates2.push(new d);this.setBoundries()}}setBadgeHeight(t){if(this.badgeTextHeight!==t){this.badgeRowHeight=this.badgeTextHeight=t,this.cachedBadges=[],this.canvasContext.clearRect(this.badgesLeft,this.badgesTop,this.badgesWidth,this.badgesHeight),t=Math.floor(this.canvas.height/t);var r;for(r=0;r<t;r++)this.cachedBadges.push(new d)}}emptyCache(){var t;for(t=0;t<this.cachedTags.length;t++)this.cachedTags[t].isEmpty=!0;for(t=0;t<this.cachedDates.length;t++)this.cachedDates[t].isEmpty=!0;for(t=0;t<this.cachedDates2.length;t++)this.cachedDates2[t].isEmpty=!0;for(t=0;t<this.cachedBadges.length;t++)this.cachedBadges[t].isEmpty=!0;this.setBoundries()}setBoundries(){this.tagsLeft=e.core.settings.eventsFarLeft,this.tagsTop=0,this.tagsWidth=this.canvas.width-this.tagsLeft,this.tagsHeight=this.canvas.height,this.badgesLeft=e.core.settings.badgesLeft,this.badgesTop=0,this.badgesWidth=this.tagsLeft-this.badgesLeft,this.badgesHeight=this.canvas.height,this.datesLeft=e.core.settings.titleWidth,this.datesTop=0,this.datesWidth=this.badgesLeft-this.datesLeft,this.datesHeight=Math.floor(this.canvas.height/(this.dateTextHeight+this.date2TextHeight))*this.dateTextHeight,this.dates2Left=e.core.settings.titleWidth,this.dates2Top=this.datesHeight,this.dates2Width=this.badgesLeft-this.dates2Left,this.dates2Height=Math.floor(this.canvas.height/(this.dateTextHeight+this.date2TextHeight))*this.date2TextHeight}startRedraw(){var t;for(t=0;t<this.cachedTags.length;t++)this.cachedTags[t].wasUsedLast=!1;for(t=0;t<this.cachedDates.length;t++)this.cachedDates[t].wasUsedLast=!1;for(t=0;t<this.cachedDates2.length;t++)this.cachedDates2[t].wasUsedLast=!1;for(t=0;t<this.cachedBadges.length;t++)this.cachedBadges[t].wasUsedLast=!1}endRedraw(){var t;for(t=0;t<this.cachedTags.length;t++)this.cachedTags[t].wasUsedLast===!1&&(this.cachedTags[t].isEmpty=!0);for(t=0;t<this.cachedDates.length;t++)this.cachedDates[t].wasUsedLast===!1&&(this.cachedDates[t].isEmpty=!0);for(t=0;t<this.cachedDates2.length;t++)this.cachedDates2[t].wasUsedLast===!1&&(this.cachedDates2[t].isEmpty=!0);for(t=0;t<this.cachedBadges.length;t++)this.cachedBadges[t].wasUsedLast===!1&&(this.cachedBadges[t].isEmpty=!0)}drawTagText(t,r,s,o,l,c,p){this.drawTextHelper(this.cachedTags,t,r,s,o,l,c,p,this.tagTextHeight,this.tagRowHeight+4,this.tagsLeft,this.tagsWidth,this.tagsTop)}drawDateText(t,r,s,o,l,c,p,f){r===this.dateTextHeight?this.drawTextHelper(this.cachedDates,t,s,o,l,c,p,f,this.dateTextHeight,this.dateRowHeight,this.datesLeft,this.datesWidth,this.datesTop):this.drawTextHelper(this.cachedDates2,t,s,o,l,c,p,f,this.date2TextHeight,this.date2RowHeight,this.dates2Left,this.dates2Width,this.dates2Top)}drawBadgeText(t,r,s,o,l,c,p){this.drawTextHelper(this.cachedBadges,t,r,s,o,l,c,p,this.badgeTextHeight,this.badgeRowHeight,this.badgesLeft,this.badgesWidth,this.badgesTop)}drawTextHelper(t,r,s,o,l,c,p,f,g,m,S,M,_){f=Math.min(f,M),t=new d,t.text=r,t.textColor=s,this.paintImageToCacheCanvas(t,l,g,m,c,f,p)}paintImageToCacheCanvas(t,r,s,o,l,c,p){r===this.canvasContext&&r.clearRect(l,p,c,o),this.setFont(s,r),r.fillStyle=t.textColor,r.fillText(t.text,l,p+s)}getImageFromCacheCanvas(t,r,s,o,l,c,p,f){r.drawImage(this.canvas,s,Math.ceil(o),f,l-1,Math.ceil(c),Math.floor(p),f,l-1)}setFont(t,r){var s="normal lighter "+t+"px Roboto";r!==this.canvasContext?r.font=s:this.previousFont!==s&&(this.previousFont=s,r.font=this.previousFont)}}e.CanvasHorizontalCacheObject=as;class rs{constructor(){this.canvasContext=void 0,this.canvas=void 0,this.zopAreaWidth=0,this.zopAreaLeft=0,this.zopAreaHeight=0,this.zopAreaTop=0,this.screenTop=0,this.screenLeft=0,this.characterFitCache=new e.SpeedCache,this.textMeasuresCache=new e.SpeedCache,this.drawInfos=[]}init(t,r){this.canvas=t,this.canvasContext=r,e.core.eventHandler.addBatchEventsTo(this.canvas)}setCanvas(t,r){this.canvas=t,this.canvasContext=r,e.core.drawArea=new e.DrawArea}fillDrawArea(t){this.canvasContext.fillStyle=t,this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height)}emptyDrawArea(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}clearDrawArea(){this.characterFitCache.startNewRound(),this.textMeasuresCache.startNewRound(),e.core.drawArea.drawFilledRectangle({x:e.core.zopHandler.leftPixel+e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,y:0,width:e.core.zopHandler.rightPixel-e.core.zopHandler.leftPixel,height:e.core.zopDrawArea.zopAreaHeight,fillStyle:e.core.settings.theme.colorBackground,hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawFilledRectangle({x:e.core.zopHandler.leftPixel,y:0,width:e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged,height:e.core.zopDrawArea.zopAreaHeight,fillStyle:e.core.settings.theme.colorTitleBackground,hasShadow:!1,rounded:!1,strokeStyle:void 0})}resetDrawAreaSize(t,r){console.log("resizing"),this.zopAreaTop=0,this.zopAreaHeight=t,this.zopAreaLeft=0,this.zopAreaWidth=r,e.core.appStateHandler.isChoosingDateTimeForEvent&&(this.zopAreaTop+=e.core.dateTimeSelectionHandler.getSpaceTakenAtTop(),this.zopAreaHeight-=e.core.dateTimeSelectionHandler.getSpaceTakenAtTop()+e.core.dateTimeSelectionHandler.getSpaceTakenAtBottom()),e.core.zopHandler.initSize(this.zopAreaTop,this.zopAreaTop+this.zopAreaHeight,this.zopAreaLeft,this.zopAreaLeft+this.zopAreaWidth),e.core.zopHandler.setZoom(e.core.zopHandler.topZOP,e.core.zopHandler.bottomZOP,this.zopAreaTop,this.zopAreaTop+this.zopAreaHeight)}setShadow(t){t&&(this.canvasContext.shadowOffsetX=1*e.core.ratio,this.canvasContext.shadowOffsetY=2*e.core.ratio,this.canvasContext.shadowBlur=4*e.core.ratio,this.canvasContext.shadowColor="rgb(0 0 0 / 0.1)")}clearTextDivs(){}drawCalendarDateObjectName(t,r,s,o,l,c,p,f){return 3>l?0:(r+=s,s=e.core.settings.theme.colorDarkText,c&&(s=e.core.settings.theme.colorRedDayText),p?this.measureTextWidth(this.drawText(o,t,r,0,l,s,e.core.settings.theme.colorBackground,!1,2e3,!f,f),l,!1,!1):this.measureTextWidthIfRisky(this.drawText(o,t,r,0,l,s,e.core.settings.theme.colorBackground,!1,2e3,!f,f),l,2e3,!1,!1))}drawBadge(t,r,s,o,l,c,p){if(e.core.settings.useMiniBadges)this.drawFilledCircle2(t,r+s/2,2*e.core.ratio*e.core.settings.zoom,p,!1);else{s=s-e.core.settings.margin-1;var f=e.core.settings.badgeTextHeight;e.core.drawArea.setFont(f);for(var g=o-t,m=this.measureTextWidth(l,f,!1,!0);m>g&&6<f;)--f,m=this.measureTextWidth(l,f,!1,!0);s=Math.floor((s-f)/2),m>o-t&&(o+=(m-o+t)/2),.5<c&&this.drawText(l,o-m,r,s,f,p,e.core.settings.theme.colorRed,!1,200,!1,!1)}}howManyCharactersFit(t,r,s,o){var l=t+"&&"+r,c=this.characterFitCache.findObject(l);if(c!==void 0){var p=c.lettersCount;if(c.lastMaxPixelWidth!==s){var f=this.measureTextWidth(t.substring(0,p),r,!1,o);if(c.lastMaxPixelWidth>s)for(;0<p&&f>=s;)--p,f=this.measureTextWidth(t.substring(0,p),r,!1,!0);else{for(o=f;p<t.length&&f<s;)p+=1,o=f,f=this.measureTextWidth(t.substring(0,p),r,!1,!0);p==t.length&&f<s||(f=o,--p)}c.lettersCount=p,c.lastMaxPixelWidth=f}return p}for(p=t.length,f=this.measureTextWidthIfRisky(t,r,s,!1,o);0<p&&f>=s;)--p,f=this.measureTextWidth(t.substring(0,p),r,!1,o);return this.characterFitCache.addObject(l,new Ea(p,s)),p}measureTextWidth(t,r,s,o){var l=t+"##"+r,c=this.textMeasuresCache.findObject(l);return c===void 0&&(c=new Da(this.canvasContext,t,r,s,o),this.textMeasuresCache.addObject(l,c)),c.pixelLength}measureTextWidthIfRisky(t,r,s,o,l){var c=t.length*r*.85;return c>s?this.measureTextWidth(t,r,o,l):c}drawTag(t,r,s,o,l,c,p,f){var g=r+1;s-=e.core.settings.margin;var m=Math.min(e.core.settings.tagColorWidth,s),S=Math.floor((c-e.core.settings.tagTextHeight)/2-e.core.settings.margin),M=S+e.core.settings.margin;0<m&&e.core.drawArea.drawFilledRectangle({x:t,y:g,width:m,height:c-e.core.settings.margin,fillStyle:e.core.settings.theme.colorBlue,hasShadow:!1,rounded:!1,strokeStyle:void 0}),0<s-m&&(e.core.drawArea.drawFilledRectangle({x:t+m,y:g,width:s-m,height:c-e.core.settings.margin,fillStyle:o,hasShadow:!1,rounded:!1,strokeStyle:void 0}),.5<f&&(.95>f&&(l=e.core.helper.colorToRGBA(l,2*(f-.5))),this.drawText(p,t+m+M,r,S,e.core.settings.tagTextHeight,l,o,!1,s-m-M-2,!1,e.core.settings.theme.tagTextIsBold)))}drawFullEvent(t,r,s,o,l,c,p,f,g){var M=Math.max(e.core.zopHandler.getPixelFromZOP(r)+1,0),m=Math.max(e.core.zopHandler.getPixelFromZOP(s),0),S=e.core.zopHandler.getPixelFromZOP(s)-e.core.zopHandler.getPixelFromZOP(r),M=Math.min(M,m-e.core.settings.tagHeight);o-=e.core.settings.margin;const _=m-M-1;if(_>0){const j=Math.min(e.core.settings.tagColorWidth,o),B=Math.floor((e.core.settings.tagHeight-e.core.settings.tagTextHeight)/2-e.core.settings.margin),Ce=B+e.core.settings.margin,Qe=Math.min(e.core.settings.tagHeight,o-j);if(j>0&&e.core.drawArea.drawFilledRectangle({x:t,y:M,width:j,height:_,fillStyle:e.core.settings.theme.colorBlue,hasShadow:!1,rounded:!1,strokeStyle:void 0}),o-j>0){const Ze=e.core.commonUserSettings.theme==="0";l=l?`rgba(${l}, ${f?1:.9})`:Ze?"rgb(148, 163, 184)":"#6c7684",e.core.drawArea.drawFilledRectangle({x:t+j,y:M,width:o-j,height:_,fillStyle:l,hasShadow:!1,rounded:!1,strokeStyle:f?Ze?"rgb(15, 23, 42)":"#fff":g?Ze?"#4338ca":"rgb(165, 180, 252)":void 0})}S/o<2||S<2*e.core.settings.tagHeight?this.drawText(p,t+j+Ce,M-1,B,e.core.settings.tagTextHeight,c,l,!1,o-j-Ce-2,!1,e.core.settings.theme.tagTextIsBold):Qe>e.core.settings.tagTextHeight&&(Math.floor(e.core.settings.tagHeight/6),this.drawVerticalTitle(r,s,t+j+Ce,p,e.core.settings.tagTextHeight,c,e.core.settings.margin,!1,e.core.settings.theme.tagTextIsBold))}}drawPartialTag(t,r,s,o,l){s-=e.core.settings.margin,4>l||e.core.drawArea.drawFilledRectangle({x:t,y:r+1,width:s,height:l-e.core.settings.margin,fillStyle:o,hasShadow:!1,rounded:!1,strokeStyle:void 0})}drawTextDiv(t,r,s,o,l,c,p,f,g,m){}drawFilledRectangle(t,r,s,o,l,c){this.canvasContext.fillStyle=l,r=e.core.zopHandler.getPixelFromZOP(r),o=Math.max(e.core.zopHandler.getPixelFromZOP(o)-r,c),this.canvasContext.fillRect(t,r,s,o)}drawTriangle(t,r,s,o,l,c,p,f){this.setShadow(f),r=e.core.zopHandler.getPixelFromZOP(r),o=r+o,c=r+c,this.canvasContext.fillStyle=p,this.canvasContext.beginPath(),this.canvasContext.moveTo(t,r),this.canvasContext.lineTo(t+s,o),this.canvasContext.lineTo(t+l,c),this.canvasContext.closePath(),this.canvasContext.fill(),this.removeShadow(f)}removeShadow(t){t&&(this.canvasContext.shadowOffsetX=0,this.canvasContext.shadowOffsetY=0,this.canvasContext.shadowBlur=0,this.canvasContext.shadowColor="#000000")}drawHorizontalLine(t,r,s,o,l){this.drawHorizontalLineThick(t,r,s,o,e.core.settings.lineThickness,l)}drawFilledCircle(t,r,s,o,l){this.setShadow(l),r=Math.floor(e.core.zopHandler.getPixelFromZOP(r))+.5,this.canvasContext.beginPath(),this.canvasContext.arc(t,r,s,0,2*Math.PI,!1),this.canvasContext.fillStyle=o,this.canvasContext.fill(),this.removeShadow(l)}drawFilledCircle2(t,r,s,o,l){this.setShadow(l),this.canvasContext.beginPath(),this.canvasContext.arc(t,r,s,0,2*Math.PI,!1),this.canvasContext.fillStyle=o,this.canvasContext.fill(),this.removeShadow(l)}drawHorizontalLineThick(t,r,s,o,l,c){r=Math.floor(e.core.zopHandler.getPixelFromZOP(r)),e.core.drawArea.drawHorizontalLineNotZOP(t,r,s,o,l,c)}startTextDelayedDraw(){this.delayedDraw=!0}endTextDelayedDraw(){this.delayedDraw=!1,this.drawInfos.sort(function(s,o){return s.textHeight-o.textHeight});for(var t=0;t<this.drawInfos.length;t++){var r=this.drawInfos[t];this.drawText(r.text,r.left,r.topPixel,r.topPixelShift,r.textHeight,r.color,r.bgColor,r.useShadow,r.maxWidth,r.isThinner,r.isBold)}this.drawInfos=[]}drawText(t,r,s,o,l,c,p,f,g,m,S){return this.delayedDraw?(this.drawInfos.push(new ya(t,r,s,o,l,c,p,f,g,m,S)),t):(s=Math.floor(s+o),e.core.drawArea.setFont(l,!1,m,S),t=t.substring(0,this.howManyCharactersFit(t,l,g,!0)),e.core.drawArea.drawText(t,r,s,l,c,!1,!1,m,S),t)}drawVerticalTitle(t,r,s,o,l,c,p,f,g){e.core.drawArea.setFont(l,f,!1,g),g=e.core.zopHandler.get2PixelsFromZOPsForVErticalText(t,r),t=g.value1+p,g=g.value2-p;var m=p=0,S=e.core.settings.menuButtonBottom;for(s>e.core.settings.titleWidth+e.core.mainMenuControl.nudgeBecauseMenuBeingDragged&&(S=0),t<e.core.zopHandler.topPixel+S&&(p=e.core.zopHandler.topPixel+S-t),r>e.core.zopHandler.bottomZOP&&(m=g-e.core.zopHandler.bottomPixel),r=g-t-p-m,g=0,m=this.measureTextWidth(o,l,f,!0)+5;1<o.length&&m>=r;)o=o.substring(0,o.length-1),m=this.measureTextWidth(o,l,f,!0)+5,g=r-m;this.measureTextWidth(o,l,f,!0)+5<r&&(this.canvasContext.save(),this.canvasContext.translate(Math.floor(s+.85*l),Math.floor(r/2)),this.canvasContext.rotate(-Math.PI/2),this.canvasContext.textAlign="center",this.canvasContext.fillStyle=c,this.canvasContext.fillText(o,Math.floor(-t-p-g/2),Math.floor(e.core.zopHandler.leftPixel)),this.canvasContext.restore())}debugTexts(t){if(t!=null){var r=20*e.core.ratio,s;for(s=0;s<t.length;s++)e.core.drawArea.drawFilledRectangle({x:200,y:r,width:1e3,height:20*e.core.ratio,fillStyle:"#000000",hasShadow:!1,rounded:!1,strokeStyle:void 0}),e.core.drawArea.drawText(t[s],202,r-1,18*e.core.ratio,"#FFFFFF",!1,!1),r+=22*e.core.ratio}}debugText(t){t!=null&&t.length!=0&&(this.canvasContext.fillStyle="#FF0000",e.core.drawArea.setFont(14),this.canvasContext.fillText(t,90,330),60<t.length&&this.canvasContext.fillText(t.substring(60),90,360),120<t.length&&this.canvasContext.fillText(t.substring(120),90,420),180<t.length&&this.canvasContext.fillText(t.substring(180),90,480),240<t.length&&this.canvasContext.fillText(t.substring(240),90,540))}}e.ZopDrawArea=rs;class Da{constructor(t,r,s,o,l){this.text=r,this.textHeight=s,l||e.core.drawArea.setFont(s,o),this.pixelLength=t.measureText(r).width}}e.TextMeasurer=Da;class ya{constructor(t,r,s,o,l,c,p,f,g,m,S){this.text=t,this.left=r,this.topPixel=s,this.topPixelShift=o,this.textHeight=l,this.color=c,this.bgColor=p,this.useShadow=f,this.maxWidth=g,this.isThinner=m,this.isBold=S}}e.TextDrawer=ya;class Ea{constructor(t,r){this.lettersCount=t,this.lastMaxPixelWidth=r}}e.FitCacheEntry=Ea;class Ft extends i{constructor(){super(...arguments),this.enableMultipleCalendars=!0,this.enableReload=!0,this.enableShop=!1,this.enableFakeData=!1,this.enableGoogleLogout=!1,this.enableGoogleLogin=!1,this.calendarDataProxyType=e.CalendarDataProxyType.Demo,this.demoVideoSpecial=!0,this.dbVersion="demo0.52",this.loadReadyCallback=()=>{}}connectionOk(){return!0}login(){}logout(){}populateCalendarEvents(t){this.loadReadyCallback=t,this.calendarEvents=[],e.core.commonUserSettings.licenceColorPicker=!0,e.core.commonUserSettings.licenceCandyTheme=!0,e.core.commonUserSettings.licenceDarkTheme=!0,e.core.settings.reloadThemesSettings(e.core.commonUserSettings),e.core.calendars=[],e.core.calendarPrimaryId=void 0,this.loadEventsFromCache()&&e.core.calendars!=null&&e.core.calendars.length!=0||(this.fakeData(),e.core.helper.sortCalendars(),e.core.calendarEventHandler.gradeCalendarEvents(this.calendarEvents),this.calendarEvents.sort(function(r,s){return r.startZOP-s.startZOP}),this.saveEventsToCache()),this.finalizeLoad(),Ft.setLastSessionWasInDemoMode(!0)}saveSettings(){this.saveEventsToCache()}reload(){var t=this.dbVersion;this.dbVersion="XXX",e.core.populateCalendars(),this.dbVersion=t}fakeData(){var t;e.core.calendars.push(new e.CalendarObject("Work","Work Calendar",[],0,e.VisibilityType.Visible,!0,!0)),e.core.calendars.push(new e.CalendarObject("My","My Calendar",[],1,e.VisibilityType.Visible,!0,!0)),e.core.calendars.push(new e.CalendarObject("Other","Partners calendar",[],2,e.VisibilityType.Visible,!0,!1)),e.core.calendarPrimaryId="My",e.core.getCalendar("Work").allEventsAreFullDay=!1,e.core.getCalendar("My").allEventsAreFullDay=!1,e.core.getCalendar("Other").allEventsAreFullDay=!1,this.calendarEvents=[];var r=D().startOf("week"),s=r.clone().add(1,"weeks").add(-28,"days"),o,l;for(t=0;30>t;t++)o=s.clone().add(-80+21*t,"days").add(17,"hours").toDate(),l=s.clone().add(-80+21*t,"days").add(19.5,"hours").toDate(),o=new e.CalendarEventObject("Hockey with kids","If you can't make it call Eddies dad: 043-423213","Weaver hall",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o);for(t=0;20>t;t++)t===3&&t++,o=s.clone().add(-100+28*t,"days").add(18,"hours").toDate(),l=s.clone().add(-100+28*t,"days").add(22,"hours").toDate(),o=new e.CalendarEventObject("Walk n talk with Jim","Time for reflection","The park",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o);for(o=D().startOf("week").add(-200,"months").toDate(),l=D().startOf("week").add(-199,"months").toDate(),o=new e.CalendarEventObject("School starts","","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(-150,"months").toDate(),l=D().startOf("week").add(-130,"months").toDate(),o=new e.CalendarEventObject("First girlfriend","","",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(-100,"months").toDate(),l=D().startOf("week").add(-99,"months").toDate(),o=new e.CalendarEventObject("16th birthday","","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(-86,"months").toDate(),l=D().startOf("week").add(-50,"months").toDate(),o=new e.CalendarEventObject("University","","",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(-48,"months").toDate(),l=D().startOf("week").add(-36,"months").toDate(),o=new e.CalendarEventObject("Year in London","","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(-32,"months").toDate(),l=D().startOf("week").add(-30,"months").toDate(),o=new e.CalendarEventObject("Wedding!!","","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(4,"days").toDate(),l=D().startOf("week").add(5,"days").toDate(),o=new e.CalendarEventObject("Jims birthday","","",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(7,"days").toDate(),l=D().startOf("week").add(8,"days").toDate(),o=new e.CalendarEventObject("Release","On the menu there is an option to connect to Google. This will enable you to see your real calendar.","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=D().startOf("week").add(9,"days").toDate(),l=D().startOf("week").add(10,"days").toDate(),o=new e.CalendarEventObject("Lisas birthday","","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(1,"weeks").add(-22,"days").toDate(),l=r.clone().add(1,"weeks").add(10,"days").toDate(),o=new e.CalendarEventObject("On diet","Calorie drought","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(-63,"weeks").add(-22,"days").toDate(),l=r.clone().add(-54,"weeks").add(10,"days").toDate(),o=new e.CalendarEventObject("On diet","Calorie drought","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(1,"weeks").add(13,"days").toDate(),l=r.clone().add(1,"weeks").add(18,"days").toDate(),o=new e.CalendarEventObject("Rent a car","Abis","",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),t=0;40>t;t++)t===5&&t++,o=s.clone().add(-120+14*t,"days").add(17,"hours").toDate(),l=s.clone().add(-120+14*t,"days").add(20,"hours").toDate(),o=new e.CalendarEventObject("Gym","","Wassits",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o);for(t=0;60>t;t++)t===5&&t++,o=s.clone().add(-127+14*t,"days").add(7,"hours").toDate(),l=s.clone().add(-127+14*t,"days").add(8,"hours").toDate(),o=new e.CalendarEventObject("Morning swim","Be on time","Lake",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o);for(o=r.clone().add(-52,"weeks").add(1,"days").toDate(),l=r.clone().add(-52,"weeks").add(31,"days").toDate(),o=new e.CalendarEventObject("Family holiday","Double check the hotel booking","Saxapahaw",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(1,"weeks").add(10,"days").toDate(),l=r.clone().add(1,"weeks").add(23,"days").toDate(),o=new e.CalendarEventObject("Family holiday","Double check the hotel booking","Saxapahaw",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(30,"weeks").toDate(),l=r.clone().add(40,"weeks").toDate(),o=new e.CalendarEventObject("Course","Double check the hotel booking","Saxapahaw",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(-100,"weeks").toDate(),l=r.clone().add(-28,"weeks").toDate(),o=new e.CalendarEventObject("Previous job","Double check the hotel booking","Saxapahaw",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(-27,"weeks").toDate(),l=r.clone().add(-18,"weeks").toDate(),o=new e.CalendarEventObject("Intro period","Double check the hotel booking","Saxapahaw",o,l,"My",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(-17,"weeks").toDate(),l=r.clone().add(-14,"weeks").toDate(),o=new e.CalendarEventObject("IT Course","Double check the hotel booking","Saxapahaw",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(-13,"weeks").toDate(),l=r.clone().add(-8,"weeks").toDate(),o=new e.CalendarEventObject("Smile project","Double check the hotel booking","Saxapahaw",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(1,"weeks").add(5,"days").add(18,"hours").toDate(),l=r.clone().add(1,"weeks").add(8,"days").add(22,"hours").toDate(),o=new e.CalendarEventObject("Visit my parents","","Sutton Bonnington",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(1,"weeks").add(14,"days").toDate(),l=r.clone().add(1,"weeks").add(16,"days").toDate(),o=new e.CalendarEventObject("Trip to mountains","Bring tent","",o,l,"Other",this.calendarEvents.length.toString()),this.calendarEvents.push(o),t=0;30>t;t++)o=r.clone().add(-15,"weeks").add(2+7*t-21,"days").add(9,"hours").toDate(),l=r.clone().add(-15,"weeks").add(2+7*t-21,"days").add(9,"hours").add(20,"minutes").toDate(),o=new e.CalendarEventObject("Morning briefing","","Work",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o);for(t=0;15>t;t++)o=r.clone().add(1,"weeks").add(4+7*t-21,"days").add(9,"hours").toDate(),l=r.clone().add(1,"weeks").add(4+7*t-21,"days").add(9,"hours").add(20,"minutes").toDate(),o=new e.CalendarEventObject("Morning briefing","","Work",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o);for(o=r.clone().add(1,"weeks").add(-7,"days").toDate(),l=r.clone().add(1,"weeks").add(0,"days").toDate(),o=new e.CalendarEventObject("Annual wrap-up","Close all ongoing cases","",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(-23,"weeks").add(-7,"days").toDate(),l=r.clone().add(-23,"weeks").add(0,"days").toDate(),o=new e.CalendarEventObject("Annual wrap-up","Close all ongoing cases","",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),t=0;10>t;t++)t===7&&(t+=2),o=s.clone().add(-3+7*t,"days").add(7,"hours").add(30,"minutes").toDate(),l=s.clone().add(-3+7*t,"days").add(10,"hours").toDate(),o=new e.CalendarEventObject("My breakfast-day","Have everything prepared by 7.30","Work",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o);o=r.clone().add(1,"weeks").add(-4,"days").add(11,"hours").toDate(),l=r.clone().add(1,"weeks").add(-4,"days").add(13,"hours").toDate(),o=new e.CalendarEventObject("Meeting with R.P","Your turn to take the bill","Jackie's Besty Diner",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o),o=r.clone().add(1,"weeks").add(3,"days").add(13,"hours").toDate(),l=r.clone().add(1,"weeks").add(3,"days").add(16,"hours").toDate(),o=new e.CalendarEventObject("Meeting with R.P","Bring the files","Office on Winfall BLVD",o,l,"Work",this.calendarEvents.length.toString()),this.calendarEvents.push(o)}getCleanRedirectURI(){return window.location.protocol+"//"+window.location.host}getRRuleObject(t,r){r(void 0)}getFirstRecurringEvent(t){return this.calendarEvents.filter(function(r){return r.recurringEventId===t.recurringEventId})[0]}finalizeLoad(){var t;for(this.applyCalendarsVisibilitySettings(),e.core.calendarEventHandler.clearAllEvents(),t=0;t<this.calendarEvents.length;t++)e.core.getCalendar(this.calendarEvents[t].calendarId).visibility==e.VisibilityType.Visible&&e.core.calendarEventHandler.addEventToCalendar(this.calendarEvents[t]);e.core.calendarEventHandler.findCommonTimes(),e.core.loadingHandler.stopLoading(),this.loadReadyCallback&&this.loadReadyCallback(),e.core.redraw(!0)}canEditRecurring(t){return!1}deleteEvent(t,r,s){if(t.isRecurring&&r===a.EventEditType.AllInSeries)for(r=e.core.calendarEventHandler.getCalendarEventsByIdAndRecurringId(t.recurringEventId),t=0;t<r.length;t++)this.removeEventFromFromDemoData(r[t]),e.core.calendarEventHandler.removeCalendarEvent(r[t]);else this.removeEventFromFromDemoData(t),e.core.calendarEventHandler.removeCalendarEvent(t);this.saveEventsToCache()}removeEventFromFromDemoData(t){var r;for(r=0;r<this.calendarEvents.length;r++)if(this.calendarEvents[r]===t){this.calendarEvents.splice(r,1);break}}addNewEvent(t,r){if(t.id=""+Math.random(),this.calendarEvents.push(t),e.core.calendarEventHandler.addEventToCalendar(t),t.rruleToSave!==void 0&&t.rruleToSave!==null){var s=t.endDateTime.getTime()-t.startDateTime.getTime();t.isRecurring=!0;for(var o=t.rruleToSave.all(),l=1;l<o.length;l++){var c=new Date(o[l].getTime()+s),c=new e.CalendarEventObject(t.summary,t.description,t.location,o[l],c,t.calendarId,""+Math.random());c.isRecurring=!0,c.recurringEventId=t.id,this.calendarEvents.push(c),e.core.calendarEventHandler.addEventToCalendar(c)}}this.saveEventsToCache()}editExistingEvent(t,r){e.core.calendarEventHandler.removeCalendarEvent(t),e.core.calendarEventHandler.addEventToCalendar(t),this.saveEventsToCache()}saveEventsToCache(){this.localStorageSetItem("oneview_demo_verrsion",this.dbVersion),this.localStorageSetItem("oneview_demo_saveComplete",JSON.stringify(!1)),this.localStorageSetItem("oneview_demo_allEvents",JSON.stringify(this.calendarEvents)),this.localStorageSetItem("oneview_demo_allCalendars",JSON.stringify(e.core.calendars)),this.localStorageSetItem("oneview_demo_primaryCalendarId",JSON.stringify(e.core.calendarPrimaryId)),this.localStorageSetItem("oneview_demo_demo",JSON.stringify(!0)),this.localStorageSetItem("oneview_demo_saveComplete",JSON.stringify(!0))}static getLastSessionWasInDemoMode(){try{var t=localStorage.getItem("oneview_demo_last_session_was_in_demo_mode");return t==null||t==null?!0:JSON.parse(t)}catch{return!0}}static setLastSessionWasInDemoMode(t){new e.LocalStorage().localStorageSetItem("oneview_demo_last_session_was_in_demo_mode",JSON.stringify(t))}loadEventsFromCache(){try{var t=localStorage.getItem("oneview_demo_verrsion"),r=localStorage.getItem("oneview_demo_saveComplete"),s=localStorage.getItem("oneview_demo_allEvents"),o=localStorage.getItem("oneview_demo_allCalendars"),l=localStorage.getItem("oneview_demo_primaryCalendarId"),c=localStorage.getItem("oneview_demo_demo");if(t!==this.dbVersion||r!="true"||o==null||o==null||s==null||s==null||l==null||l==null||c==null||c==null)return!1;try{e.core.calendarPrimaryId=JSON.parse(l),this.calendarEvents=JSON.parse(s,this.dateTimeReviver),e.core.calendars=JSON.parse(o,this.dateTimeReviver)}catch{return!1}return!0}catch{return!1}}persistCalendarsVisibilitySettings(t){this.localStorageSetItem("oneview_demo_visibilitySettings",JSON.stringify(t)),this.saveEventsToCache(),e.core.populateCalendars()}applyCalendarsVisibilitySettings(){try{var t=localStorage.getItem("oneview_demo_visibilitySettings");if(t!=null)for(var t=JSON.parse(t,this.dateTimeReviver),r=0;r<e.core.calendars.length;r++)for(var s=0;s<t.length;s++)t[s].id==e.core.calendars[r].id&&(e.core.calendars[r].visibility=t[s].newVisibility)}catch{}}analyticsEvent(t,r){}analyticsPage(t){}analyticsValue(t,r,s,o){}analyticsTiming(t,r){}}e.DemoCalendarDataProxy=Ft;class ss{constructor(){this.colorPickerId="onview.calendar.color.control",this.darkThemeId="oneview.calendar.theme.dark.1",this.candyThemeId="oneview.calendar.theme.candy",this.pageHtml='<div id="calendarsTopBar" class="topBar">    <button id="shopBack" class="topBarButton" style="width:50%"><img src="images/arrow-left.svg" class="topBarImage"/></span><span>{#Back#}</span></button>    <button id="emptyButton" class="topBarButton" style="width:50%"></button>    <div id="shopTitle" class="topBarTitle" style="width:100%">{#Shop#}</div></div><div id="shopArea" class="pageContent pageTopPadding">    <div id="darkThemeArea" class="shopItemArea" >        <div class="shopItemAreaLeft" >            <div id="darkThemeTitle" class="shopItemTitle"></div>            <div id="darkThemeDescription" class="shopItemDescription"></div>            <button id="darkThemePrice" class="shopItemButton"> ? </button>        </div>        <div class="shopItemAreaRight">            <img class="shopImage" src="images/darkTheme_mini.png">        </div>    </div>    <div id="candyThemeArea" class="shopItemArea" >        <div class="shopItemAreaLeft" >            <div id="candyThemeTitle" class="shopItemTitle"></div>            <div id="candyThemeDescription" class="shopItemDescription"></div>            <button id="candyThemePrice" class="shopItemButton"> ? </button>        </div>        <div class="shopItemAreaRight">            <img class="shopImage" src="images/candyTheme_mini.png">        </div>    </div>    <div id="colorPickerArea" class="shopItemArea" >        <div class="shopItemAreaLeft" >            <div id="colorPickerTitle" class="shopItemTitle"></div>            <div id="colorPickerDescription" class="shopItemDescription"></div>            <button id="colorPickerPrice" class="shopItemButton"> ? </button>        </div>        <div class="shopItemAreaRight">            <img class="shopImage" src="images/colorPicker_mini.png">        </div>    </div></div>',this.alreadyRegistered=!1,this.timestamp=0}reloadShopItems(){this.text="ok",this.setupColorPicker=this.setupColorPicker.bind(this),this.setupDarkTheme=this.setupDarkTheme.bind(this),this.setupCandyTheme=this.setupCandyTheme.bind(this),window.store.when(this.colorPickerId).updated(this.setupColorPicker),window.store.when(this.darkThemeId).updated(this.setupDarkTheme),window.store.when(this.candyThemeId).updated(this.setupCandyTheme),this.alreadyRegistered||(window.store.register({id:this.colorPickerId,alias:"Color picker",type:"non consumable"}),window.store.register({id:this.darkThemeId,alias:"Dark theme",type:"non consumable"}),window.store.register({id:this.candyThemeId,alias:"Candy theme",type:"non consumable"})),this.alreadyRegistered=!0,window.store.refresh(),this.productColorPicker&&this.setupItem(this.productColorPicker,"colorPicker"),this.productCandyTheme&&this.setupItem(this.productDarkTheme,"darkTheme"),this.productCandyTheme&&this.setupItem(this.productCandyTheme,"candyTheme"),document.getElementById("colorPickerTitle").innerHTML="Color picker",document.getElementById("colorPickerDescription").innerHTML="Change calendar colors and event colors. (30 color palette)",document.getElementById("darkThemeTitle").innerHTML="Dark theme",document.getElementById("darkThemeDescription").innerHTML="A beautiful theme on a dark background.",document.getElementById("candyThemeTitle").innerHTML="Candy theme",document.getElementById("candyThemeDescription").innerHTML="A playful theme in calm pastel colors.",e.core.domHandler.addClickEvent("colorPickerPrice",this.itemClicked,this),e.core.domHandler.addClickEvent("darkThemePrice",this.itemClicked,this),e.core.domHandler.addClickEvent("candyThemePrice",this.itemClicked,this)}productOk(t){return t.owned||t.downloading||t.downloaded||t.state=="downloading"||t.state=="downloaded"||t.state=="approved"||t.state=="finnished"||t.state=="owned"}productNotFinished(t){return t.state=="approved"}setupColorPicker(t){this.productColorPicker=t,this.setupItem(t,"colorPicker"),this.productOk(t)?e.core.commonUserSettings.licenceColorPicker=!0:e.core.commonUserSettings.licenceColorPicker=!1,this.productNotFinished(t)&&t.finish()}setupDarkTheme(t){this.productDarkTheme=t,this.setupItem(t,"darkTheme"),this.productOk(t)?e.core.commonUserSettings.licenceDarkTheme=!0:e.core.commonUserSettings.licenceDarkTheme=!1,this.productNotFinished(t)&&t.finish()}setupCandyTheme(t){this.productCandyTheme=t,this.setupItem(t,"candyTheme"),this.productOk(t)?e.core.commonUserSettings.licenceCandyTheme=!0:e.core.commonUserSettings.licenceCandyTheme=!1,this.productNotFinished(t)&&t.finish()}setupItem(t,r){document.getElementById(r+"Title").innerHTML=t.alias,document.getElementById(r+"Price").innerHTML=t.price,t.owned||!t.canPurchase?document.getElementById(r+"Price").classList.contains("shopItemButtonInactive")||document.getElementById(r+"Price").classList.add("shopItemButtonInactive"):document.getElementById(r+"Price").classList.contains("shopItemButtonInactive")&&document.getElementById(r+"Price").classList.remove("shopItemButtonInactive")}show(){e.core.domHandler.hideCanvas(),this.timestamp=e.core.getTimeStamp(),e.core.calendarDataProxy.analyticsPage("Shop page"),this.shopPage=e.core.domHandler.pageHtmlFormatHelper("shopPage",this.pageHtml),this.shopPage.style.display="block",e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements(),e.core.domHandler.resizeDomElements=e.core.domHandler.resizeDomElements.bind(e.core.domHandler),window.setTimeout(e.core.domHandler.resizeDomElements,0),window.setTimeout(e.core.domHandler.resizeDomElements,100),this.reloadShopItems();var t=(e.core.settings.titleWidth/e.core.ratio-24)/2;document.getElementById("shopBack").style.padding=t+"px",document.getElementById("emptyButton").style.padding=e.core.settings.titleWidth/e.core.ratio/2+1+"px",document.getElementById("shopArea").style.top="54px",e.core.showBackButtons()?(e.core.domHandler.addClickEvent("shopBack",this.shopBack,this),document.getElementById("shopTitle").style.display="none"):(document.getElementById("shopBack").style.display="none",document.getElementById("emptyButton").style.display="none")}hide(){e.core.appStateHandler.shopControlIsShowing=!1,window.store.off(this.setupColorPicker),window.store.off(this.setupDarkTheme),window.store.off(this.setupCandyTheme),e.core.domHandler.showCanvas(),e.core.domHandler.removeElement(this.shopPage.id)}reshow(){this.show()}getEventTarget(t){return t=t||window.event,t.target||t.srcElement}itemClicked(t){t.preventDefault();var r=e.core.getTimeStamp();this.lastClickTime&&this.lastClickTime+250>r||(this.lastClickTime=r,t=this.getEventTarget(t),t.innerHTML!="?"&&(t==document.getElementById("colorPickerPrice")&&window.store.order(this.colorPickerId),t==document.getElementById("darkThemePrice")&&window.store.order(this.darkThemeId),t==document.getElementById("candyThemePrice")&&window.store.order(this.candyThemeId)))}shopBack(t){300>e.core.getTimeStamp()-this.timestamp||e.core.appStateHandler.back()}}e.ShopControl=ss,e.EventEditType={10:"ThisOnly",20:"AllInSeries",30:"ThisAndFuture",40:"None",50:"DontKnow",51:"New",ThisOnly:10,AllInSeries:20,ThisAndFuture:30,None:40,DontKnow:50,New:51},e.CalendarDataProxyType={0:"Google",1:"Demo",2:"Android",Google:0,Demo:1,Android:2},e.VisibilityType={10:"Visible",20:"Hidden",Hidden:20,Visible:10},e.CalendarDateObjectType={0:"Minutes5",1:"Hour",2:"Day",3:"Week",4:"Month",5:"Year",6:"Title",Minutes5:0,Hour:1,Day:2,Week:3,Month:4,Year:5,Title:6},e.RRuleFrequencies={0:"Year",1:"Month",2:"Week",3:"Day",4:"Hourly",5:"Minutely",6:"Secondly",Day:3,Week:2,Month:1,Year:0,Title:6,Hourly:4,Minutely:5,Secondly:6},e.RRuleWeekDay={0:"Monday",1:"Tuesday",2:"Wednesday",3:"Thursday",4:"Friday",5:"Saturday",6:"Sunday",Monday:0,Tuesday:1,Wednesday:2,Thursday:3,Friday:4,Saturday:5,Sunday:6}})(q||(q={}));const hl=()=>{let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},cl=e=>{const i=new Map,n=typeof window<"u"&&window.__markwhen_wss_url;let h,u=!1;n&&(h=new WebSocket(n),h.onopen=()=>{u=!0,T("appState"),T("markwhenState")});const v=k=>{h&&u?h.send(JSON.stringify(k)):typeof window<"u"&&window.parent.postMessage(k,"*")},T=(k,I)=>{const W=`markwhen_${hl()}`;return new Promise((J,Me)=>{i.set(W,{resolve:J,reject:Me}),v({type:k,request:!0,id:W,params:I})})},C=(k,I,W)=>v({type:I,response:!0,id:k,params:W}),P=k=>{var W,J;if(!k.data.id||!k.data.id.startsWith("markwhen")||k.source===window)return;const I=k.data;if(I.response)(W=i.get(I.id))==null||W.resolve(I),i.delete(I.id);else if(I.request){const Me=(J=e==null?void 0:e[I.type])==null?void 0:J.call(e,I.params);Promise.resolve(Me).then(St=>{C(I.id,I.type,St)})}else console.error("Not a request or response",I)};h?h.onmessage=k=>{const I=new MessageEvent("message",{data:JSON.parse(k.data)});P(I)}:typeof window<"u"&&(window==null||window.addEventListener("message",P));const b=typeof window<"u"&&window.__markwhen_initial_state;return b&&e&&e.markwhenState&&e.markwhenState(b),{postRequest:T}},oa=/(milliseconds|ms)/i,na=/(seconds|second|secs|sec|s)/i,la=/(minutes|minute|mins|min)/i,da=/(hours|hour|h)/i,ha=/(?:(week\s*|work\s*|business\s*)?(days|day|d))/i,ca=/(weeks|week|w)/i,ua=/(months|month)/i,ga=/(years|year|y)/i,ul=new RegExp(`(\\d+\\W*)(${oa.source}|${na.source}|${la.source}|${da.source}|${ha.source}|${ca.source}|${ua.source}|${ga.source})(?:\\s*,\\s*|\\s*)`,"g"),gl=/(?:\W|^)(!\w+)/,Lt=new RegExp(`(by|before|after)?(\\s*${gl.source}\\s*)?(?:plus|\\+)?\\s*(${ul.source})*`),ml=/january|february|march|april|may|june|july|august|september|october|november|december/,pl=/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/,ma=new RegExp(`(?:(${ml.source})|(${pl.source}))`),vl=new RegExp(`(([0-3]?[0-9])\\s+${ma.source})`),fl=new RegExp(`(${ma.source}\\s+([0-3]?[0-9](?!\\d)))`),pa=/((1|2|3|4|5|6|7|8|9|10|11|12)(:\d{2})?([ap]m)|([012]?[0-9])(:\d{2}))/,Tl=new RegExp(`(?:(?:${vl.source}|${fl.source}),?(?:\\s+(\\d{4}),?)?(?:\\s+${pa.source})?)|(${ma.source}(?:\\s+(\\d{1,4}))?)`),Dl=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2,}(?:\.\d*)?Z/,Rt=/now/,yl=new RegExp(`(\\d{1,5}(\\/\\d{1,5}(\\/\\d{1,5}(?:(?:,|\\s)+${pa.source})?)?)?)`),Ha=new RegExp(`(${Dl.source})|(${Rt.source})|${pa.source}|(${yl.source})|(${Lt.source})|${Tl.source}`),El=new RegExp(`(?:(\\d+|other)?\\s*)(${oa.source}|${na.source}|${la.source}|${da.source}|${ha.source}|${ca.source}|${ua.source}|${ga.source})`,"g"),Cl=new RegExp(`((\\s+for\\s+(\\d+\\W*)(${oa.source}|${na.source}|${la.source}|${da.source}|${ha.source}|${ca.source}|${ua.source}|${ga.source}|(times)))|(\\s+x\\s*(\\d+)))?`),Fr=new RegExp(`\\s*every\\s+${El.source}${Cl.source}`),Sl=new RegExp(`((${Ha.source})(?:\\s*(?:-|to)\\s*(${Ha.source}))?)(${Fr.source})?\\s*:`);new RegExp(`^(\\s*)${Sl.source}(.*)`,"i");const ka=/(\d{4}(-\d{2}(-\d{2})?)?)/,Fl=new RegExp(`((?:${ka.source}|(${Lt.source})|(${Rt.source}))(\\s*/\\s*(?:${ka.source}|(${Lt.source})|(${Rt.source})))?)(${Fr.source})?\\s*:`);new RegExp(`^(\\s*)${Fl.source}(.*)`,"i");var Aa;(function(e){e.TEXT="text",e.LIST_ITEM="listItem",e.CHECKBOX="checkbox",e.IMAGE="image"})(Aa||(Aa={}));var Ba;(function(e){e.Comment="comment",e.CheckboxItemIndicator="checkboxItemIndicator",e.listItemIndicator="listItemIndicator",e.ListItemContents="listItemContents",e.Tag="tag",e.tagDefinition="tagDefinition",e.Title="title",e.View="view",e.Viewer="viewer",e.Description="description",e.Section="section",e.DateRange="dateRange",e.DateRangeColon="dateRangeColon",e.Event="event",e.Edit="edit",e.Editor="editor",e.Recurrence="recurrence",e.FrontmatterDelimiter="frontMatterDelimiter",e.HeaderKey="headerKey",e.HeaderKeyColon="headerKeyColon",e.HeaderValue="headerValue"})(Ba||(Ba={}));function*xr(e,i){if(yield{node:e,path:i},e&&!Zt(e)){const n=e.value;for(let h=0;h<n.length;h++)yield*xr(n[h],[...i,h])}}const Zt=e=>!Array.isArray(e.value);function xl(){let e,i,n=!1,h=[],u={},v;const T=(b,k)=>{var J;const I=Zt(b)?b.value.eventDescription.tags:b.tags,W=b.source||"default";return I?(J=k==null?void 0:k[W])==null?void 0:J[I[0]]:void 0},C=(b,k,I=!0)=>{h=[];for(const{node:W,path:J}of xr(b,[]))if(W&&Zt(W)){const Me=new q.CalendarEventObject({summary:W.value.eventDescription.eventDescription,description:J.join(","),location:"",startDate:new Date(W.value.dateRangeIso.fromDateTimeIso),endDate:new Date(W.value.dateRangeIso.toDateTimeIso),calendarId:"Default",eventId:J.join(","),color:T(W,u),isHovered:J.join(",")===(k==null?void 0:k.join(",")),isDetail:J.join(",")===(i==null?void 0:i.join(",")),mwNode:W});h.push(Me)}q.core.calendarEventHandler.clearAllEvents(),q.core.calendars=[new q.CalendarObject("Default","default",[],0,q.VisibilityType.Visible,!0,!0)],q.core.calendarPrimaryId="Default",q.core.getCalendar("Default").allEventsAreFullDay=!1,q.core.calendarEventHandler.gradeCalendarEvents(h),h.sort(function(W,J){return W.startZOP-J.startZOP}),h.forEach(W=>{q.core.calendarEventHandler.addEventToCalendar(W)}),q.core.calendarEventHandler.findCommonTimes(),q.core.redraw(I)},{postRequest:P}=cl({appState(b){b.isDark!==n&&(n=!!b.isDark,q.core.commonUserSettings.theme=n?"3":"0",q.core.settings.reloadTheme()),e=b.hoveringPath,u=b.colorMap,i=b.detailPath,C(v,e)},markwhenState(b){v=b.transformed,C(v,e)}});q.core=new q.Core(P),q.core.init(),q.core.startDrawLoop(),P("appState"),P("markwhenState")}window.onload=function(){window.setTimeout(function(){try{xl()}catch(e){console.error(e)}},50)}});export default Ml();

</script>
  </head>
  <body>
    <div id="debugtext"></div>
    
  </body>
</html>
